<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Getting started • EpiSoon</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/lumen/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Getting started">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">EpiSoon</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.3.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">Home</a>
</li>
<li>
  <a href="../articles/introduction.html">Getting started</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
<li>
  <a href="../reference/index.html">
    <span class="fa fa-file-code-o"></span>
     
    Functions
  </a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/epiforecasts/EpiSoon">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Getting started</h1>
            
      
      
      <div class="hidden name"><code>introduction.Rmd</code></div>

    </div>

    
    
<div id="introduction" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h2>
<p>This vignette briefly outlines the functionality of <code>EpiSoon</code>. To get started load the required packages.</p>
<ul>
<li>Load the package (<code>bsts</code> for models, <code>ggplot2</code> for plotting, and <code>cowplot</code> for theming)</li>
</ul>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(EpiSoon)</a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(bsts)</a>
<a class="sourceLine" id="cb1-3" data-line-number="3"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(fable)</a>
<a class="sourceLine" id="cb1-4" data-line-number="4"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(cowplot)</a>
<a class="sourceLine" id="cb1-5" data-line-number="5"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(dplyr)</a></code></pre></div>
</div>
<div id="forecast-rts-score-and-plot" class="section level2">
<h2 class="hasAnchor">
<a href="#forecast-rts-score-and-plot" class="anchor"></a>Forecast Rts, score and plot</h2>
<ul>
<li>We use an example dataframe built into the package but this could be replaced with your own data.</li>
</ul>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1">EpiSoon<span class="op">::</span>example_obs_rts</a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="co">#&gt;          rt       date</span></a>
<a class="sourceLine" id="cb2-3" data-line-number="3"><span class="co">#&gt; 1  2.490547 2020-03-01</span></a>
<a class="sourceLine" id="cb2-4" data-line-number="4"><span class="co">#&gt; 2  2.442588 2020-03-02</span></a>
<a class="sourceLine" id="cb2-5" data-line-number="5"><span class="co">#&gt; 3  2.402473 2020-03-03</span></a>
<a class="sourceLine" id="cb2-6" data-line-number="6"><span class="co">#&gt; 4  2.335572 2020-03-04</span></a>
<a class="sourceLine" id="cb2-7" data-line-number="7"><span class="co">#&gt; 5  2.266551 2020-03-05</span></a>
<a class="sourceLine" id="cb2-8" data-line-number="8"><span class="co">#&gt; 6  2.192293 2020-03-06</span></a>
<a class="sourceLine" id="cb2-9" data-line-number="9"><span class="co">#&gt; 7  2.146429 2020-03-07</span></a>
<a class="sourceLine" id="cb2-10" data-line-number="10"><span class="co">#&gt; 8  2.104371 2020-03-08</span></a>
<a class="sourceLine" id="cb2-11" data-line-number="11"><span class="co">#&gt; 9  2.059281 2020-03-09</span></a>
<a class="sourceLine" id="cb2-12" data-line-number="12"><span class="co">#&gt; 10 2.027134 2020-03-10</span></a>
<a class="sourceLine" id="cb2-13" data-line-number="13"><span class="co">#&gt; 11 2.014678 2020-03-11</span></a>
<a class="sourceLine" id="cb2-14" data-line-number="14"><span class="co">#&gt; 12 1.998946 2020-03-12</span></a>
<a class="sourceLine" id="cb2-15" data-line-number="15"><span class="co">#&gt; 13 1.968350 2020-03-13</span></a>
<a class="sourceLine" id="cb2-16" data-line-number="16"><span class="co">#&gt; 14 1.947376 2020-03-14</span></a>
<a class="sourceLine" id="cb2-17" data-line-number="17"><span class="co">#&gt; 15 1.906984 2020-03-15</span></a>
<a class="sourceLine" id="cb2-18" data-line-number="18"><span class="co">#&gt; 16 1.812842 2020-03-16</span></a>
<a class="sourceLine" id="cb2-19" data-line-number="19"><span class="co">#&gt; 17 1.718532 2020-03-17</span></a>
<a class="sourceLine" id="cb2-20" data-line-number="20"><span class="co">#&gt; 18 1.665646 2020-03-18</span></a>
<a class="sourceLine" id="cb2-21" data-line-number="21"><span class="co">#&gt; 19 1.639927 2020-03-19</span></a>
<a class="sourceLine" id="cb2-22" data-line-number="22"><span class="co">#&gt; 20 1.633795 2020-03-20</span></a>
<a class="sourceLine" id="cb2-23" data-line-number="23"><span class="co">#&gt; 21 1.682025 2020-03-21</span></a>
<a class="sourceLine" id="cb2-24" data-line-number="24"><span class="co">#&gt; 22 1.561653 2020-03-22</span></a></code></pre></div>
<ul>
<li>Fit a <code>bsts</code> model and produce a Rt forecast. Any appropriately wrapped model can be used (see <code>bsts_model</code> and <code>fable_model</code> for an examples).</li>
</ul>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1">rt_forecast &lt;-<span class="st"> </span><span class="kw"><a href="../reference/forecast_rt.html">forecast_rt</a></span>(EpiSoon<span class="op">::</span>example_obs_rts[<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>, ],</a>
<a class="sourceLine" id="cb3-2" data-line-number="2">                       <span class="dt">model =</span> <span class="cf">function</span>(...){EpiSoon<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/EpiSoon/man/bsts_model.html">bsts_model</a></span>(<span class="dt">model =</span> <span class="cf">function</span>(ss, y){bsts<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/bsts/man/auto.ar.html">AddAutoAr</a></span>(ss, <span class="dt">y =</span> y, <span class="dt">lags =</span> <span class="dv">10</span>)}, ...)},</a>
<a class="sourceLine" id="cb3-3" data-line-number="3">                       <span class="dt">horizon =</span> <span class="dv">21</span>, <span class="dt">samples =</span> <span class="dv">10</span>)</a>
<a class="sourceLine" id="cb3-4" data-line-number="4"></a>
<a class="sourceLine" id="cb3-5" data-line-number="5">rt_forecast</a>
<a class="sourceLine" id="cb3-6" data-line-number="6"><span class="co">#&gt; # A tibble: 210 x 4</span></a>
<a class="sourceLine" id="cb3-7" data-line-number="7"><span class="co">#&gt;    sample date          rt horizon</span></a>
<a class="sourceLine" id="cb3-8" data-line-number="8"><span class="co">#&gt;     &lt;int&gt; &lt;date&gt;     &lt;dbl&gt;   &lt;int&gt;</span></a>
<a class="sourceLine" id="cb3-9" data-line-number="9"><span class="co">#&gt;  1      1 2020-03-11  1.94       1</span></a>
<a class="sourceLine" id="cb3-10" data-line-number="10"><span class="co">#&gt;  2      2 2020-03-11  1.98       1</span></a>
<a class="sourceLine" id="cb3-11" data-line-number="11"><span class="co">#&gt;  3      3 2020-03-11  1.99       1</span></a>
<a class="sourceLine" id="cb3-12" data-line-number="12"><span class="co">#&gt;  4      4 2020-03-11  1.97       1</span></a>
<a class="sourceLine" id="cb3-13" data-line-number="13"><span class="co">#&gt;  5      5 2020-03-11  1.92       1</span></a>
<a class="sourceLine" id="cb3-14" data-line-number="14"><span class="co">#&gt;  6      6 2020-03-11  2.00       1</span></a>
<a class="sourceLine" id="cb3-15" data-line-number="15"><span class="co">#&gt;  7      7 2020-03-11  1.95       1</span></a>
<a class="sourceLine" id="cb3-16" data-line-number="16"><span class="co">#&gt;  8      8 2020-03-11  1.93       1</span></a>
<a class="sourceLine" id="cb3-17" data-line-number="17"><span class="co">#&gt;  9      9 2020-03-11  1.95       1</span></a>
<a class="sourceLine" id="cb3-18" data-line-number="18"><span class="co">#&gt; 10     10 2020-03-11  2.03       1</span></a>
<a class="sourceLine" id="cb3-19" data-line-number="19"><span class="co">#&gt; # … with 200 more rows</span></a></code></pre></div>
<ul>
<li>Score the forecast</li>
</ul>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1">rt_scores &lt;-<span class="st"> </span><span class="kw"><a href="../reference/score_forecast.html">score_forecast</a></span>(rt_forecast, EpiSoon<span class="op">::</span>example_obs_rts)</a>
<a class="sourceLine" id="cb4-2" data-line-number="2"></a>
<a class="sourceLine" id="cb4-3" data-line-number="3">rt_scores</a>
<a class="sourceLine" id="cb4-4" data-line-number="4"><span class="co">#&gt; # A tibble: 12 x 11</span></a>
<a class="sourceLine" id="cb4-5" data-line-number="5"><span class="co">#&gt;    date       horizon    dss   crps   logs   bias sharpness calibration median</span></a>
<a class="sourceLine" id="cb4-6" data-line-number="6"><span class="co">#&gt;    &lt;date&gt;       &lt;int&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;     &lt;dbl&gt;       &lt;dbl&gt;  &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb4-7" data-line-number="7"><span class="co">#&gt;  1 2020-03-11       1 -4.49  0.0337 -1.56  -0.8      0.0391   0.0000500 0.109 </span></a>
<a class="sourceLine" id="cb4-8" data-line-number="8"><span class="co">#&gt;  2 2020-03-12       2 -1.65  0.0594 -0.262 -1        0.0439   0.0000500 0.149 </span></a>
<a class="sourceLine" id="cb4-9" data-line-number="9"><span class="co">#&gt;  3 2020-03-13       3 -1.33  0.0719 -0.630 -1        0.0396   0.0000500 0.229 </span></a>
<a class="sourceLine" id="cb4-10" data-line-number="10"><span class="co">#&gt;  4 2020-03-14       4 16.5   0.135  11.4   -1        0.0221   0.0000500 0.295 </span></a>
<a class="sourceLine" id="cb4-11" data-line-number="11"><span class="co">#&gt;  5 2020-03-15       5 34.6   0.136  25.6   -1        0.0327   0.0000500 0.289 </span></a>
<a class="sourceLine" id="cb4-12" data-line-number="12"><span class="co">#&gt;  6 2020-03-16       6  0.615 0.0991  0.995 -1        0.0508   0.0000500 0.238 </span></a>
<a class="sourceLine" id="cb4-13" data-line-number="13"><span class="co">#&gt;  7 2020-03-17       7 -4.27  0.0439 -0.996 -0.400    0.125    0.0000500 0.163 </span></a>
<a class="sourceLine" id="cb4-14" data-line-number="14"><span class="co">#&gt;  8 2020-03-18       8 -4.54  0.0377 -0.917  0        0.158    0.0000500 0.0457</span></a>
<a class="sourceLine" id="cb4-15" data-line-number="15"><span class="co">#&gt;  9 2020-03-19       9 -4.38  0.0397 -1.12  -0.200    0.115    0.0000500 0.159 </span></a>
<a class="sourceLine" id="cb4-16" data-line-number="16"><span class="co">#&gt; 10 2020-03-20      10 -3.95  0.0466 -0.995 -0.400    0.133    0.0000500 0.163 </span></a>
<a class="sourceLine" id="cb4-17" data-line-number="17"><span class="co">#&gt; 11 2020-03-21      11 -1.03  0.126  -0.278 -1        0.0944   0.0000500 0.418 </span></a>
<a class="sourceLine" id="cb4-18" data-line-number="18"><span class="co">#&gt; 12 2020-03-22      12 -3.77  0.0549 -0.985 -0.8      0.109    0.0000500 0.167 </span></a>
<a class="sourceLine" id="cb4-19" data-line-number="19"><span class="co">#&gt; # … with 2 more variables: iqr &lt;dbl&gt;, ci &lt;dbl&gt;</span></a></code></pre></div>
<ul>
<li>Summarise the forecast scores</li>
</ul>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="kw"><a href="../reference/summarise_scores.html">summarise_scores</a></span>(rt_scores)</a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="co">#&gt; # A tibble: 5 x 8</span></a>
<a class="sourceLine" id="cb5-3" data-line-number="3"><span class="co">#&gt;   score      bottom   lower  median    mean   upper    top      sd</span></a>
<a class="sourceLine" id="cb5-4" data-line-number="4"><span class="co">#&gt;   &lt;chr&gt;       &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb5-5" data-line-number="5"><span class="co">#&gt; 1 bias      -1      -1      -0.9    -0.717  -0.400  -0.055  0.366 </span></a>
<a class="sourceLine" id="cb5-6" data-line-number="6"><span class="co">#&gt; 2 crps       0.0348  0.0429  0.0572  0.0736  0.106   0.135  0.0395</span></a>
<a class="sourceLine" id="cb5-7" data-line-number="7"><span class="co">#&gt; 3 dss       -4.53   -4.30   -2.71    1.86   -0.616  29.6   11.8   </span></a>
<a class="sourceLine" id="cb5-8" data-line-number="8"><span class="co">#&gt; 4 logs      -1.44   -0.995  -0.774   2.52    0.0521 21.7    8.07  </span></a>
<a class="sourceLine" id="cb5-9" data-line-number="9"><span class="co">#&gt; 5 sharpness  0.0250  0.0394  0.0726  0.0803  0.118   0.151  0.0470</span></a></code></pre></div>
<ul>
<li>Summarise the forecast</li>
</ul>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1">summarised_rt_forecast &lt;-<span class="st"> </span><span class="kw"><a href="../reference/summarise_forecast.html">summarise_forecast</a></span>(rt_forecast)</a>
<a class="sourceLine" id="cb6-2" data-line-number="2"></a>
<a class="sourceLine" id="cb6-3" data-line-number="3">summarised_rt_forecast</a>
<a class="sourceLine" id="cb6-4" data-line-number="4"><span class="co">#&gt; # A tibble: 21 x 9</span></a>
<a class="sourceLine" id="cb6-5" data-line-number="5"><span class="co">#&gt;    date       horizon median  mean     sd bottom lower upper   top</span></a>
<a class="sourceLine" id="cb6-6" data-line-number="6"><span class="co">#&gt;    &lt;date&gt;       &lt;int&gt;  &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb6-7" data-line-number="7"><span class="co">#&gt;  1 2020-03-11       1   1.96  1.97 0.0336   1.92  1.95  2.00  2.03</span></a>
<a class="sourceLine" id="cb6-8" data-line-number="8"><span class="co">#&gt;  2 2020-03-12       2   1.92  1.92 0.0368   1.85  1.92  1.96  1.96</span></a>
<a class="sourceLine" id="cb6-9" data-line-number="9"><span class="co">#&gt;  3 2020-03-13       3   1.85  1.87 0.0451   1.82  1.82  1.86  1.95</span></a>
<a class="sourceLine" id="cb6-10" data-line-number="10"><span class="co">#&gt;  4 2020-03-14       4   1.80  1.80 0.0330   1.74  1.80  1.82  1.86</span></a>
<a class="sourceLine" id="cb6-11" data-line-number="11"><span class="co">#&gt;  5 2020-03-15       5   1.76  1.76 0.0241   1.72  1.76  1.79  1.79</span></a>
<a class="sourceLine" id="cb6-12" data-line-number="12"><span class="co">#&gt;  6 2020-03-16       6   1.69  1.69 0.0515   1.61  1.66  1.73  1.75</span></a>
<a class="sourceLine" id="cb6-13" data-line-number="13"><span class="co">#&gt;  7 2020-03-17       7   1.64  1.65 0.0954   1.53  1.53  1.64  1.80</span></a>
<a class="sourceLine" id="cb6-14" data-line-number="14"><span class="co">#&gt;  8 2020-03-18       8   1.64  1.64 0.105    1.52  1.52  1.68  1.78</span></a>
<a class="sourceLine" id="cb6-15" data-line-number="15"><span class="co">#&gt;  9 2020-03-19       9   1.56  1.58 0.0889   1.45  1.53  1.67  1.70</span></a>
<a class="sourceLine" id="cb6-16" data-line-number="16"><span class="co">#&gt; 10 2020-03-20      10   1.55  1.55 0.103    1.40  1.50  1.66  1.71</span></a>
<a class="sourceLine" id="cb6-17" data-line-number="17"><span class="co">#&gt; # … with 11 more rows</span></a></code></pre></div>
<ul>
<li>Plot the forecast against observed data</li>
</ul>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="kw"><a href="../reference/plot_forecast.html">plot_forecast</a></span>(summarised_rt_forecast, EpiSoon<span class="op">::</span>example_obs_rts)</a></code></pre></div>
<p><img src="introduction_files/figure-html/unnamed-chunk-8-1.png" width="2560"></p>
</div>
<div id="forecast-cases-score-and-plot" class="section level2">
<h2 class="hasAnchor">
<a href="#forecast-cases-score-and-plot" class="anchor"></a>Forecast cases, score and plot</h2>
<ul>
<li>Forecasting cases requires the observed cases on which the observed Rt estimates were based</li>
</ul>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1">EpiSoon<span class="op">::</span>example_obs_cases</a>
<a class="sourceLine" id="cb8-2" data-line-number="2"><span class="co">#&gt; # A tibble: 63 x 2</span></a>
<a class="sourceLine" id="cb8-3" data-line-number="3"><span class="co">#&gt;    cases date      </span></a>
<a class="sourceLine" id="cb8-4" data-line-number="4"><span class="co">#&gt;    &lt;dbl&gt; &lt;date&gt;    </span></a>
<a class="sourceLine" id="cb8-5" data-line-number="5"><span class="co">#&gt;  1     1 2020-01-20</span></a>
<a class="sourceLine" id="cb8-6" data-line-number="6"><span class="co">#&gt;  2     0 2020-01-21</span></a>
<a class="sourceLine" id="cb8-7" data-line-number="7"><span class="co">#&gt;  3     1 2020-01-22</span></a>
<a class="sourceLine" id="cb8-8" data-line-number="8"><span class="co">#&gt;  4     0 2020-01-23</span></a>
<a class="sourceLine" id="cb8-9" data-line-number="9"><span class="co">#&gt;  5     0 2020-01-24</span></a>
<a class="sourceLine" id="cb8-10" data-line-number="10"><span class="co">#&gt;  6     0 2020-01-25</span></a>
<a class="sourceLine" id="cb8-11" data-line-number="11"><span class="co">#&gt;  7     1 2020-01-26</span></a>
<a class="sourceLine" id="cb8-12" data-line-number="12"><span class="co">#&gt;  8     0 2020-01-27</span></a>
<a class="sourceLine" id="cb8-13" data-line-number="13"><span class="co">#&gt;  9     0 2020-01-28</span></a>
<a class="sourceLine" id="cb8-14" data-line-number="14"><span class="co">#&gt; 10     0 2020-01-29</span></a>
<a class="sourceLine" id="cb8-15" data-line-number="15"><span class="co">#&gt; # … with 53 more rows</span></a></code></pre></div>
<ul>
<li>It also requires an assumption to be made about the serial interval (defined using probability distribution).</li>
</ul>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1">EpiSoon<span class="op">::</span>example_serial_interval</a>
<a class="sourceLine" id="cb9-2" data-line-number="2"><span class="co">#&gt;         1    2    3    4    5    6    7    8    9   10   11   12   14 </span></a>
<a class="sourceLine" id="cb9-3" data-line-number="3"><span class="co">#&gt; 0.00 0.03 0.25 0.17 0.09 0.15 0.13 0.05 0.05 0.03 0.02 0.01 0.01 0.01</span></a></code></pre></div>
<ul>
<li>Forecast cases (using the case data on which the observed Rt estimates were based)</li>
</ul>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1">case_forecast &lt;-<span class="st"> </span><span class="kw"><a href="../reference/forecast_cases.html">forecast_cases</a></span>(EpiSoon<span class="op">::</span>example_obs_cases, rt_forecast,</a>
<a class="sourceLine" id="cb10-2" data-line-number="2">                                <span class="dt">serial_interval =</span> EpiSoon<span class="op">::</span>example_serial_interval)</a>
<a class="sourceLine" id="cb10-3" data-line-number="3"></a>
<a class="sourceLine" id="cb10-4" data-line-number="4">case_forecast</a>
<a class="sourceLine" id="cb10-5" data-line-number="5"><span class="co">#&gt; # A tibble: 210 x 4</span></a>
<a class="sourceLine" id="cb10-6" data-line-number="6"><span class="co">#&gt;    sample date       cases horizon</span></a>
<a class="sourceLine" id="cb10-7" data-line-number="7"><span class="co">#&gt;     &lt;dbl&gt; &lt;date&gt;     &lt;int&gt;   &lt;int&gt;</span></a>
<a class="sourceLine" id="cb10-8" data-line-number="8"><span class="co">#&gt;  1      1 2020-03-11   175       1</span></a>
<a class="sourceLine" id="cb10-9" data-line-number="9"><span class="co">#&gt;  2      1 2020-03-12   195       2</span></a>
<a class="sourceLine" id="cb10-10" data-line-number="10"><span class="co">#&gt;  3      1 2020-03-13   222       3</span></a>
<a class="sourceLine" id="cb10-11" data-line-number="11"><span class="co">#&gt;  4      1 2020-03-14   219       4</span></a>
<a class="sourceLine" id="cb10-12" data-line-number="12"><span class="co">#&gt;  5      1 2020-03-15   287       5</span></a>
<a class="sourceLine" id="cb10-13" data-line-number="13"><span class="co">#&gt;  6      1 2020-03-16   307       6</span></a>
<a class="sourceLine" id="cb10-14" data-line-number="14"><span class="co">#&gt;  7      1 2020-03-17   319       7</span></a>
<a class="sourceLine" id="cb10-15" data-line-number="15"><span class="co">#&gt;  8      1 2020-03-18   365       8</span></a>
<a class="sourceLine" id="cb10-16" data-line-number="16"><span class="co">#&gt;  9      1 2020-03-19   380       9</span></a>
<a class="sourceLine" id="cb10-17" data-line-number="17"><span class="co">#&gt; 10      1 2020-03-20   434      10</span></a>
<a class="sourceLine" id="cb10-18" data-line-number="18"><span class="co">#&gt; # … with 200 more rows</span></a></code></pre></div>
<ul>
<li>Score the cases forecast</li>
</ul>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1">case_scores &lt;-<span class="st"> </span><span class="kw"><a href="../reference/score_case_forecast.html">score_case_forecast</a></span>(case_forecast, EpiSoon<span class="op">::</span>example_obs_cases)</a>
<a class="sourceLine" id="cb11-2" data-line-number="2"></a>
<a class="sourceLine" id="cb11-3" data-line-number="3">case_scores</a>
<a class="sourceLine" id="cb11-4" data-line-number="4"><span class="co">#&gt; # A tibble: 12 x 11</span></a>
<a class="sourceLine" id="cb11-5" data-line-number="5"><span class="co">#&gt;    date       horizon   dss   crps  logs   bias sharpness calibration median</span></a>
<a class="sourceLine" id="cb11-6" data-line-number="6"><span class="co">#&gt;    &lt;date&gt;       &lt;int&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;     &lt;dbl&gt;       &lt;dbl&gt;  &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb11-7" data-line-number="7"><span class="co">#&gt;  1 2020-03-11       1  4.32   2.83  3.37  0.200     10.4    0.0000500      8</span></a>
<a class="sourceLine" id="cb11-8" data-line-number="8"><span class="co">#&gt;  2 2020-03-12       2  4.66   3.04  3.60  0.100     13.3    0.0000500      1</span></a>
<a class="sourceLine" id="cb11-9" data-line-number="9"><span class="co">#&gt;  3 2020-03-13       3  6.48   9.55  4.24  0.6       15.6    0.0000500     33</span></a>
<a class="sourceLine" id="cb11-10" data-line-number="10"><span class="co">#&gt;  4 2020-03-14       4  5.70   3.38  3.41  0.200      8.90   0.0000500      4</span></a>
<a class="sourceLine" id="cb11-11" data-line-number="11"><span class="co">#&gt;  5 2020-03-15       5  6.39   3.43  3.46  0          5.93   0.0000500      0</span></a>
<a class="sourceLine" id="cb11-12" data-line-number="12"><span class="co">#&gt;  6 2020-03-16       6 12.0   38.3   6.14  1         23.7    0.0000500    104</span></a>
<a class="sourceLine" id="cb11-13" data-line-number="13"><span class="co">#&gt;  7 2020-03-17       7 10.8   39.9   5.66  1         37.1    0.0000500    108</span></a>
<a class="sourceLine" id="cb11-14" data-line-number="14"><span class="co">#&gt;  8 2020-03-18       8  8.98  34.9   5.57  0.8       41.5    0.0000500    103</span></a>
<a class="sourceLine" id="cb11-15" data-line-number="15"><span class="co">#&gt;  9 2020-03-19       9  7.99  15.1   4.91  0.4       55.6    0.0000500     37</span></a>
<a class="sourceLine" id="cb11-16" data-line-number="16"><span class="co">#&gt; 10 2020-03-20      10  7.88  12.7   5.00  0.200     37.1    0.0000500     15</span></a>
<a class="sourceLine" id="cb11-17" data-line-number="17"><span class="co">#&gt; 11 2020-03-21      11 10.8   74.4   6.26 -0.8       74.1    0.0000500    202</span></a>
<a class="sourceLine" id="cb11-18" data-line-number="18"><span class="co">#&gt; 12 2020-03-22      12 15.4  154.    9.63  1         60.8    0.0000500    356</span></a>
<a class="sourceLine" id="cb11-19" data-line-number="19"><span class="co">#&gt; # … with 2 more variables: iqr &lt;dbl&gt;, ci &lt;dbl&gt;</span></a></code></pre></div>
<ul>
<li>Summarise the cases scores</li>
</ul>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1"><span class="kw"><a href="../reference/summarise_scores.html">summarise_scores</a></span>(case_scores)</a>
<a class="sourceLine" id="cb12-2" data-line-number="2"><span class="co">#&gt; # A tibble: 5 x 8</span></a>
<a class="sourceLine" id="cb12-3" data-line-number="3"><span class="co">#&gt;   score     bottom  lower median   mean upper    top     sd</span></a>
<a class="sourceLine" id="cb12-4" data-line-number="4"><span class="co">#&gt;   &lt;chr&gt;      &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb12-5" data-line-number="5"><span class="co">#&gt; 1 bias       -0.58  0.175   0.3   0.392  0.85   1     0.530</span></a>
<a class="sourceLine" id="cb12-6" data-line-number="6"><span class="co">#&gt; 2 crps        2.89  3.42   13.9  32.6   38.7  132.   43.9  </span></a>
<a class="sourceLine" id="cb12-7" data-line-number="7"><span class="co">#&gt; 3 dss         4.41  6.22    7.93  8.45  10.8   14.5   3.30 </span></a>
<a class="sourceLine" id="cb12-8" data-line-number="8"><span class="co">#&gt; 4 logs        3.38  3.57    4.96  5.10   5.78   8.70  1.78 </span></a>
<a class="sourceLine" id="cb12-9" data-line-number="9"><span class="co">#&gt; 5 sharpness   6.75 12.6    30.4  32.0   45.0   70.5  22.7</span></a></code></pre></div>
<ul>
<li>Summarise the cases forecast</li>
</ul>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1">summarised_case_forecast &lt;-<span class="st"> </span><span class="kw"><a href="../reference/summarise_case_forecast.html">summarise_case_forecast</a></span>(case_forecast)</a>
<a class="sourceLine" id="cb13-2" data-line-number="2"></a>
<a class="sourceLine" id="cb13-3" data-line-number="3">summarised_case_forecast</a>
<a class="sourceLine" id="cb13-4" data-line-number="4"><span class="co">#&gt; # A tibble: 21 x 9</span></a>
<a class="sourceLine" id="cb13-5" data-line-number="5"><span class="co">#&gt;    date       horizon median  mean    sd bottom lower upper   top</span></a>
<a class="sourceLine" id="cb13-6" data-line-number="6"><span class="co">#&gt;    &lt;date&gt;       &lt;int&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb13-7" data-line-number="7"><span class="co">#&gt;  1 2020-03-11       1   171   170.  8.28    157   162   175   182</span></a>
<a class="sourceLine" id="cb13-8" data-line-number="8"><span class="co">#&gt;  2 2020-03-12       2   194.  196. 10.7     181   181   195   212</span></a>
<a class="sourceLine" id="cb13-9" data-line-number="9"><span class="co">#&gt;  3 2020-03-13       3   224.  224. 16.5     199   210   231   252</span></a>
<a class="sourceLine" id="cb13-10" data-line-number="10"><span class="co">#&gt;  4 2020-03-14       4   253   246. 17.3     211   245   257   264</span></a>
<a class="sourceLine" id="cb13-11" data-line-number="11"><span class="co">#&gt;  5 2020-03-15       5   273   282. 24.0     254   269   275   337</span></a>
<a class="sourceLine" id="cb13-12" data-line-number="12"><span class="co">#&gt;  6 2020-03-16       6   318   316. 21.6     286   307   336   353</span></a>
<a class="sourceLine" id="cb13-13" data-line-number="13"><span class="co">#&gt;  7 2020-03-17       7   350   351. 28.3     309   319   364   391</span></a>
<a class="sourceLine" id="cb13-14" data-line-number="14"><span class="co">#&gt;  8 2020-03-18       8   394.  395. 45.2     308   358   412   463</span></a>
<a class="sourceLine" id="cb13-15" data-line-number="15"><span class="co">#&gt;  9 2020-03-19       9   418   430. 44.4     380   380   432   503</span></a>
<a class="sourceLine" id="cb13-16" data-line-number="16"><span class="co">#&gt; 10 2020-03-20      10   462.  472. 50.8     383   434   483   541</span></a>
<a class="sourceLine" id="cb13-17" data-line-number="17"><span class="co">#&gt; # … with 11 more rows</span></a></code></pre></div>
<ul>
<li>Plot the forecast against observed case data</li>
</ul>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1"><span class="kw"><a href="../reference/plot_forecast.html">plot_forecast</a></span>(summarised_case_forecast, EpiSoon<span class="op">::</span>example_obs_cases)</a></code></pre></div>
<p><img src="introduction_files/figure-html/unnamed-chunk-15-1.png" width="2560"></p>
</div>
<div id="use-iterative-fitting-to-explore-a-forecast" class="section level2">
<h2 class="hasAnchor">
<a href="#use-iterative-fitting-to-explore-a-forecast" class="anchor"></a>Use iterative fitting to explore a forecast</h2>
<ul>
<li>To explore the quality of a models forecast it can help to iteratively forecast from each available data point. This is supported in <code>EpiSoon</code> using the following:</li>
</ul>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1">it_rt_forecast &lt;-<span class="st"> </span><span class="kw"><a href="../reference/iterative_rt_forecast.html">iterative_rt_forecast</a></span>(EpiSoon<span class="op">::</span>example_obs_rts,</a>
<a class="sourceLine" id="cb15-2" data-line-number="2">                                        <span class="dt">model =</span> <span class="cf">function</span>(...){</a>
<a class="sourceLine" id="cb15-3" data-line-number="3">                                          EpiSoon<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/EpiSoon/man/bsts_model.html">bsts_model</a></span>(<span class="dt">model =</span> <span class="cf">function</span>(ss, y){bsts<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/bsts/man/auto.ar.html">AddAutoAr</a></span>(ss, <span class="dt">y =</span> y, <span class="dt">lags =</span> <span class="dv">10</span>)}, ...)</a>
<a class="sourceLine" id="cb15-4" data-line-number="4">                                          },</a>
<a class="sourceLine" id="cb15-5" data-line-number="5">                                        <span class="dt">horizon =</span> <span class="dv">7</span>, <span class="dt">samples =</span> <span class="dv">10</span>, <span class="dt">min_points =</span> <span class="dv">4</span>)</a>
<a class="sourceLine" id="cb15-6" data-line-number="6"></a>
<a class="sourceLine" id="cb15-7" data-line-number="7">it_rt_forecast</a>
<a class="sourceLine" id="cb15-8" data-line-number="8"><span class="co">#&gt; # A tibble: 1,260 x 5</span></a>
<a class="sourceLine" id="cb15-9" data-line-number="9"><span class="co">#&gt;    forecast_date sample date          rt horizon</span></a>
<a class="sourceLine" id="cb15-10" data-line-number="10"><span class="co">#&gt;    &lt;chr&gt;          &lt;int&gt; &lt;date&gt;     &lt;dbl&gt;   &lt;int&gt;</span></a>
<a class="sourceLine" id="cb15-11" data-line-number="11"><span class="co">#&gt;  1 2020-03-05         1 2020-03-06  2.07       1</span></a>
<a class="sourceLine" id="cb15-12" data-line-number="12"><span class="co">#&gt;  2 2020-03-05         2 2020-03-06  2.28       1</span></a>
<a class="sourceLine" id="cb15-13" data-line-number="13"><span class="co">#&gt;  3 2020-03-05         3 2020-03-06  2.23       1</span></a>
<a class="sourceLine" id="cb15-14" data-line-number="14"><span class="co">#&gt;  4 2020-03-05         4 2020-03-06  2.22       1</span></a>
<a class="sourceLine" id="cb15-15" data-line-number="15"><span class="co">#&gt;  5 2020-03-05         5 2020-03-06  2.25       1</span></a>
<a class="sourceLine" id="cb15-16" data-line-number="16"><span class="co">#&gt;  6 2020-03-05         6 2020-03-06  2.18       1</span></a>
<a class="sourceLine" id="cb15-17" data-line-number="17"><span class="co">#&gt;  7 2020-03-05         7 2020-03-06  2.21       1</span></a>
<a class="sourceLine" id="cb15-18" data-line-number="18"><span class="co">#&gt;  8 2020-03-05         8 2020-03-06  2.27       1</span></a>
<a class="sourceLine" id="cb15-19" data-line-number="19"><span class="co">#&gt;  9 2020-03-05         9 2020-03-06  2.10       1</span></a>
<a class="sourceLine" id="cb15-20" data-line-number="20"><span class="co">#&gt; 10 2020-03-05        10 2020-03-06  2.19       1</span></a>
<a class="sourceLine" id="cb15-21" data-line-number="21"><span class="co">#&gt; # … with 1,250 more rows</span></a></code></pre></div>
<ul>
<li>We can then iteratively forecast cases using the following:</li>
</ul>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1">it_cases_forecast &lt;-<span class="st"> </span><span class="kw"><a href="../reference/iterative_case_forecast.html">iterative_case_forecast</a></span>(<span class="dt">it_fit_samples =</span> it_rt_forecast,</a>
<a class="sourceLine" id="cb16-2" data-line-number="2">                                             <span class="dt">cases =</span> EpiSoon<span class="op">::</span>example_obs_cases,</a>
<a class="sourceLine" id="cb16-3" data-line-number="3">                                             <span class="dt">serial_interval =</span> EpiSoon<span class="op">::</span>example_serial_interval)</a>
<a class="sourceLine" id="cb16-4" data-line-number="4"></a>
<a class="sourceLine" id="cb16-5" data-line-number="5">it_cases_forecast</a>
<a class="sourceLine" id="cb16-6" data-line-number="6"><span class="co">#&gt; # A tibble: 1,260 x 5</span></a>
<a class="sourceLine" id="cb16-7" data-line-number="7"><span class="co">#&gt;    forecast_date sample date       cases horizon</span></a>
<a class="sourceLine" id="cb16-8" data-line-number="8"><span class="co">#&gt;    &lt;chr&gt;          &lt;dbl&gt; &lt;date&gt;     &lt;int&gt;   &lt;int&gt;</span></a>
<a class="sourceLine" id="cb16-9" data-line-number="9"><span class="co">#&gt;  1 2020-03-05         1 2020-03-06    82       1</span></a>
<a class="sourceLine" id="cb16-10" data-line-number="10"><span class="co">#&gt;  2 2020-03-05         1 2020-03-07    88       2</span></a>
<a class="sourceLine" id="cb16-11" data-line-number="11"><span class="co">#&gt;  3 2020-03-05         1 2020-03-08   110       3</span></a>
<a class="sourceLine" id="cb16-12" data-line-number="12"><span class="co">#&gt;  4 2020-03-05         1 2020-03-09   116       4</span></a>
<a class="sourceLine" id="cb16-13" data-line-number="13"><span class="co">#&gt;  5 2020-03-05         1 2020-03-10   132       5</span></a>
<a class="sourceLine" id="cb16-14" data-line-number="14"><span class="co">#&gt;  6 2020-03-05         1 2020-03-11   149       6</span></a>
<a class="sourceLine" id="cb16-15" data-line-number="15"><span class="co">#&gt;  7 2020-03-05         1 2020-03-12   143       7</span></a>
<a class="sourceLine" id="cb16-16" data-line-number="16"><span class="co">#&gt;  8 2020-03-05         2 2020-03-06    85       1</span></a>
<a class="sourceLine" id="cb16-17" data-line-number="17"><span class="co">#&gt;  9 2020-03-05         2 2020-03-07   107       2</span></a>
<a class="sourceLine" id="cb16-18" data-line-number="18"><span class="co">#&gt; 10 2020-03-05         2 2020-03-08   125       3</span></a>
<a class="sourceLine" id="cb16-19" data-line-number="19"><span class="co">#&gt; # … with 1,250 more rows</span></a></code></pre></div>
<ul>
<li>All functionality shown above is also supported for iterative forecasting.</li>
</ul>
</div>
<div id="evaluate-a-model" class="section level2">
<h2 class="hasAnchor">
<a href="#evaluate-a-model" class="anchor"></a>Evaluate a model</h2>
<p>In real world use we are likely to want to evaluate a model by iteratively forecasting Rts and cases, summarising these forecasts, scoring them and then returning them in a sensible format. These steps are all contained in the <code>evaluate_model</code> function.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" data-line-number="1">model_eval &lt;-<span class="st"> </span><span class="kw"><a href="../reference/evaluate_model.html">evaluate_model</a></span>(EpiSoon<span class="op">::</span>example_obs_rts,</a>
<a class="sourceLine" id="cb17-2" data-line-number="2">                             EpiSoon<span class="op">::</span>example_obs_cases,</a>
<a class="sourceLine" id="cb17-3" data-line-number="3">                             <span class="dt">model =</span> <span class="cf">function</span>(...){</a>
<a class="sourceLine" id="cb17-4" data-line-number="4">                                          EpiSoon<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/EpiSoon/man/bsts_model.html">bsts_model</a></span>(<span class="dt">model =</span> <span class="cf">function</span>(ss, y){bsts<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/bsts/man/auto.ar.html">AddAutoAr</a></span>(ss, <span class="dt">y =</span> y, <span class="dt">lags =</span> <span class="dv">10</span>)}, ...)</a>
<a class="sourceLine" id="cb17-5" data-line-number="5">                                          },</a>
<a class="sourceLine" id="cb17-6" data-line-number="6">                             <span class="dt">horizon =</span> <span class="dv">21</span>, <span class="dt">samples =</span> <span class="dv">10</span>,</a>
<a class="sourceLine" id="cb17-7" data-line-number="7">                             <span class="dt">serial_interval =</span> EpiSoon<span class="op">::</span>example_serial_interval)</a>
<a class="sourceLine" id="cb17-8" data-line-number="8"></a>
<a class="sourceLine" id="cb17-9" data-line-number="9">model_eval</a>
<a class="sourceLine" id="cb17-10" data-line-number="10"><span class="co">#&gt; $forecast_rts</span></a>
<a class="sourceLine" id="cb17-11" data-line-number="11"><span class="co">#&gt; # A tibble: 399 x 10</span></a>
<a class="sourceLine" id="cb17-12" data-line-number="12"><span class="co">#&gt;    forecast_date date       horizon median  mean    sd bottom lower upper   top</span></a>
<a class="sourceLine" id="cb17-13" data-line-number="13"><span class="co">#&gt;    &lt;chr&gt;         &lt;date&gt;       &lt;int&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb17-14" data-line-number="14"><span class="co">#&gt;  1 2020-03-04    2020-03-05       1   2.19 2.15  0.396  1.22   2.19  2.50  2.59</span></a>
<a class="sourceLine" id="cb17-15" data-line-number="15"><span class="co">#&gt;  2 2020-03-04    2020-03-06       2   1.96 1.89  0.663  0.109  1.86  2.02  2.44</span></a>
<a class="sourceLine" id="cb17-16" data-line-number="16"><span class="co">#&gt;  3 2020-03-04    2020-03-07       3   1.81 1.72  0.687  0      1.49  1.85  2.58</span></a>
<a class="sourceLine" id="cb17-17" data-line-number="17"><span class="co">#&gt;  4 2020-03-04    2020-03-08       4   1.65 1.57  0.630  0      1.34  1.85  2.18</span></a>
<a class="sourceLine" id="cb17-18" data-line-number="18"><span class="co">#&gt;  5 2020-03-04    2020-03-09       5   1.53 1.45  0.675  0      1.53  2.27  2.27</span></a>
<a class="sourceLine" id="cb17-19" data-line-number="19"><span class="co">#&gt;  6 2020-03-04    2020-03-10       6   1.52 1.30  0.713  0      1.43  2.21  2.21</span></a>
<a class="sourceLine" id="cb17-20" data-line-number="20"><span class="co">#&gt;  7 2020-03-04    2020-03-11       7   1.53 1.18  0.729  0      1.49  1.91  1.91</span></a>
<a class="sourceLine" id="cb17-21" data-line-number="21"><span class="co">#&gt;  8 2020-03-04    2020-03-12       8   1.22 1.04  0.760  0      1.12  2.07  2.07</span></a>
<a class="sourceLine" id="cb17-22" data-line-number="22"><span class="co">#&gt;  9 2020-03-04    2020-03-13       9   1.18 0.986 0.688  0      1.17  1.86  1.86</span></a>
<a class="sourceLine" id="cb17-23" data-line-number="23"><span class="co">#&gt; 10 2020-03-04    2020-03-14      10   1.16 1.03  0.668  0      1.00  1.65  1.84</span></a>
<a class="sourceLine" id="cb17-24" data-line-number="24"><span class="co">#&gt; # … with 389 more rows</span></a>
<a class="sourceLine" id="cb17-25" data-line-number="25"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb17-26" data-line-number="26"><span class="co">#&gt; $rt_scores</span></a>
<a class="sourceLine" id="cb17-27" data-line-number="27"><span class="co">#&gt; # A tibble: 171 x 12</span></a>
<a class="sourceLine" id="cb17-28" data-line-number="28"><span class="co">#&gt;    forecast_date date       horizon      dss   crps   logs   bias sharpness</span></a>
<a class="sourceLine" id="cb17-29" data-line-number="29"><span class="co">#&gt;    &lt;chr&gt;         &lt;date&gt;       &lt;int&gt;    &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;     &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb17-30" data-line-number="30"><span class="co">#&gt;  1 2020-03-04    2020-03-05       1 -1.86    0.0733 -0.356 -0.400     0.242</span></a>
<a class="sourceLine" id="cb17-31" data-line-number="31"><span class="co">#&gt;  2 2020-03-04    2020-03-06       2 -0.701   0.145   0.198 -0.400     0.121</span></a>
<a class="sourceLine" id="cb17-32" data-line-number="32"><span class="co">#&gt;  3 2020-03-04    2020-03-07       3 -0.431   0.230   0.740 -0.6       0.323</span></a>
<a class="sourceLine" id="cb17-33" data-line-number="33"><span class="co">#&gt;  4 2020-03-04    2020-03-08       4 -0.225   0.255   0.529 -0.8       0.430</span></a>
<a class="sourceLine" id="cb17-34" data-line-number="34"><span class="co">#&gt;  5 2020-03-04    2020-03-09       5  0.00594 0.302   0.782 -0.6       0.743</span></a>
<a class="sourceLine" id="cb17-35" data-line-number="35"><span class="co">#&gt;  6 2020-03-04    2020-03-10       6  0.380   0.397   0.880 -0.6       0.770</span></a>
<a class="sourceLine" id="cb17-36" data-line-number="36"><span class="co">#&gt;  7 2020-03-04    2020-03-11       7  0.735   0.465   0.925 -1         0.486</span></a>
<a class="sourceLine" id="cb17-37" data-line-number="37"><span class="co">#&gt;  8 2020-03-04    2020-03-12       8  1.11    0.563   1.18  -0.8       0.850</span></a>
<a class="sourceLine" id="cb17-38" data-line-number="38"><span class="co">#&gt;  9 2020-03-04    2020-03-13       9  1.41    0.616   1.20  -1         0.894</span></a>
<a class="sourceLine" id="cb17-39" data-line-number="39"><span class="co">#&gt; 10 2020-03-04    2020-03-14      10  1.20    0.569   1.15  -1         0.668</span></a>
<a class="sourceLine" id="cb17-40" data-line-number="40"><span class="co">#&gt; # … with 161 more rows, and 4 more variables: calibration &lt;dbl&gt;, median &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb17-41" data-line-number="41"><span class="co">#&gt; #   iqr &lt;dbl&gt;, ci &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb17-42" data-line-number="42"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb17-43" data-line-number="43"><span class="co">#&gt; $forecast_cases</span></a>
<a class="sourceLine" id="cb17-44" data-line-number="44"><span class="co">#&gt; # A tibble: 171 x 10</span></a>
<a class="sourceLine" id="cb17-45" data-line-number="45"><span class="co">#&gt;    forecast_date date       horizon median  mean    sd bottom lower upper   top</span></a>
<a class="sourceLine" id="cb17-46" data-line-number="46"><span class="co">#&gt;    &lt;chr&gt;         &lt;date&gt;       &lt;int&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb17-47" data-line-number="47"><span class="co">#&gt;  1 2020-03-04    2020-03-05       1   72    68.7  18.2     25    65    77    95</span></a>
<a class="sourceLine" id="cb17-48" data-line-number="48"><span class="co">#&gt;  2 2020-03-04    2020-03-06       2   74.5  69.6  25.5      3    64    77    96</span></a>
<a class="sourceLine" id="cb17-49" data-line-number="49"><span class="co">#&gt;  3 2020-03-04    2020-03-07       3   78.5  82.4  35.4      0    74    99   129</span></a>
<a class="sourceLine" id="cb17-50" data-line-number="50"><span class="co">#&gt;  4 2020-03-04    2020-03-08       4   84    81.2  36.5      0    78   118   126</span></a>
<a class="sourceLine" id="cb17-51" data-line-number="51"><span class="co">#&gt;  5 2020-03-04    2020-03-09       5  106    97.7  46.3      0   101   153   153</span></a>
<a class="sourceLine" id="cb17-52" data-line-number="52"><span class="co">#&gt;  6 2020-03-04    2020-03-10       6  104.  100.   63.9      0   104   194   194</span></a>
<a class="sourceLine" id="cb17-53" data-line-number="53"><span class="co">#&gt;  7 2020-03-04    2020-03-11       7  124.  103    70.3      0   122   183   183</span></a>
<a class="sourceLine" id="cb17-54" data-line-number="54"><span class="co">#&gt;  8 2020-03-04    2020-03-12       8  119   106.   87.6      0   103   226   226</span></a>
<a class="sourceLine" id="cb17-55" data-line-number="55"><span class="co">#&gt;  9 2020-03-04    2020-03-13       9  118.  106.   92.4      0     0   143   244</span></a>
<a class="sourceLine" id="cb17-56" data-line-number="56"><span class="co">#&gt; 10 2020-03-04    2020-03-14      10  141   120.  106.       0   130   270   270</span></a>
<a class="sourceLine" id="cb17-57" data-line-number="57"><span class="co">#&gt; # … with 161 more rows</span></a>
<a class="sourceLine" id="cb17-58" data-line-number="58"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb17-59" data-line-number="59"><span class="co">#&gt; $case_scores</span></a>
<a class="sourceLine" id="cb17-60" data-line-number="60"><span class="co">#&gt; # A tibble: 171 x 13</span></a>
<a class="sourceLine" id="cb17-61" data-line-number="61"><span class="co">#&gt;    sample forecast_date date       horizon   dss  crps  logs   bias sharpness</span></a>
<a class="sourceLine" id="cb17-62" data-line-number="62"><span class="co">#&gt;    &lt;chr&gt;  &lt;chr&gt;         &lt;date&gt;       &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;     &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb17-63" data-line-number="63"><span class="co">#&gt;  1 1      2020-03-04    2020-03-05       1  5.80  5.13  3.66  0.6        10.4</span></a>
<a class="sourceLine" id="cb17-64" data-line-number="64"><span class="co">#&gt;  2 1      2020-03-04    2020-03-06       2  6.39  3.52  3.54  0          11.9</span></a>
<a class="sourceLine" id="cb17-65" data-line-number="65"><span class="co">#&gt;  3 1      2020-03-04    2020-03-07       3  7.05  7.52  4.25 -0.200      20.0</span></a>
<a class="sourceLine" id="cb17-66" data-line-number="66"><span class="co">#&gt;  4 1      2020-03-04    2020-03-08       4  7.45 10.6   4.57 -0.200      33.4</span></a>
<a class="sourceLine" id="cb17-67" data-line-number="67"><span class="co">#&gt;  5 1      2020-03-04    2020-03-09       5  7.74 11.4   4.83 -0.200      46.7</span></a>
<a class="sourceLine" id="cb17-68" data-line-number="68"><span class="co">#&gt;  6 1      2020-03-04    2020-03-10       6  8.67 25.6   5.41 -0.400      77.1</span></a>
<a class="sourceLine" id="cb17-69" data-line-number="69"><span class="co">#&gt;  7 1      2020-03-04    2020-03-11       7  9.32 31.4   5.39 -0.6        68.2</span></a>
<a class="sourceLine" id="cb17-70" data-line-number="70"><span class="co">#&gt;  8 1      2020-03-04    2020-03-12       8  9.96 51.1   5.78 -0.6       124. </span></a>
<a class="sourceLine" id="cb17-71" data-line-number="71"><span class="co">#&gt;  9 1      2020-03-04    2020-03-13       9 10.3  61.4   5.93 -0.6       133. </span></a>
<a class="sourceLine" id="cb17-72" data-line-number="72"><span class="co">#&gt; 10 1      2020-03-04    2020-03-14      10 10.9  81.1   6.17 -0.6       173. </span></a>
<a class="sourceLine" id="cb17-73" data-line-number="73"><span class="co">#&gt; # … with 161 more rows, and 4 more variables: calibration &lt;dbl&gt;, median &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb17-74" data-line-number="74"><span class="co">#&gt; #   iqr &lt;dbl&gt;, ci &lt;dbl&gt;</span></a></code></pre></div>
<ul>
<li>All functionality outlined above can be applied to this output but a special plotting function (<code>plot_forecast_evaluation</code>) is also provided. First evaluate the Rt forecast against observed values.</li>
</ul>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" data-line-number="1"><span class="kw"><a href="../reference/plot_forecast_evaluation.html">plot_forecast_evaluation</a></span>(model_eval<span class="op">$</span>forecast_rts,</a>
<a class="sourceLine" id="cb18-2" data-line-number="2">                         EpiSoon<span class="op">::</span>example_obs_rts,</a>
<a class="sourceLine" id="cb18-3" data-line-number="3">                         <span class="dt">horizon_to_plot =</span> <span class="dv">7</span>)</a></code></pre></div>
<p><img src="introduction_files/figure-html/unnamed-chunk-19-1.png" width="2560"></p>
<ul>
<li>Then evaluate forecast cases against observed values.</li>
</ul>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" data-line-number="1"><span class="kw"><a href="../reference/plot_forecast_evaluation.html">plot_forecast_evaluation</a></span>(model_eval<span class="op">$</span>forecast_cases,</a>
<a class="sourceLine" id="cb19-2" data-line-number="2">                         EpiSoon<span class="op">::</span>example_obs_cases,</a>
<a class="sourceLine" id="cb19-3" data-line-number="3">                         <span class="dt">horizon_to_plot =</span> <span class="dv">7</span>)</a></code></pre></div>
<p><img src="introduction_files/figure-html/unnamed-chunk-20-1.png" width="2560"></p>
</div>
<div id="wrapper-functions" class="section level2">
<h2 class="hasAnchor">
<a href="#wrapper-functions" class="anchor"></a>Wrapper functions</h2>
<p><code>EpiSoon</code> provides several wrapper functions (<code>compare_models</code> and <code>compare_timeseries</code>). These both wrap <code>evaluate_model</code> and can be used to rapidly explore several forecasting models (<code>compare_models</code>) against multiple time series (<code>compare_timeseries</code>). All lower level summary and plotting functions can be then used with the output of these wrappers to explore the results. See the function documentation for further details.</p>
</div>
<div id="supporting-generic-modelling-packages" class="section level2">
<h2 class="hasAnchor">
<a href="#supporting-generic-modelling-packages" class="anchor"></a>Supporting generic modelling packages</h2>
<p><code>EpiSoon</code> supports the use of generic forecasting models if they are used in a wrapper that accepts a standardised set of inputs and outputs its forecast in the form the package expects. Examples of model wrappers are those for the <code>bsts</code> and <code>fable</code> packages (<code>bsts_model</code> and <code>fable_model</code>). See the examples and documentation for <code>fable_model</code> for further details.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#introduction">Introduction</a></li>
      <li><a href="#forecast-rts-score-and-plot">Forecast Rts, score and plot</a></li>
      <li><a href="#forecast-cases-score-and-plot">Forecast cases, score and plot</a></li>
      <li><a href="#use-iterative-fitting-to-explore-a-forecast">Use iterative fitting to explore a forecast</a></li>
      <li><a href="#evaluate-a-model">Evaluate a model</a></li>
      <li><a href="#wrapper-functions">Wrapper functions</a></li>
      <li><a href="#supporting-generic-modelling-packages">Supporting generic modelling packages</a></li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Sam Abbott, Joel Hellewell, Nikos Bosse, Katharine Sherratt, James Munday, Robin Thompson, Sebastian Funk.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
