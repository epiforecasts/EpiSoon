[{"path":"epiforecasts.io/EpiSoon/dev/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2020 Epiforecasts Permission hereby granted, free charge, person obtaining copy software associated documentation files (“Software”), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED “”, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":"epiforecasts.io/EpiSoon/dev/articles/introduction.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"Getting started","text":"vignette briefly outlines functionality EpiSoon. get started load required packages. Load package (bsts models, ggplot2 plotting, cowplot theming)","code":"library(EpiSoon) library(bsts) library(fable) library(cowplot) library(dplyr)"},{"path":"epiforecasts.io/EpiSoon/dev/articles/introduction.html","id":"forecast-rts-score-and-plot","dir":"Articles","previous_headings":"","what":"Forecast Rts, score and plot","title":"Getting started","text":"use example dataframe built package replaced data. Fit bsts model produce Rt forecast. appropriately wrapped model can used (see bsts_model fable_model examples). Score forecast Summarise forecast scores Summarise forecast Plot forecast observed data","code":"EpiSoon::example_obs_rts #>          rt       date #> 1  2.490547 2020-03-01 #> 2  2.442588 2020-03-02 #> 3  2.402473 2020-03-03 #> 4  2.335572 2020-03-04 #> 5  2.266551 2020-03-05 #> 6  2.192293 2020-03-06 #> 7  2.146429 2020-03-07 #> 8  2.104371 2020-03-08 #> 9  2.059281 2020-03-09 #> 10 2.027134 2020-03-10 #> 11 2.014678 2020-03-11 #> 12 1.998946 2020-03-12 #> 13 1.968350 2020-03-13 #> 14 1.947376 2020-03-14 #> 15 1.906984 2020-03-15 #> 16 1.812842 2020-03-16 #> 17 1.718532 2020-03-17 #> 18 1.665646 2020-03-18 #> 19 1.639927 2020-03-19 #> 20 1.633795 2020-03-20 #> 21 1.682025 2020-03-21 #> 22 1.561653 2020-03-22 rt_forecast <- forecast_rt(EpiSoon::example_obs_rts[1:10, ],   model = function(...) {     EpiSoon::bsts_model(model = function(ss, y) {       bsts::AddAutoAr(ss, y = y, lags = 10)     }, ...)   },   horizon = 21, samples = 10 )  rt_forecast #> # A tibble: 210 × 4 #>    sample date          rt horizon #>     <int> <date>     <dbl>   <int> #>  1      1 2020-03-11  2.09       1 #>  2      2 2020-03-11  1.92       1 #>  3      3 2020-03-11  1.96       1 #>  4      4 2020-03-11  1.98       1 #>  5      5 2020-03-11  1.90       1 #>  6      6 2020-03-11  1.91       1 #>  7      7 2020-03-11  1.97       1 #>  8      8 2020-03-11  1.96       1 #>  9      9 2020-03-11  1.92       1 #> 10     10 2020-03-11  1.97       1 #> # … with 200 more rows rt_scores <- score_forecast(rt_forecast, EpiSoon::example_obs_rts)  rt_scores #>           date horizon        mad bias       dss       crps   log_score #>  1: 2020-03-11       1 0.03988999 -0.8 -4.655572 0.04759668 -0.18317010 #>  2: 2020-03-12       2 0.07814668 -0.4 -4.567023 0.03856022 -1.02588582 #>  3: 2020-03-13       3 0.08956835 -0.4 -3.960462 0.04377018 -0.75968311 #>  4: 2020-03-14       4 0.18021956 -0.2 -3.531841 0.04853164 -0.71074609 #>  5: 2020-03-15       5 0.21472813  0.0 -3.597501 0.04073300 -0.65515232 #>  6: 2020-03-16       6 0.32178772  0.4 -2.959258 0.07373181 -0.26054962 #>  7: 2020-03-17       7 0.31738730  0.4 -2.507514 0.08525533 -0.23766417 #>  8: 2020-03-18       8 0.36892365  0.4 -2.250134 0.10012437 -0.13506699 #>  9: 2020-03-19       9 0.42419630  0.4 -2.095294 0.11177464 -0.05166132 #> 10: 2020-03-20      10 0.40913177  0.2 -1.954488 0.11221475  0.08242638 #> 11: 2020-03-21      11 0.40900291  0.2 -2.106099 0.09126496  0.05815134 #> 12: 2020-03-22      12 0.35053236  0.4 -1.787700 0.11028388  0.03498881 #>       ae_median      se_mean #>  1: 0.055514309 3.382837e-03 #>  2: 0.062246493 1.247714e-03 #>  3: 0.051271407 1.783522e-04 #>  4: 0.067598394 1.700242e-04 #>  5: 0.004027227 8.269739e-05 #>  6: 0.080105771 7.169082e-03 #>  7: 0.101368363 1.990282e-02 #>  8: 0.149253994 3.025611e-02 #>  9: 0.146867772 3.285391e-02 #> 10: 0.101849720 2.881916e-02 #> 11: 0.046004442 9.575373e-03 #> 12: 0.107240743 3.908598e-02 summarise_scores(rt_scores) #> # A tibble: 7 × 8 #>   score        bottom     lower   median    mean   upper     top     sd #>   <chr>         <dbl>     <dbl>    <dbl>   <dbl>   <dbl>   <dbl>  <dbl> #> 1 ae_median  0.0156    0.0545    0.0739   0.0811  0.103   0.149  0.0424 #> 2 bias      -0.69     -0.25      0.2      0.05    0.4     0.4    0.410  #> 3 crps       0.0392    0.0466    0.0795   0.0753  0.103   0.112  0.0300 #> 4 dss       -4.63     -3.69     -2.73    -3.00   -2.10   -1.83   1.03   #> 5 log_score -0.953    -0.669    -0.210   -0.320  -0.0300  0.0758 0.372  #> 6 mad        0.0504    0.158     0.320    0.267   0.379   0.420  0.140  #> 7 se_mean    0.000107  0.000980  0.00837  0.0144  0.0292  0.0374 0.0148 summarised_rt_forecast <- summarise_forecast(rt_forecast)  summarised_rt_forecast #> # A tibble: 21 × 9 #>    date       horizon median  mean     sd bottom lower upper   top #>    <date>       <int>  <dbl> <dbl>  <dbl>  <dbl> <dbl> <dbl> <dbl> #>  1 2020-03-11       1   1.96  1.96 0.0542   1.90  1.92  1.97  2.09 #>  2 2020-03-12       2   1.94  1.96 0.100    1.86  1.88  1.97  2.18 #>  3 2020-03-13       3   1.92  1.95 0.145    1.75  1.85  1.95  2.19 #>  4 2020-03-14       4   1.88  1.93 0.180    1.67  1.85  2.02  2.28 #>  5 2020-03-15       5   1.90  1.92 0.174    1.67  1.75  1.94  2.25 #>  6 2020-03-16       6   1.89  1.90 0.221    1.60  1.60  1.91  2.20 #>  7 2020-03-17       7   1.82  1.86 0.253    1.55  1.55  1.88  2.23 #>  8 2020-03-18       8   1.81  1.84 0.273    1.50  1.50  1.89  2.20 #>  9 2020-03-19       9   1.79  1.82 0.303    1.46  1.46  1.79  2.26 #> 10 2020-03-20      10   1.74  1.80 0.347    1.35  1.35  1.74  2.26 #> # … with 11 more rows plot_forecast(summarised_rt_forecast, EpiSoon::example_obs_rts)"},{"path":"epiforecasts.io/EpiSoon/dev/articles/introduction.html","id":"forecast-cases-score-and-plot","dir":"Articles","previous_headings":"","what":"Forecast cases, score and plot","title":"Getting started","text":"Forecasting cases requires observed cases observed Rt estimates based also requires assumption made serial interval (defined using probability distribution). Forecast cases (using case data observed Rt estimates based) Score cases forecast Summarise cases scores Summarise cases forecast Plot forecast observed case data","code":"EpiSoon::example_obs_cases #> # A tibble: 63 × 2 #>    cases date       #>    <dbl> <date>     #>  1     1 2020-01-20 #>  2     0 2020-01-21 #>  3     1 2020-01-22 #>  4     0 2020-01-23 #>  5     0 2020-01-24 #>  6     0 2020-01-25 #>  7     1 2020-01-26 #>  8     0 2020-01-27 #>  9     0 2020-01-28 #> 10     0 2020-01-29 #> # … with 53 more rows EpiSoon::example_serial_interval #>         1    2    3    4    5    6    7    8    9   10   11   12   14  #> 0.00 0.03 0.25 0.17 0.09 0.15 0.13 0.05 0.05 0.03 0.02 0.01 0.01 0.01 case_forecast <- forecast_cases(EpiSoon::example_obs_cases, rt_forecast,   serial_interval = EpiSoon::example_serial_interval )  case_forecast #>      sample       date cases horizon #>   1:      1 2020-03-11   157       1 #>   2:      1 2020-03-12   226       2 #>   3:      1 2020-03-13   275       3 #>   4:      1 2020-03-14   345       4 #>   5:      1 2020-03-15   442       5 #>  ---                                 #> 206:     10 2020-03-27  1236      17 #> 207:     10 2020-03-28  1276      18 #> 208:     10 2020-03-29  1403      19 #> 209:     10 2020-03-30  1530      20 #> 210:     10 2020-03-31  1580      21 case_scores <- score_case_forecast(case_forecast, EpiSoon::example_obs_cases)  case_scores #>           date horizon      mad bias       dss   crps ae_median   se_mean #>  1: 2020-03-11       1  10.3782 -0.4  5.470668   3.94       6.5     64.00 #>  2: 2020-03-12       2   5.9304  0.4  5.953634   7.68      12.0     23.04 #>  3: 2020-03-13       3  23.7216  0.6  7.657511  15.00      25.5    772.84 #>  4: 2020-03-14       4  31.8759  0.4  7.796324  10.63       7.0    292.41 #>  5: 2020-03-15       5  35.5824  0.8  8.949045  31.64      41.0   2830.24 #>  6: 2020-03-16       6  51.8910  0.8 10.702209  70.32     106.5  10857.64 #>  7: 2020-03-17       7  76.3539  0.8 10.615144  73.96     105.0  14352.04 #>  8: 2020-03-18       8 172.7229  0.8 11.060711  87.01     140.5  23378.41 #>  9: 2020-03-19       9 191.9967  0.8 11.405023  95.80     139.0  32508.09 #> 10: 2020-03-20      10 255.7485  0.6 11.848141 118.16     163.5  49996.96 #> 11: 2020-03-21      11 352.1175  0.4 11.996940 106.10      97.5  36138.01 #> 12: 2020-03-22      12 447.0039  0.8 13.818534 328.49     464.5 318547.36 summarise_scores(case_scores) #> # A tibble: 6 × 8 #>   score     bottom  lower  median      mean   upper      top        sd #>   <chr>      <dbl>  <dbl>   <dbl>     <dbl>   <dbl>    <dbl>     <dbl> #> 1 ae_median   6.64  22.1    101.    109.      139.     382.    126.    #> 2 bias       -0.18   0.4      0.7     0.567     0.8      0.8     0.350 #> 3 crps        4.97  13.9     72.1    79.1      98.4    271.     88.8   #> 4 dss         5.60   7.76    10.7     9.77     11.5     13.3     2.59  #> 5 mad         7.15  29.8     64.1   138.      208.     421.    147.    #> 6 se_mean    34.3  653.   12605.  40813.    33416.  244696   89048. summarised_case_forecast <- summarise_case_forecast(case_forecast)  summarised_case_forecast #> # A tibble: 21 × 9 #>    date       horizon median  mean    sd bottom lower upper   top #>    <date>       <int>  <dbl> <dbl> <dbl>  <dbl> <dbl> <dbl> <dbl> #>  1 2020-03-11       1   160.  159   13.3    127   153   165   173 #>  2 2020-03-12       2   206   199.  20.0    158   205   212   226 #>  3 2020-03-13       3   234.  236.  27.6    201   211   243   286 #>  4 2020-03-14       4   258   268.  48.5    183   226   269   345 #>  5 2020-03-15       5   314   326.  57.3    234   280   328   442 #>  6 2020-03-16       6   372.  370.  74.1    244   316   386   494 #>  7 2020-03-17       7   401   416. 110.     243   326   411   598 #>  8 2020-03-18       8   484.  496. 157.     254   354   507   755 #>  9 2020-03-19       9   538.  580. 208.     269   401   603   917 #> 10 2020-03-20      10   618.  678. 267.     312   419   693  1099 #> # … with 11 more rows plot_forecast(summarised_case_forecast, EpiSoon::example_obs_cases)"},{"path":"epiforecasts.io/EpiSoon/dev/articles/introduction.html","id":"use-iterative-fitting-to-explore-a-forecast","dir":"Articles","previous_headings":"","what":"Use iterative fitting to explore a forecast","title":"Getting started","text":"explore quality models forecast can help iteratively forecast available data point. supported EpiSoon using following: can iteratively forecast cases using following: functionality shown also supported iterative forecasting.","code":"it_rt_forecast <- iterative_rt_forecast(EpiSoon::example_obs_rts,   model = function(...) {     EpiSoon::bsts_model(model = function(ss, y) {       bsts::AddAutoAr(ss, y = y, lags = 10)     }, ...)   },   horizon = 7, samples = 10, min_points = 4 )  it_rt_forecast #> # A tibble: 1,260 × 5 #>    forecast_date sample date          rt horizon #>    <chr>          <int> <date>     <dbl>   <int> #>  1 2020-03-05         1 2020-03-06  2.46       1 #>  2 2020-03-05         2 2020-03-06  2.14       1 #>  3 2020-03-05         3 2020-03-06  2.26       1 #>  4 2020-03-05         4 2020-03-06  2.18       1 #>  5 2020-03-05         5 2020-03-06  2.32       1 #>  6 2020-03-05         6 2020-03-06  2.21       1 #>  7 2020-03-05         7 2020-03-06  2.20       1 #>  8 2020-03-05         8 2020-03-06  2.25       1 #>  9 2020-03-05         9 2020-03-06  2.25       1 #> 10 2020-03-05        10 2020-03-06  2.10       1 #> # … with 1,250 more rows it_cases_forecast <- iterative_case_forecast(   it_fit_samples = it_rt_forecast,   cases = EpiSoon::example_obs_cases,   serial_interval = EpiSoon::example_serial_interval )  it_cases_forecast #>       forecast_date sample       date cases horizon #>    1:    2020-03-05      1 2020-03-06   102       1 #>    2:    2020-03-05      1 2020-03-07   117       2 #>    3:    2020-03-05      1 2020-03-08   163       3 #>    4:    2020-03-05      1 2020-03-09   216       4 #>    5:    2020-03-05      1 2020-03-10   231       5 #>   ---                                               #> 1256:    2020-03-22     10 2020-03-25   657       3 #> 1257:    2020-03-22     10 2020-03-26   781       4 #> 1258:    2020-03-22     10 2020-03-27   848       5 #> 1259:    2020-03-22     10 2020-03-28   781       6 #> 1260:    2020-03-22     10 2020-03-29   950       7"},{"path":"epiforecasts.io/EpiSoon/dev/articles/introduction.html","id":"evaluate-a-model","dir":"Articles","previous_headings":"","what":"Evaluate a model","title":"Getting started","text":"real world use likely want evaluate model iteratively forecasting Rts cases, summarising forecasts, scoring returning sensible format. steps contained evaluate_model function. functionality outlined can applied output special plotting function (plot_forecast_evaluation) also provided. First evaluate Rt forecast observed values.  evaluate forecast cases observed values.","code":"model_eval <- evaluate_model(EpiSoon::example_obs_rts,   EpiSoon::example_obs_cases,   model = function(...) {     EpiSoon::bsts_model(model = function(ss, y) {       bsts::AddAutoAr(ss, y = y, lags = 10)     }, ...)   },   horizon = 21, samples = 10,   serial_interval = EpiSoon::example_serial_interval )  model_eval #> $forecast_rts #> # A tibble: 399 × 10 #>    forecast_date date       horizon median  mean    sd bottom lower upper   top #>    <chr>         <date>       <int>  <dbl> <dbl> <dbl>  <dbl> <dbl> <dbl> <dbl> #>  1 2020-03-04    2020-03-05       1   2.25  2.25 0.134  2.01  2.21   2.31  2.51 #>  2 2020-03-04    2020-03-06       2   2.22  2.21 0.215  1.75  2.04   2.29  2.47 #>  3 2020-03-04    2020-03-07       3   2.10  2.17 0.370  1.47  2.02   2.56  2.65 #>  4 2020-03-04    2020-03-08       4   2.13  2.12 0.444  1.32  1.76   2.43  2.71 #>  5 2020-03-04    2020-03-09       5   2.08  2.06 0.527  1.05  1.79   2.53  2.81 #>  6 2020-03-04    2020-03-10       6   2.05  2.06 0.643  0.945 2.04   2.86  2.86 #>  7 2020-03-04    2020-03-11       7   1.94  2.02 0.713  0.908 0.908  1.97  3.04 #>  8 2020-03-04    2020-03-12       8   1.88  1.99 0.823  0.818 0.818  1.95  3.18 #>  9 2020-03-04    2020-03-13       9   1.76  1.96 0.879  0.831 0.831  1.85  3.21 #> 10 2020-03-04    2020-03-14      10   1.71  1.93 0.990  0.595 0.595  1.76  3.31 #> # … with 389 more rows #>  #> $rt_scores #>      forecast_date       date horizon        mad bias       dss       crps #>   1:    2020-03-04 2020-03-05       1 0.07666473  0.0 -4.112466 0.02552581 #>   2:    2020-03-04 2020-03-06       2 0.19918976  0.2 -3.174460 0.04850427 #>   3:    2020-03-04 2020-03-07       3 0.42838388  0.0 -2.088257 0.10299260 #>   4:    2020-03-04 2020-03-08       4 0.52025052  0.0 -1.727771 0.13422506 #>   5:    2020-03-04 2020-03-09       5 0.57402030  0.0 -1.386215 0.14515310 #>  ---                                                                       #> 167:    2020-03-19 2020-03-21       2 0.06980470 -0.8 -3.490109 0.07786563 #> 168:    2020-03-19 2020-03-22       3 0.09180235  0.0 -4.108772 0.02582712 #> 169:    2020-03-20 2020-03-21       1 0.03723435 -0.8 -3.323929 0.06539609 #> 170:    2020-03-20 2020-03-22       2 0.07892527  0.2 -4.575355 0.02191522 #> 171:    2020-03-21 2020-03-22       1 0.03025354  0.8 -4.493160 0.03987413 #>       log_score   ae_median      se_mean #>   1: -1.3583736 0.020248566 3.030470e-04 #>   2: -0.5441832 0.022857899 2.003031e-04 #>   3:  0.1625002 0.043091367 3.761909e-04 #>   4:  0.3896107 0.022627990 1.636347e-04 #>   5:  0.4977861 0.020034885 2.211735e-05 #>  ---                                     #> 167: -0.1822888 0.108543838 1.070920e-02 #> 168: -1.2397810 0.005227428 4.643880e-05 #> 169: -0.4674165 0.084090018 7.808340e-03 #> 170: -1.4261992 0.016773980 4.923447e-04 #> 171: -0.8956582 0.057179835 9.640085e-04 #>  #> $forecast_cases #> # A tibble: 171 × 10 #>    forecast_date date       horizon median  mean     sd bottom lower upper   top #>    <chr>         <date>       <int>  <dbl> <dbl>  <dbl>  <dbl> <dbl> <dbl> <dbl> #>  1 2020-03-04    2020-03-05       1   65.5  67.6   6.48     60    60    66    77 #>  2 2020-03-04    2020-03-06       2   79.5  81.4  12.5      61    75    89   101 #>  3 2020-03-04    2020-03-07       3   96    95.8  22.2      54    92   117   129 #>  4 2020-03-04    2020-03-08       4  126.  123.   35.3      57   108   152   175 #>  5 2020-03-04    2020-03-09       5  152.  147.   45.4      75   143   204   204 #>  6 2020-03-04    2020-03-10       6  163   178.   81.3      52    52   177   291 #>  7 2020-03-04    2020-03-11       7  208.  218.  107.       56   190   357   357 #>  8 2020-03-04    2020-03-12       8  232.  271.  178.       36    36   251   513 #>  9 2020-03-04    2020-03-13       9  258.  333.  251.       49    49   271   723 #> 10 2020-03-04    2020-03-14      10  322   447.  364.       31    31   344   972 #> # … with 161 more rows #>  #> $case_scores #>      sample forecast_date       date horizon     mad bias       dss   crps #>   1:      1    2020-03-04 2020-03-05       1  7.4130  0.4  4.192563   2.60 #>   2:      1    2020-03-04 2020-03-06       2 13.3434  0.6  5.450744   5.06 #>   3:      1    2020-03-04 2020-03-07       3 21.4977  0.4  6.229269   6.98 #>   4:      1    2020-03-04 2020-03-08       4 37.0650  0.4  7.427338  14.29 #>   5:      1    2020-03-04 2020-03-09       5 54.1149  0.6  8.053014  20.25 #>  ---                                                                       #> 167:      1    2020-03-19 2020-03-21       2 54.1149 -1.0 16.394058  98.99 #> 168:      1    2020-03-19 2020-03-22       3 45.2193  1.0 17.290209 134.73 #> 169:      1    2020-03-20 2020-03-21       1 20.0151 -1.0 33.469427  94.75 #> 170:      1    2020-03-20 2020-03-22       2 24.4629  1.0 26.350762 154.86 #> 171:      1    2020-03-21 2020-03-22       1 20.7564  1.0 36.083304 157.98 #>      ae_median  se_mean #>   1:       2.5    21.16 #>   2:       6.5    70.56 #>   3:       8.0    60.84 #>   4:      24.5   453.69 #>   5:      35.5   979.69 #>  ---                    #> 167:     122.5 14884.00 #> 168:     161.5 26961.64 #> 169:     114.5 11236.00 #> 170:     175.5 31081.69 #> 171:     183.5 30520.09 plot_forecast_evaluation(model_eval$forecast_rts,   EpiSoon::example_obs_rts,   horizon_to_plot = 7 ) plot_forecast_evaluation(model_eval$forecast_cases,   EpiSoon::example_obs_cases,   horizon_to_plot = 7 )"},{"path":"epiforecasts.io/EpiSoon/dev/articles/introduction.html","id":"wrapper-functions","dir":"Articles","previous_headings":"","what":"Wrapper functions","title":"Getting started","text":"EpiSoon provides several wrapper functions (compare_models compare_timeseries). wrap evaluate_model can used rapidly explore several forecasting models (compare_models) multiple time series (compare_timeseries). lower level summary plotting functions can used output wrappers explore results. See function documentation details.","code":""},{"path":"epiforecasts.io/EpiSoon/dev/articles/introduction.html","id":"supporting-generic-modelling-packages","dir":"Articles","previous_headings":"","what":"Supporting generic modelling packages","title":"Getting started","text":"EpiSoon supports use generic forecasting models used wrapper accepts standardised set inputs outputs forecast form package expects. Examples model wrappers bsts fable packages (bsts_model fable_model). See examples documentation fable_model details.","code":""},{"path":"epiforecasts.io/EpiSoon/dev/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Sam Abbott. Author, maintainer. Nikos Bosse. Author. Joel Hellewell. Author. Katharine Sherratt. Author. James Munday. Author. Robin Thompson. Author. Aurelien Chateigner. Author. Sylvain Mareschal. Author. Andrea Rau. Author. Nathalie Vialaneix. Author. Michael DeWitt. Author. Sebastian Funk. Author.","code":""},{"path":"epiforecasts.io/EpiSoon/dev/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Sam Abbott, Bosse N, Hellewell J, Sherratt K, Munday J, Thompson R, Chateigner , Mareschal S, Rau , Vialaneix N, DeWitt M, Funk S (2023). EpiSoon: Forecast Cases Using Reproduction Numbers. R package version 0.3.0.1000.","code":"@Manual{,   title = {EpiSoon: Forecast Cases Using Reproduction Numbers},   author = {{Sam Abbott} and Nikos Bosse and Joel Hellewell and Katharine Sherratt and James Munday and Robin Thompson and Aurelien Chateigner and Sylvain Mareschal and Andrea Rau and Nathalie Vialaneix and Michael DeWitt and Sebastian Funk},   year = {2023},   note = {R package version 0.3.0.1000}, }"},{"path":"epiforecasts.io/EpiSoon/dev/index.html","id":"episoon","dir":"","previous_headings":"","what":"Forecast Cases Using Reproduction Numbers","title":"Forecast Cases Using Reproduction Numbers","text":"package provides tooling forecast time-varying reproduction number use forecast reported case counts via branching process. supports range time series modelling packages including bsts, forecast, fable. also supports ensembles via stackr forecastHyrbid. Forecasts can assessed iteractively fitting using proper scoring rules (via scoringutils scoringRules) compare observed case counts estimated reproduction numbers.","code":""},{"path":"epiforecasts.io/EpiSoon/dev/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Forecast Cases Using Reproduction Numbers","text":"Install stable development version package : Install unstable development version package (users need ):","code":"install.packages(\"EpiSoon\", repos = \"https://epiforecasts.r-universe.dev\") remotes::install_github(\"epiforecasts/EpiSoon\")"},{"path":"epiforecasts.io/EpiSoon/dev/index.html","id":"quick-start","dir":"","previous_headings":"","what":"Quick start","title":"Forecast Cases Using Reproduction Numbers","text":"Load packages (bsts fable models, ggplot2 plotting, cowplot theming) Set example data (using EpiSoon::example_obs_rts EpiSoon::example_obs_cases starting data sets). generating timeseries EpiNow use get_timeseries extract required data. Define list models compared. Compare models across timeseries (change future::plan parallel). Plot evaluation Rt forecasts using iterative fitting.  Plot evaluation case forecasts using iterative fitting  Summarise forecasts model scored observed cases","code":"library(EpiSoon) library(bsts) library(fable) library(future) library(cowplot) library(dplyr) obs_rts <- EpiSoon::example_obs_rts %>%   dplyr::mutate(timeseries = \"Region 1\") %>%   dplyr::bind_rows(EpiSoon::example_obs_rts %>%     dplyr::mutate(timeseries = \"Region 2\"))  obs_cases <- EpiSoon::example_obs_cases %>%   dplyr::mutate(timeseries = \"Region 1\") %>%   dplyr::bind_rows(EpiSoon::example_obs_cases %>%     dplyr::mutate(timeseries = \"Region 2\")) models <- list(   \"AR 3\" =     function(...) {       EpiSoon::bsts_model(         model =           function(ss, y) {             bsts::AddAr(ss, y = y, lags = 3)           }, ...       )     },   \"Semi-local linear trend\" =     function(...) {       EpiSoon::bsts_model(         model =           function(ss, y) {             bsts::AddSemilocalLinearTrend(ss, y = y)           }, ...       )     },   \"ARIMA\" =     function(...) {       EpiSoon::fable_model(model = fable::ARIMA(y ~ time), ...)     } ) future::plan(\"sequential\")  ## Compare models forecasts <- EpiSoon::compare_timeseries(obs_rts, obs_cases, models,   horizon = 7, samples = 10,   serial_interval = EpiSoon::example_serial_interval ) #> Warning: There were 40 warnings in `dplyr::mutate()`. #> The first warning was: #> ℹ In argument: `eval = furrr::future_pmap(...)`. #> Caused by warning: #> ! Unknown or uninitialised column: `.distribution`. #> ℹ Run `dplyr::last_dplyr_warnings()` to see the 39 remaining warnings.  forecasts #> $forecast_rts #> # A tibble: 511 × 12 #>    timeseries model foreca…¹ date       horizon median  mean     sd bottom lower #>    <chr>      <chr> <chr>    <date>       <int>  <dbl> <dbl>  <dbl>  <dbl> <dbl> #>  1 Region 1   AR 3  2020-03… 2020-03-05       1   2.26  2.25 0.0504   2.17  2.25 #>  2 Region 1   AR 3  2020-03… 2020-03-06       2   2.21  2.19 0.0729   2.09  2.19 #>  3 Region 1   AR 3  2020-03… 2020-03-07       3   2.15  2.12 0.0957   1.95  2.13 #>  4 Region 1   AR 3  2020-03… 2020-03-08       4   2.07  2.05 0.128    1.86  2.06 #>  5 Region 1   AR 3  2020-03… 2020-03-09       5   2.00  1.98 0.165    1.69  2.00 #>  6 Region 1   AR 3  2020-03… 2020-03-10       6   1.95  1.93 0.173    1.61  1.93 #>  7 Region 1   AR 3  2020-03… 2020-03-11       7   1.90  1.86 0.199    1.52  1.86 #>  8 Region 1   AR 3  2020-03… 2020-03-07       1   2.11  2.11 0.0389   2.02  2.10 #>  9 Region 1   AR 3  2020-03… 2020-03-08       2   2.04  2.03 0.0449   1.94  2.02 #> 10 Region 1   AR 3  2020-03… 2020-03-09       3   1.97  1.94 0.0713   1.80  1.96 #> # … with 501 more rows, 2 more variables: upper <dbl>, top <dbl>, and #> #   abbreviated variable name ¹​forecast_date #>  #> $rt_scores #> # A tibble: 399 × 12 #>    timeseries model forec…¹ date       horizon    mad  bias   dss   crps log_s…² #>    <chr>      <chr> <chr>   <date>       <int>  <dbl> <dbl> <dbl>  <dbl>   <dbl> #>  1 Region 1   AR 3  2020-0… 2020-03-05       1 0.0514  -0.2 -5.98 0.0110  -1.96  #>  2 Region 1   AR 3  2020-0… 2020-03-06       2 0.0630   0.4 -5.34 0.0176  -1.55  #>  3 Region 1   AR 3  2020-0… 2020-03-07       3 0.0879   0   -4.72 0.0232  -1.31  #>  4 Region 1   AR 3  2020-0… 2020-03-08       4 0.129   -0.2 -4.01 0.0345  -0.961 #>  5 Region 1   AR 3  2020-0… 2020-03-09       5 0.165   -0.4 -3.44 0.0514  -0.764 #>  6 Region 1   AR 3  2020-0… 2020-03-10       6 0.170   -0.4 -3.25 0.0578  -0.713 #>  7 Region 1   AR 3  2020-0… 2020-03-11       7 0.186   -0.6 -2.67 0.0902  -0.483 #>  8 Region 1   AR 3  2020-0… 2020-03-07       1 0.0283  -0.8 -5.53 0.0207  -2.05  #>  9 Region 1   AR 3  2020-0… 2020-03-08       2 0.0273  -1   -3.32 0.0506  -0.712 #> 10 Region 1   AR 3  2020-0… 2020-03-09       3 0.0398  -1   -2.13 0.0864  -0.162 #> # … with 389 more rows, 2 more variables: ae_median <dbl>, se_mean <dbl>, and #> #   abbreviated variable names ¹​forecast_date, ²​log_score #>  #> $forecast_cases #> # A tibble: 399 × 12 #>    timeseries model forecas…¹ date       horizon median  mean    sd bottom lower #>    <chr>      <chr> <chr>     <date>       <int>  <dbl> <dbl> <dbl>  <dbl> <dbl> #>  1 Region 1   AR 3  2020-03-… 2020-03-05       1   68.5  67.5  5.91     59    61 #>  2 Region 1   AR 3  2020-03-… 2020-03-06       2   81.5  80.5 11.8      61    72 #>  3 Region 1   AR 3  2020-03-… 2020-03-07       3   97    94.4 15.7      68    94 #>  4 Region 1   AR 3  2020-03-… 2020-03-08       4  114   116.  13.9     102   102 #>  5 Region 1   AR 3  2020-03-… 2020-03-09       5  139   131.  24.0      98   132 #>  6 Region 1   AR 3  2020-03-… 2020-03-10       6  150.  156.  23.9     117   141 #>  7 Region 1   AR 3  2020-03-… 2020-03-11       7  186.  182.  41.1     122   155 #>  8 Region 1   AR 3  2020-03-… 2020-03-07       1   94.5  92.7  8.30     80    94 #>  9 Region 1   AR 3  2020-03-… 2020-03-08       2  108   107.   6.34     95   104 #> 10 Region 1   AR 3  2020-03-… 2020-03-09       3  122.  121.  13.8      94   115 #> # … with 389 more rows, 2 more variables: upper <dbl>, top <dbl>, and #> #   abbreviated variable name ¹​forecast_date #>  #> $case_scores #> # A tibble: 399 × 12 #>    timeseries model sample forecast…¹ date       horizon   mad  bias   dss  crps #>    <chr>      <chr> <chr>  <chr>      <date>       <int> <dbl> <dbl> <dbl> <dbl> #>  1 Region 1   AR 3  1      2020-03-04 2020-03-05       1  6.67   0.4  4.09  2.75 #>  2 Region 1   AR 3  1      2020-03-04 2020-03-06       2 11.1    0.4  5.28  4.77 #>  3 Region 1   AR 3  1      2020-03-04 2020-03-07       3 13.3    0.4  5.58  6.3  #>  4 Region 1   AR 3  1      2020-03-04 2020-03-08       4 14.1    0.6  6.30  6.85 #>  5 Region 1   AR 3  1      2020-03-04 2020-03-09       5 29.7    0.2  6.70 11.1  #>  6 Region 1   AR 3  1      2020-03-04 2020-03-10       6 14.1    0.6  6.68  7.7  #>  7 Region 1   AR 3  1      2020-03-04 2020-03-11       7 42.3    0.2  7.47 13.1  #>  8 Region 1   AR 3  1      2020-03-06 2020-03-07       1  8.90   0.4  4.48  3.65 #>  9 Region 1   AR 3  1      2020-03-06 2020-03-08       2  5.19   0.6  4.23  3.68 #> 10 Region 1   AR 3  1      2020-03-06 2020-03-09       3 13.3    0.2  5.26  4.1  #> # … with 389 more rows, 2 more variables: ae_median <dbl>, se_mean <dbl>, and #> #   abbreviated variable name ¹​forecast_date EpiSoon::plot_forecast_evaluation(forecasts$forecast_rts, obs_rts, c(7)) +   ggplot2::facet_grid(model ~ timeseries) +   cowplot::panel_border() EpiSoon::plot_forecast_evaluation(forecasts$forecast_cases, obs_cases, c(7)) +   ggplot2::facet_grid(model ~ timeseries, scales = \"free\") +   cowplot::panel_border() EpiSoon::summarise_scores(forecasts$case_scores) #> # A tibble: 12 × 9 #>    score     model             bottom lower median    mean  upper    top      sd #>    <chr>     <chr>              <dbl> <dbl>  <dbl>   <dbl>  <dbl>  <dbl>   <dbl> #>  1 ae_median AR 3               0.85   9     24.5  5.69e+1   91   2.27e2 6.28e+1 #>  2 ae_median Semi-local linea…  0.613  8.5   24.2  5.11e+1   92.4 1.88e2 5.86e+1 #>  3 bias      AR 3              -1      0      0.6  4.47e-1    1   1   e0 6.13e-1 #>  4 bias      Semi-local linea… -1      0.2    0.6  4.81e-1    1   1   e0 5.90e-1 #>  5 crps      AR 3               2.94   6.57  17.8  4.69e+1   79.3 2.00e2 5.59e+1 #>  6 crps      Semi-local linea…  2.80   6.82  15.6  4.18e+1   69.5 1.60e2 5.12e+1 #>  7 dss       AR 3               4.53   6.09   8.33 1.29e+1   15.9 4.67e1 1.09e+1 #>  8 dss       Semi-local linea…  4.56   6.20   7.74 1.28e+1   12.7 5.07e1 1.35e+1 #>  9 mad       AR 3               7.93  13.3   21.5  2.61e+1   34.1 8.51e1 1.76e+1 #> 10 mad       Semi-local linea…  6.10  12.8   19.3  2.46e+1   31.1 6.58e1 1.70e+1 #> 11 se_mean   AR 3               1.15  81    784    7.29e+3 8855.  4.72e4 1.56e+4 #> 12 se_mean   Semi-local linea…  0.524 79.2  595.   6.26e+3 8663.  4.16e4 1.31e+4"},{"path":"epiforecasts.io/EpiSoon/dev/index.html","id":"contributing","dir":"","previous_headings":"","what":"Contributing","title":"Forecast Cases Using Reproduction Numbers","text":"File issue identified issue package. Please note due operational constraints priority given users informing government policy offering methodological insights. welcome contributions, particular improve approach robustness code base.","code":""},{"path":"epiforecasts.io/EpiSoon/dev/reference/brms_model.html","id":null,"dir":"Reference","previous_headings":"","what":"brms Model Wrapper — brms_model","title":"brms Model Wrapper — brms_model","text":"Allows users specify model using brms::bf()  wrapper brms Note brms tidybayes must installed model wrapper functional.","code":""},{"path":"epiforecasts.io/EpiSoon/dev/reference/brms_model.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"brms Model Wrapper — brms_model","text":"","code":"brms_model(   y = NULL,   samples = NULL,   horizon = NULL,   model = NULL,   n_cores = 1,   n_chains = 4,   n_iter = 2000,   ... )"},{"path":"epiforecasts.io/EpiSoon/dev/reference/brms_model.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"brms Model Wrapper — brms_model","text":"y Numeric vector time points forecast samples Numeric, number samples take. horizon Numeric, time horizon predict. model brms model wrapped brms::bf() function n_cores Numeric, number cores use, default 1 n_chains Numeric, number chains use, default 4 n_iter Numeric, number iterations sampler use, default 4000 ... additional arguments passed brms (e.g. priors family)","code":""},{"path":"epiforecasts.io/EpiSoon/dev/reference/brms_model.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"brms Model Wrapper — brms_model","text":"dataframe predictions (columns representing time horizon rows representing samples).","code":""},{"path":"epiforecasts.io/EpiSoon/dev/reference/brms_model.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"brms Model Wrapper — brms_model","text":"","code":"if (FALSE) {  ## Used on its own ## Note: More iterations and chains should be used library(brms) brms_model(   y = EpiSoon::example_obs_rts[1:10, ]$rt,   model = brms::bf(y ~ gp(time)),   samples = 10, horizon = 7, n_iter = 40, n_chains = 1, refresh = 0 )  ## Used for forecasting ## Note that the timeout parameter has been increased to allow ## for the time for the code to be compiled ## Note: More iterations and chains should be used  forecast_rt(EpiSoon::example_obs_rts[1:10, ],   model = function(...) {     brms_model(model = brms::bf(y ~ gp(time)), n_iter = 40, n_chains = 1, ...)   },   horizon = 7, samples = 10, timeout = 300 ) }"},{"path":"epiforecasts.io/EpiSoon/dev/reference/bsts_model.html","id":null,"dir":"Reference","previous_headings":"","what":"bsts Model Wrapper — bsts_model","title":"bsts Model Wrapper — bsts_model","text":"bsts Model Wrapper","code":""},{"path":"epiforecasts.io/EpiSoon/dev/reference/bsts_model.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"bsts Model Wrapper — bsts_model","text":"","code":"bsts_model(y = NULL, samples = NULL, horizon = NULL, model = NULL)"},{"path":"epiforecasts.io/EpiSoon/dev/reference/bsts_model.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"bsts Model Wrapper — bsts_model","text":"y Numeric vector time points forecast samples Numeric, number samples take. horizon Numeric, time horizon predict. model bsts model object wrapped function ss y argument.","code":""},{"path":"epiforecasts.io/EpiSoon/dev/reference/bsts_model.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"bsts Model Wrapper — bsts_model","text":"dataframe predictions (columns representing time horizon rows representing samples).","code":""},{"path":"epiforecasts.io/EpiSoon/dev/reference/bsts_model.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"bsts Model Wrapper — bsts_model","text":"","code":"if (FALSE) {  library(bsts)  ## Used on its own bsts_model(   y = EpiSoon::example_obs_rts[1:10, ]$rt,   model = function(ss, y) {     bsts::AddAr(ss, y = y, lags = 2)   },   samples = 10, horizon = 7 )  ## Used for forecasting forecast_rt(EpiSoon::example_obs_rts[1:10, ],   model = function(...) {     EpiSoon::bsts_model(       model =         function(ss, y) {           bsts::AddAr(ss, y = y, lags = 3)         }, ...     )   },   horizon = 7, samples = 10 ) }"},{"path":"epiforecasts.io/EpiSoon/dev/reference/compare_models.html","id":null,"dir":"Reference","previous_headings":"","what":"Compare forecasting models — compare_models","title":"Compare forecasting models — compare_models","text":"Compare forecasting models","code":""},{"path":"epiforecasts.io/EpiSoon/dev/reference/compare_models.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compare forecasting models — compare_models","text":"","code":"compare_models(   obs_rts = NULL,   obs_cases = NULL,   models = NULL,   horizon = 7,   samples = 1000,   bound_rt = TRUE,   timeout = 30,   serial_interval = NULL,   min_points = 3,   rdist = NULL,   return_raw = FALSE )"},{"path":"epiforecasts.io/EpiSoon/dev/reference/compare_models.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compare forecasting models — compare_models","text":"obs_rts Dataframe Rt observations forecast score . contain date rt column. multiple samples included denoted using numeric sample variable. obs_cases Dataframe case observations use case prediction scoring. contain date cases column. multiple samples included denoted using numeric sample variable. models list models. configuration given examples. model needs wrapped function takes ... argument returns dataframe samples column representing time horizon. Example: function(...) {EpiSoon::bsts_model(model = function(ss, y){bsts::AddAr(ss, y = y, lags = 3)}, ...)}. horizon Numeric, time horizon predict. samples Numeric, number samples take. bound_rt Logical, defaults TRUE. Rt values bounded greater equal 0. timeout Numeric, timeout model fitting seconds. Defaults 30 seconds. serial_interval numeric vector describing probability distribution serial interval. See EpiNow::covid_serial_interval example format. min_points Numeric, defaults 3. minimum number time points begin iteratively evaluating forecast. rdist function used sample number cases. Must take two arguments first specfying number samples second mean. Defaults rpois supplied return_raw Logical, raw cases rt forecasts returned. Defaults FALSE.","code":""},{"path":"epiforecasts.io/EpiSoon/dev/reference/compare_models.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compare forecasting models — compare_models","text":"list dataframes produced evaluate model additional model column.","code":""},{"path":"epiforecasts.io/EpiSoon/dev/reference/compare_models.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Compare forecasting models — compare_models","text":"","code":"if (FALSE) { ## List of forecasting bsts models wrapped in functions. models <- list(   \"AR 3\" =     function(...) {       EpiSoon::bsts_model(         model =           function(ss, y) {             bsts::AddAr(ss, y = y, lags = 3)           }, ...       )     },   \"Semi-local linear trend\" =     function(...) {       EpiSoon::bsts_model(         model =           function(ss, y) {             bsts::AddSemilocalLinearTrend(ss, y = y)           }, ...       )     },   \"ARIMA\" =     function(...) {       fable_model(model = fable::ARIMA(y ~ time), ...)     } )    ## Compare models evaluations <- compare_models(EpiSoon::example_obs_rts,   EpiSoon::example_obs_cases, models,   horizon = 7, samples = 10,   serial_interval = example_serial_interval )  ## Example evaluation plot for comparing forecasts ## with actuals for a range of models and time horizons. plot_forecast_evaluation(evaluations$forecast_rts, EpiSoon::example_obs_rts, c(1, 3, 7)) +   ggplot2::facet_grid(model ~ horizon) +   cowplot::panel_border()  ## Hack to plot observed cases vs predicted plot_forecast_evaluation(   evaluations$forecast_cases,   EpiSoon::example_obs_cases, c(1, 3, 7) ) +   ggplot2::facet_wrap(model ~ horizon, scales = \"free\") +   cowplot::panel_border() }"},{"path":"epiforecasts.io/EpiSoon/dev/reference/compare_timeseries.html","id":null,"dir":"Reference","previous_headings":"","what":"Compare timeseries and forecast models — compare_timeseries","title":"Compare timeseries and forecast models — compare_timeseries","text":"Compare timeseries forecast models","code":""},{"path":"epiforecasts.io/EpiSoon/dev/reference/compare_timeseries.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compare timeseries and forecast models — compare_timeseries","text":"","code":"compare_timeseries(   obs_rts = NULL,   obs_cases = NULL,   models = NULL,   horizon = 7,   samples = 1000,   bound_rt = TRUE,   min_points = 3,   timeout = 30,   serial_interval = NULL,   rdist = NULL,   return_raw = FALSE )"},{"path":"epiforecasts.io/EpiSoon/dev/reference/compare_timeseries.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compare timeseries and forecast models — compare_timeseries","text":"obs_rts dataframe observed Rts including timeseries variable denote timeseris  rt vector (forecast) date vector (denote time). Optionally dataframe can contain samples timeseries case denoted using sample variable. obs_cases dataframe observed cases including timeseries variable denote timeseris  cases vector (forecast) date vector (denote time). Optionally dataframe can contain samples timeseries case denoted using sample variable. models list models. configuration given examples. model needs wrapped function takes ... argument returns dataframe samples column representing time horizon. Example: function(...) {EpiSoon::bsts_model(model = function(ss, y){bsts::AddAr(ss, y = y, lags = 3)}, ...)}. horizon Numeric, time horizon predict. samples Numeric, number samples take. bound_rt Logical, defaults TRUE. Rt values bounded greater equal 0. min_points Numeric, defaults 3. minimum number time points begin iteratively evaluating forecast. timeout Numeric, timeout model fitting seconds. Defaults 30 seconds. serial_interval numeric vector describing probability distribution serial interval. See EpiNow::covid_serial_interval example format. rdist function used sample number cases. Must take two arguments first specfying number samples second mean. Defaults rpois supplied return_raw Logical, raw cases rt forecasts returned. Defaults FALSE.","code":""},{"path":"epiforecasts.io/EpiSoon/dev/reference/compare_timeseries.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compare timeseries and forecast models — compare_timeseries","text":"list dataframes produced evaluate model additional model column.","code":""},{"path":"epiforecasts.io/EpiSoon/dev/reference/compare_timeseries.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Compare timeseries and forecast models — compare_timeseries","text":"","code":"if (FALSE) { ## Example data obs_rts <- EpiSoon::example_obs_rts %>%   dplyr::mutate(timeseries = \"Region 1\") %>%   dplyr::bind_rows(EpiSoon::example_obs_rts %>%     dplyr::mutate(timeseries = \"Region 2\"))  obs_cases <- EpiSoon::example_obs_cases %>%   dplyr::mutate(timeseries = \"Region 1\") %>%   dplyr::bind_rows(EpiSoon::example_obs_cases %>%     dplyr::mutate(timeseries = \"Region 2\"))  ## List of forecasting bsts models wrapped in functions. models <- list(   \"AR 3\" =     function(...) {       EpiSoon::bsts_model(         model =           function(ss, y) {             bsts::AddAr(ss, y = y, lags = 3)           }, ...       )     },   \"Semi-local linear trend\" =     function(...) {       EpiSoon::bsts_model(         model =           function(ss, y) {             bsts::AddSemilocalLinearTrend(ss, y = y)           }, ...       )     },   \"ARIMA\" =     function(...) {       fable_model(model = fable::ARIMA(y ~ time), ...)     } )   ## Compare models evaluations <- compare_timeseries(obs_rts, obs_cases, models,   horizon = 7, samples = 10,   serial_interval = EpiSoon::example_serial_interval )  evaluations  ## Example evaluation plot for comparing forecasts ## with actuals for a range of models and timeseries. plot_forecast_evaluation(evaluations$forecast_rts, obs_rts, c(7)) +   ggplot2::facet_grid(model ~ timeseries) +   cowplot::panel_border()  ## Hack to plot observed cases vs predicted plot_forecast_evaluation(   evaluations$forecast_cases,   obs_cases, c(7) ) +   ggplot2::facet_grid(model ~ timeseries, scales = \"free\") +   cowplot::panel_border() }"},{"path":"epiforecasts.io/EpiSoon/dev/reference/draw_from_si_prob.html","id":null,"dir":"Reference","previous_headings":"","what":"Draw from the Serial Interval Probability Distribution — draw_from_si_prob","title":"Draw from the Serial Interval Probability Distribution — draw_from_si_prob","text":"Draw Serial Interval Probability Distribution","code":""},{"path":"epiforecasts.io/EpiSoon/dev/reference/draw_from_si_prob.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Draw from the Serial Interval Probability Distribution — draw_from_si_prob","text":"","code":"draw_from_si_prob(days_ago = NULL, serial_interval = NULL)"},{"path":"epiforecasts.io/EpiSoon/dev/reference/draw_from_si_prob.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Draw from the Serial Interval Probability Distribution — draw_from_si_prob","text":"days_ago Numeric vector days past. Defaults NULL. serial_interval numeric vector describing probability distribution serial interval. See EpiNow::covid_serial_interval example format.","code":""},{"path":"epiforecasts.io/EpiSoon/dev/reference/draw_from_si_prob.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Draw from the Serial Interval Probability Distribution — draw_from_si_prob","text":"draw probability distribution serial interval.","code":""},{"path":"epiforecasts.io/EpiSoon/dev/reference/draw_from_si_prob.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Draw from the Serial Interval Probability Distribution — draw_from_si_prob","text":"","code":"## Draw draw_from_si_prob(rev(c(1, 2, 4, 10, 1:100)), EpiSoon::example_serial_interval) #>                                                                                  #> 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00  #>                                                                                  #> 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00  #>                                                                                  #> 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00  #>                                                                                  #> 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00  #>                                                                                  #> 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00  #>                                      14   12   11   10    9    8    7    6    5  #> 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.01 0.01 0.01 0.02 0.03 0.05 0.05 0.13 0.15  #>    4    3    2    1   10    4    2    1  #> 0.09 0.17 0.25 0.03 0.02 0.09 0.25 0.03"},{"path":"epiforecasts.io/EpiSoon/dev/reference/evaluate_model.html","id":null,"dir":"Reference","previous_headings":"","what":"Evaluate a Model for Forecasting Rts — evaluate_model","title":"Evaluate a Model for Forecasting Rts — evaluate_model","text":"Evaluate Model Forecasting Rts","code":""},{"path":"epiforecasts.io/EpiSoon/dev/reference/evaluate_model.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Evaluate a Model for Forecasting Rts — evaluate_model","text":"","code":"evaluate_model(   obs_rts = NULL,   obs_cases = NULL,   model = NULL,   horizon = 7,   samples = 1000,   timeout = 30,   bound_rt = TRUE,   min_points = 3,   serial_interval = NULL,   rdist = NULL,   return_raw = FALSE )"},{"path":"epiforecasts.io/EpiSoon/dev/reference/evaluate_model.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Evaluate a Model for Forecasting Rts — evaluate_model","text":"obs_rts Dataframe Rt observations forecast score . contain date rt column. multiple samples included denoted using numeric sample variable. obs_cases Dataframe case observations use case prediction scoring. contain date cases column. multiple samples included denoted using numeric sample variable. model model object format bsts_model fable_model. See corresponding help files details. horizon Numeric, time horizon predict. samples Numeric, number samples take. timeout Numeric, timeout model fitting seconds. Defaults 30 seconds. bound_rt Logical, defaults TRUE. Rt values bounded greater equal 0. min_points Numeric, defaults 3. minimum number time points begin iteratively evaluating forecast. serial_interval numeric vector describing probability distribution serial interval. See EpiNow::covid_serial_interval example format. rdist function used sample number cases. Must take two arguments first specfying number samples second mean. Defaults rpois supplied return_raw Logical, raw cases rt forecasts returned. Defaults FALSE.","code":""},{"path":"epiforecasts.io/EpiSoon/dev/reference/evaluate_model.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Evaluate a Model for Forecasting Rts — evaluate_model","text":"list tibbles containing predicted Rt values (forecast_rts), scores (rt_scores), well predicted cases (forecast_cases) scores (case_scores).","code":""},{"path":"epiforecasts.io/EpiSoon/dev/reference/evaluate_model.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Evaluate a Model for Forecasting Rts — evaluate_model","text":"","code":"if (FALSE) { ## Evaluate a model based on a single sample of input cases evaluate_model(EpiSoon::example_obs_rts,   EpiSoon::example_obs_cases,   model = function(...) {     EpiSoon::bsts_model(       model =         function(ss, y) {           bsts::AddSemilocalLinearTrend(ss, y = y)         }, ...     )   },   horizon = 7, samples = 10,   serial_interval = example_serial_interval )   ## Samples of observed data sampled_obs <- EpiSoon::example_obs_rts %>%   dplyr::mutate(sample = 1) %>%   dplyr::bind_rows(EpiSoon::example_obs_rts %>%     dplyr::mutate(sample = 2))  sampled_cases <- EpiSoon::example_obs_cases %>%   dplyr::mutate(sample = 1) %>%   dplyr::bind_rows(EpiSoon::example_obs_cases %>%     dplyr::mutate(sample = 2))   ## Evaluate a model across samples evaluate_model(sampled_obs,   sampled_cases,   model = function(...) {     EpiSoon::bsts_model(       model =         function(ss, y) {           bsts::AddSemilocalLinearTrend(ss, y = y)         }, ...     )   },   horizon = 7, samples = 10,   serial_interval = EpiSoon::example_serial_interval ) }"},{"path":"epiforecasts.io/EpiSoon/dev/reference/example_obs_cases.html","id":null,"dir":"Reference","previous_headings":"","what":"Example Observed Cases — example_obs_cases","title":"Example Observed Cases — example_obs_cases","text":"example data frame observed cases","code":""},{"path":"epiforecasts.io/EpiSoon/dev/reference/example_obs_cases.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Example Observed Cases — example_obs_cases","text":"","code":"example_obs_cases"},{"path":"epiforecasts.io/EpiSoon/dev/reference/example_obs_cases.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Example Observed Cases — example_obs_cases","text":"data frame containing cases reported date.","code":""},{"path":"epiforecasts.io/EpiSoon/dev/reference/example_obs_rts.html","id":null,"dir":"Reference","previous_headings":"","what":"Example Observed Rts — example_obs_rts","title":"Example Observed Rts — example_obs_rts","text":"example data frame observed Reproduction numbers","code":""},{"path":"epiforecasts.io/EpiSoon/dev/reference/example_obs_rts.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Example Observed Rts — example_obs_rts","text":"","code":"example_obs_rts"},{"path":"epiforecasts.io/EpiSoon/dev/reference/example_obs_rts.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Example Observed Rts — example_obs_rts","text":"data frame containing Rts estimated date.","code":""},{"path":"epiforecasts.io/EpiSoon/dev/reference/example_serial_interval.html","id":null,"dir":"Reference","previous_headings":"","what":"Example Serial Interval — example_serial_interval","title":"Example Serial Interval — example_serial_interval","text":"example serial interval probability vector","code":""},{"path":"epiforecasts.io/EpiSoon/dev/reference/example_serial_interval.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Example Serial Interval — example_serial_interval","text":"","code":"example_serial_interval"},{"path":"epiforecasts.io/EpiSoon/dev/reference/example_serial_interval.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Example Serial Interval — example_serial_interval","text":"vector giviing probability day","code":""},{"path":"epiforecasts.io/EpiSoon/dev/reference/fable_model.html","id":null,"dir":"Reference","previous_headings":"","what":"fable Model Wrapper — fable_model","title":"fable Model Wrapper — fable_model","text":"Provides interface models fable package. Note feasts::ARIMA model requires feast package. future used fable require future.apply order silently fail.","code":""},{"path":"epiforecasts.io/EpiSoon/dev/reference/fable_model.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"fable Model Wrapper — fable_model","text":"","code":"fable_model(y = NULL, samples = NULL, horizon = NULL, model = NULL)"},{"path":"epiforecasts.io/EpiSoon/dev/reference/fable_model.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"fable Model Wrapper — fable_model","text":"y Numeric vector time points forecast samples Numeric, number samples take. horizon Numeric, time horizon predict. model fable model object.  models use formula interface time can accessed using time.","code":""},{"path":"epiforecasts.io/EpiSoon/dev/reference/fable_model.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"fable Model Wrapper — fable_model","text":"dataframe predictions (columns representing time horizon rows representing samples).","code":""},{"path":"epiforecasts.io/EpiSoon/dev/reference/fable_model.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"fable Model Wrapper — fable_model","text":"","code":"if (FALSE) { ## Used on its own fable_model(   y = EpiSoon::example_obs_rts[1:10, ]$rt,   model = fable::ARIMA(y ~ time),   samples = 10, horizon = 7 )   forecast_rt(EpiSoon::example_obs_rts[1:10, ],   model = function(...) {     fable_model(model = fable::ARIMA(y ~ time), ...)   },   horizon = 7, samples = 10 ) }"},{"path":"epiforecasts.io/EpiSoon/dev/reference/forecastHybrid_model.html","id":null,"dir":"Reference","previous_headings":"","what":"forecastHybrid Model Wrapper — forecastHybrid_model","title":"forecastHybrid Model Wrapper — forecastHybrid_model","text":"Allows users forecast using ensembles forecastHybrid package. Note whilst weighted ensembles can created advised samples > 1 currently samples derived assuming normal distribution using upper lower confidence intervals ensemble. confidence intervals either based unweighted mean ensembled models maximum/minimum candiate models. Note forecastHybrid must installed model wrapper functional.","code":""},{"path":"epiforecasts.io/EpiSoon/dev/reference/forecastHybrid_model.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"forecastHybrid Model Wrapper — forecastHybrid_model","text":"","code":"forecastHybrid_model(   y = NULL,   samples = NULL,   horizon = NULL,   model_params = NULL,   forecast_params = NULL )"},{"path":"epiforecasts.io/EpiSoon/dev/reference/forecastHybrid_model.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"forecastHybrid Model Wrapper — forecastHybrid_model","text":"y Numeric vector time points forecast samples Numeric, number samples take. horizon Numeric, time horizon predict. model_params List parameters pass forecastHybrid::hybridModel. forecast_params List parameters pass forecastHybrid:::forecast.hybridModel.","code":""},{"path":"epiforecasts.io/EpiSoon/dev/reference/forecastHybrid_model.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"forecastHybrid Model Wrapper — forecastHybrid_model","text":"dataframe predictions (columns representing time horizon rows representing samples).","code":""},{"path":"epiforecasts.io/EpiSoon/dev/reference/forecastHybrid_model.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"forecastHybrid Model Wrapper — forecastHybrid_model","text":"","code":"if (FALSE) {  library(forecastHybrid)  ## Used on its own forecastHybrid_model(   y = EpiSoon::example_obs_rts$rt,   samples = 10, horizon = 7 )   ## Used with non-default arguments ## Note that with the current sampling from maximal confidence intervals model ## Weighting using cross-validation will only have an impact when 1 sample is used. forecastHybrid_model(   y = EpiSoon::example_obs_rts$rt,   samples = 1, horizon = 7,   model_params = list(     cvHorizon = 7, windowSize = 7,     rolling = TRUE, models = \"zeta\"   ) )   ## Used for forecasting forecast_rt(EpiSoon::example_obs_rts,   model = EpiSoon::forecastHybrid_model,   horizon = 7, samples = 1 )  ## Used for forcasting with non-default arguments forecast_rt(EpiSoon::example_obs_rts,   model = function(...) {     EpiSoon::forecastHybrid_model(       model_params = list(models = \"zte\"),       forecast_params = list(PI.combination = \"mean\"), ...     )   },   horizon = 7, samples = 10 ) }"},{"path":"epiforecasts.io/EpiSoon/dev/reference/forecast_cases.html","id":null,"dir":"Reference","previous_headings":"","what":"Forecasts Cases for a Rt Forecasts — forecast_cases","title":"Forecasts Cases for a Rt Forecasts — forecast_cases","text":"Forecasts Cases Rt Forecasts","code":""},{"path":"epiforecasts.io/EpiSoon/dev/reference/forecast_cases.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Forecasts Cases for a Rt Forecasts — forecast_cases","text":"","code":"forecast_cases(   cases = NULL,   fit_samples = NULL,   serial_interval = NULL,   forecast_date = NULL,   horizon = NULL,   rdist = NULL )"},{"path":"epiforecasts.io/EpiSoon/dev/reference/forecast_cases.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Forecasts Cases for a Rt Forecasts — forecast_cases","text":"cases dataframe containing date cases variables fit_samples dataframe produced EpiSoon::forecast. serial_interval numeric vector describing probability distribution serial interval. See EpiNow::covid_serial_interval example format. forecast_date character string date (format \"yyyy-mm-dd\") indicating forecast date. Defaults NULL case assumed forecast date  day first date present fit_samples dataframe horizon Numeric, time horizon predict. rdist function used sample number cases. Must take two arguments first specfying number samples second mean. Defaults rpois supplied","code":""},{"path":"epiforecasts.io/EpiSoon/dev/reference/forecast_cases.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Forecasts Cases for a Rt Forecasts — forecast_cases","text":"Forecast cases future forecast horizon","code":""},{"path":"epiforecasts.io/EpiSoon/dev/reference/forecast_cases.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Forecasts Cases for a Rt Forecasts — forecast_cases","text":"","code":"if (FALSE) { ## Rt forecast forecast <- forecast_rt(EpiSoon::example_obs_rts[1:10, ],   model = function(...) {     EpiSoon::bsts_model(model = function(ss, y) {       bsts::AddAutoAr(ss, y = y, lags = 10)     }, ...)   },   horizon = 7, samples = 10 )   forecast_cases(EpiSoon::example_obs_cases,   fit_samples = forecast,   serial_interval = EpiSoon::example_serial_interval ) }"},{"path":"epiforecasts.io/EpiSoon/dev/reference/forecast_cases_directly.html","id":null,"dir":"Reference","previous_headings":"","what":"Forecasts Cases Directly — forecast_cases_directly","title":"Forecasts Cases Directly — forecast_cases_directly","text":"Forecasts Cases Directly","code":""},{"path":"epiforecasts.io/EpiSoon/dev/reference/forecast_cases_directly.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Forecasts Cases Directly — forecast_cases_directly","text":"","code":"forecast_cases_directly(   cases = NULL,   model,   horizon = 7,   samples = 1000,   bound_rt = TRUE,   timeout = 100 )"},{"path":"epiforecasts.io/EpiSoon/dev/reference/forecast_cases_directly.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Forecasts Cases Directly — forecast_cases_directly","text":"cases dataframe containing date cases variables model model object format bsts_model fable_model. See corresponding help files details. horizon Numeric, time horizon predict. samples Numeric, number samples take. bound_rt Logical, defaults TRUE. Rt values bounded greater equal 0. timeout Numeric, timeout model fitting seconds. Defaults 30 seconds.","code":""},{"path":"epiforecasts.io/EpiSoon/dev/reference/forecast_cases_directly.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Forecasts Cases Directly — forecast_cases_directly","text":"Forecast cases future forecast horizon","code":""},{"path":"epiforecasts.io/EpiSoon/dev/reference/forecast_cases_directly.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Forecasts Cases Directly — forecast_cases_directly","text":"","code":"if (FALSE) { forecast_cases_directly(EpiSoon::example_obs_cases,   model = function(...) {     EpiSoon::bsts_model(model = function(ss, y) {       bsts::AddAutoAr(ss, y = y, lags = 10)     }, ...)   },   horizon = 7, samples = 10 ) }"},{"path":"epiforecasts.io/EpiSoon/dev/reference/forecast_model.html","id":null,"dir":"Reference","previous_headings":"","what":"forecast Model Wrapper — forecast_model","title":"forecast Model Wrapper — forecast_model","text":"Allows users forecast using models forecast package. Note forecast must installed model wrapper functional.","code":""},{"path":"epiforecasts.io/EpiSoon/dev/reference/forecast_model.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"forecast Model Wrapper — forecast_model","text":"","code":"forecast_model(y = NULL, samples = NULL, horizon = NULL, model = NULL, ...)"},{"path":"epiforecasts.io/EpiSoon/dev/reference/forecast_model.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"forecast Model Wrapper — forecast_model","text":"y Numeric vector time points forecast samples Numeric, number samples take. horizon Numeric, time horizon predict. model forecast model object. ... pass arguments forecast models","code":""},{"path":"epiforecasts.io/EpiSoon/dev/reference/forecast_model.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"forecast Model Wrapper — forecast_model","text":"dataframe predictions (columns representing time horizon rows representing samples).","code":""},{"path":"epiforecasts.io/EpiSoon/dev/reference/forecast_model.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"forecast Model Wrapper — forecast_model","text":"","code":"if (FALSE) {  ## Used on its own forecast_model(   y = EpiSoon::example_obs_rts[1:10, ]$rt,   model = forecast::auto.arima,   samples = 10, horizon = 7 )  ## Used for forecasting forecast_rt(EpiSoon::example_obs_rts[1:10, ],   model = function(...) {     forecast_model(model = forecast::ets, ...)   },   horizon = 7, samples = 10 )  # run with non-default arguments forecast_rt(EpiSoon::example_obs_rts[1:10, ],   model = function(...) {     forecast_model(       model = forecast::ets,       damped = TRUE, ...     )   },   horizon = 7, samples = 10 )  models <- list(   \"ARIMA\" = function(...) {     forecast_model(model = forecast::auto.arima, ...)   },   \"ETS\" = function(...) {     forecast_model(model = forecast::ets, ...)   },   \"TBATS\" = function(...) {     forecast_model(model = forecast::tbats, ...)   } )  ## Compare models evaluations <- compare_models(EpiSoon::example_obs_rts,   EpiSoon::example_obs_cases, models,   horizon = 7, samples = 10,   serial_interval = example_serial_interval )  plot_forecast_evaluation(evaluations$forecast_rts,   EpiSoon::example_obs_rts,   horizon_to_plot = 7 ) +   ggplot2::facet_grid(~model) +   cowplot::panel_border() }"},{"path":"epiforecasts.io/EpiSoon/dev/reference/forecast_rt.html","id":null,"dir":"Reference","previous_headings":"","what":"Fit and Forecast using a Model — forecast_rt","title":"Fit and Forecast using a Model — forecast_rt","text":"Fit Forecast using Model","code":""},{"path":"epiforecasts.io/EpiSoon/dev/reference/forecast_rt.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Fit and Forecast using a Model — forecast_rt","text":"","code":"forecast_rt(   rts,   model,   horizon = 7,   samples = 1000,   bound_rt = TRUE,   timeout = 100 )"},{"path":"epiforecasts.io/EpiSoon/dev/reference/forecast_rt.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Fit and Forecast using a Model — forecast_rt","text":"rts dataframe containing two variables rt  date rt numeric date date. model model object format bsts_model fable_model. See corresponding help files details. horizon Numeric, time horizon predict. samples Numeric, number samples take. bound_rt Logical, defaults TRUE. Rt values bounded greater equal 0. timeout Numeric, timeout model fitting seconds. Defaults 30 seconds.","code":""},{"path":"epiforecasts.io/EpiSoon/dev/reference/forecast_rt.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Fit and Forecast using a Model — forecast_rt","text":"dataframe samples containing following variables: sample, date, rt, horizon.","code":""},{"path":"epiforecasts.io/EpiSoon/dev/reference/forecast_rt.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Fit and Forecast using a Model — forecast_rt","text":"","code":"if (FALSE) { forecast_rt(EpiSoon::example_obs_rts[1:10, ],   model = function(...) {     EpiSoon::bsts_model(model = function(ss, y) {       bsts::AddAutoAr(ss, y = y, lags = 10)     }, ...)   },   horizon = 7, samples = 10 ) }"},{"path":"epiforecasts.io/EpiSoon/dev/reference/iterative_case_forecast.html","id":null,"dir":"Reference","previous_headings":"","what":"Iteratively Forecast Cases Using an Iterative Rt Forecast — iterative_case_forecast","title":"Iteratively Forecast Cases Using an Iterative Rt Forecast — iterative_case_forecast","text":"Iteratively Forecast Cases Using Iterative Rt Forecast","code":""},{"path":"epiforecasts.io/EpiSoon/dev/reference/iterative_case_forecast.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Iteratively Forecast Cases Using an Iterative Rt Forecast — iterative_case_forecast","text":"","code":"iterative_case_forecast(   it_fit_samples = NULL,   cases = NULL,   serial_interval,   rdist = NULL )"},{"path":"epiforecasts.io/EpiSoon/dev/reference/iterative_case_forecast.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Iteratively Forecast Cases Using an Iterative Rt Forecast — iterative_case_forecast","text":"it_fit_samples Dataframe iterative forecasts produced iterative_rt_forecast. cases dataframe containing date cases variables serial_interval numeric vector describing probability distribution serial interval. See EpiNow::covid_serial_interval example format. rdist function used sample number cases. Must take two arguments first specfying number samples second mean. Defaults rpois supplied","code":""},{"path":"epiforecasts.io/EpiSoon/dev/reference/iterative_case_forecast.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Iteratively Forecast Cases Using an Iterative Rt Forecast — iterative_case_forecast","text":"dataframe iterative case forecasts","code":""},{"path":"epiforecasts.io/EpiSoon/dev/reference/iterative_case_forecast.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Iteratively Forecast Cases Using an Iterative Rt Forecast — iterative_case_forecast","text":"","code":"if (FALSE) { ## Iterative Rt forecast it_forecast <-   iterative_rt_forecast(EpiSoon::example_obs_rts,     model = function(...) {       EpiSoon::bsts_model(         model =           function(ss, y) {             bsts::AddSemilocalLinearTrend(ss, y = y)           }, ...       )     },     horizon = 7, samples = 10   )   ## Iterative case forecast iterative_case_forecast(   it_fit_samples = it_forecast,   cases = EpiSoon::example_obs_cases,   serial_interval = EpiSoon::example_serial_interval ) }"},{"path":"epiforecasts.io/EpiSoon/dev/reference/iterative_direct_case_forecast.html","id":null,"dir":"Reference","previous_headings":"","what":"Iteratively forecast directly on cases — iterative_direct_case_forecast","title":"Iteratively forecast directly on cases — iterative_direct_case_forecast","text":"Iteratively forecast directly cases","code":""},{"path":"epiforecasts.io/EpiSoon/dev/reference/iterative_direct_case_forecast.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Iteratively forecast directly on cases — iterative_direct_case_forecast","text":"","code":"iterative_direct_case_forecast(   cases,   model = NULL,   horizon = 7,   samples = 1000,   timeout = 30,   bound_rt = TRUE,   min_points = 3 )"},{"path":"epiforecasts.io/EpiSoon/dev/reference/iterative_direct_case_forecast.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Iteratively forecast directly on cases — iterative_direct_case_forecast","text":"cases dataframe containing date cases variables model model object format bsts_model fable_model. See corresponding help files details. horizon Numeric, time horizon predict. samples Numeric, number samples take. timeout Numeric, timeout model fitting seconds. Defaults 30 seconds. bound_rt Logical, defaults TRUE. Rt values bounded greater equal 0. min_points Numeric, defaults 3. minimum number time points begin iteratively evaluating forecast.","code":""},{"path":"epiforecasts.io/EpiSoon/dev/reference/iterative_direct_case_forecast.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Iteratively forecast directly on cases — iterative_direct_case_forecast","text":"tibble iterative forecasts","code":""},{"path":"epiforecasts.io/EpiSoon/dev/reference/iterative_direct_case_forecast.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Iteratively forecast directly on cases — iterative_direct_case_forecast","text":"","code":"if (FALSE) { iterative_direct_case_forecast(EpiSoon::example_obs_cases,   model = function(...) {     EpiSoon::bsts_model(       model =         function(ss, y) {           bsts::AddSemilocalLinearTrend(ss, y = y)         }, ...     )   },   horizon = 7, samples = 10, min_points = 4 ) }"},{"path":"epiforecasts.io/EpiSoon/dev/reference/iterative_rt_forecast.html","id":null,"dir":"Reference","previous_headings":"","what":"Iteratively Forecast — iterative_rt_forecast","title":"Iteratively Forecast — iterative_rt_forecast","text":"Iteratively Forecast","code":""},{"path":"epiforecasts.io/EpiSoon/dev/reference/iterative_rt_forecast.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Iteratively Forecast — iterative_rt_forecast","text":"","code":"iterative_rt_forecast(   rts,   model = NULL,   horizon = 7,   samples = 1000,   timeout = 30,   bound_rt = TRUE,   min_points = 3 )"},{"path":"epiforecasts.io/EpiSoon/dev/reference/iterative_rt_forecast.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Iteratively Forecast — iterative_rt_forecast","text":"rts dataframe containing two variables rt  date rt numeric date date. model model object format bsts_model fable_model. See corresponding help files details. horizon Numeric, time horizon predict. samples Numeric, number samples take. timeout Numeric, timeout model fitting seconds. Defaults 30 seconds. bound_rt Logical, defaults TRUE. Rt values bounded greater equal 0. min_points Numeric, defaults 3. minimum number time points begin iteratively evaluating forecast.","code":""},{"path":"epiforecasts.io/EpiSoon/dev/reference/iterative_rt_forecast.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Iteratively Forecast — iterative_rt_forecast","text":"tibble iterative forecasts","code":""},{"path":"epiforecasts.io/EpiSoon/dev/reference/iterative_rt_forecast.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Iteratively Forecast — iterative_rt_forecast","text":"","code":"if (FALSE) { iterative_rt_forecast(EpiSoon::example_obs_rts,   model = function(...) {     EpiSoon::bsts_model(       model =         function(ss, y) {           bsts::AddSemilocalLinearTrend(ss, y = y)         }, ...     )   },   horizon = 7, samples = 10, min_points = 4 ) -> tmp }"},{"path":"epiforecasts.io/EpiSoon/dev/reference/pipe.html","id":null,"dir":"Reference","previous_headings":"","what":"Pipe operator — %>%","title":"Pipe operator — %>%","text":"See magrittr::%>% details.","code":""},{"path":"epiforecasts.io/EpiSoon/dev/reference/pipe.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Pipe operator — %>%","text":"","code":"lhs %>% rhs"},{"path":"epiforecasts.io/EpiSoon/dev/reference/plot_compare_timeseries.html","id":null,"dir":"Reference","previous_headings":"","what":"Summary plots to compare timeseries and forecast models — plot_compare_timeseries","title":"Summary plots to compare timeseries and forecast models — plot_compare_timeseries","text":"Summary plots compare timeseries forecast models","code":""},{"path":"epiforecasts.io/EpiSoon/dev/reference/plot_compare_timeseries.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Summary plots to compare timeseries and forecast models — plot_compare_timeseries","text":"","code":"plot_compare_timeseries(   compare_timeseries_output,   type = c(\"summary_score\", \"horizon_score\", \"region_score\"),   score = c(\"Bias\", \"CRPS\", \"Dispersion\", \"AE (median)\", \"SE (mean)\") )"},{"path":"epiforecasts.io/EpiSoon/dev/reference/plot_compare_timeseries.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Summary plots to compare timeseries and forecast models — plot_compare_timeseries","text":"compare_timeseries_output named list dataframes produced compare_timeseries type Type(s) summary plot produced Rt case observations model n compare_timeseries_output. \"summary_score\" provides plot model fit scores 0-7 8-14 day horizons. desired, subset scores can specified using score argument. \"horizon_score\" provides plot scores (CRPS, Calibration, Sharpness, Median, IQR, CI, Bias) across horizons. \"region_score\" provides plot scores (CRPS, Calibration, Sharpness, Bias, Median, IQR) region 0-7 8-14 day horizons. score (Optional) One c(\"Bias\",\"CRPS\",\"Sharpness\",\"Calibration\",\"Median\",\"IQR\",\"CI\") type=\"summary_score\" used.","code":""},{"path":"epiforecasts.io/EpiSoon/dev/reference/plot_compare_timeseries.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Summary plots to compare timeseries and forecast models — plot_compare_timeseries","text":"named list ggplot2 objects","code":""},{"path":"epiforecasts.io/EpiSoon/dev/reference/plot_compare_timeseries.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Summary plots to compare timeseries and forecast models — plot_compare_timeseries","text":"","code":"if (FALSE) { obs_rts <- EpiSoon::example_obs_rts %>%   dplyr::mutate(timeseries = \"Region 1\") %>%   dplyr::bind_rows(EpiSoon::example_obs_rts %>%     dplyr::mutate(timeseries = \"Region 2\"))  obs_cases <- EpiSoon::example_obs_cases %>%   dplyr::mutate(timeseries = \"Region 1\") %>%   dplyr::bind_rows(EpiSoon::example_obs_cases %>%     dplyr::mutate(timeseries = \"Region 2\"))  models <- list(   \"AR 3\" = function(...) {     EpiSoon::bsts_model(model = function(ss, y) {       bsts::AddAr(ss, y = y, lags = 3)     }, ...)   },   \"Semi-local linear trend\" = function(...) {     EpiSoon::bsts_model(model = function(ss, y) {       bsts::AddSemilocalLinearTrend(ss, y = y)     }, ...)   } )  forecast_eval <-   compare_timeseries(obs_rts, obs_cases, models,     horizon = 10, samples = 10,     serial_interval = EpiSoon::example_serial_interval   )  ## Produce all plots plot_compare_timeseries(forecast_eval)  ## Produce subsets of plots plot_compare_timeseries(forecast_eval, type = \"summary_score\") plot_compare_timeseries(forecast_eval,   type = \"summary_score\",   score = \"Bias\" ) plot_compare_timeseries(forecast_eval, type = \"horizon_score\") plot_compare_timeseries(forecast_eval, type = \"region_score\") plot_compare_timeseries(forecast_eval,   type = c(\"horizon_score\", \"region_score\") ) }"},{"path":"epiforecasts.io/EpiSoon/dev/reference/plot_forecast.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot a Forecast — plot_forecast","title":"Plot a Forecast — plot_forecast","text":"Plot Forecast","code":""},{"path":"epiforecasts.io/EpiSoon/dev/reference/plot_forecast.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot a Forecast — plot_forecast","text":"","code":"plot_forecast(   forecast = NULL,   observations = NULL,   horizon_cutoff = NULL,   obs_cutoff_at_forecast = TRUE )"},{"path":"epiforecasts.io/EpiSoon/dev/reference/plot_forecast.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot a Forecast — plot_forecast","text":"forecast dataframe summarised forecasts produced summarise_forecast summarise_case_forecast . observations dataframe observations containing following variables: either rt cases date. horizon_cutoff Numeric, defaults NULL. Forecast horizon plot . obs_cutoff_at_forecast Logical defaults TRUE. observations shown date forecast.","code":""},{"path":"epiforecasts.io/EpiSoon/dev/reference/plot_forecast.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot a Forecast — plot_forecast","text":"ggplot2 object","code":""},{"path":"epiforecasts.io/EpiSoon/dev/reference/plot_forecast.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Plot a Forecast — plot_forecast","text":"","code":"if (FALSE) { ## Forecast an Rt sample samples <- forecast_rt(EpiSoon::example_obs_rts[1:10, ],   model = function(...) {     EpiSoon::bsts_model(       model =         function(ss, y) {           bsts::AddSemilocalLinearTrend(ss, y = y)         }, ...     )   },   horizon = 21, samples = 10 )  ## Summarise forecast summarised_forecast <- summarise_forecast(samples)  ## Plot forecast_cases plot_forecast(summarised_forecast, EpiSoon::example_obs_rts)  ## Forecast a case sample pred_cases <- forecast_cases(EpiSoon::example_obs_cases, samples,   serial_interval = EpiSoon::example_serial_interval )  summarised_case_forecast <- summarise_case_forecast(pred_cases)  plot_forecast(summarised_case_forecast, EpiSoon::example_obs_cases) }"},{"path":"epiforecasts.io/EpiSoon/dev/reference/plot_forecast_evaluation.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot a Forecast — plot_forecast_evaluation","title":"Plot a Forecast — plot_forecast_evaluation","text":"Plot Forecast","code":""},{"path":"epiforecasts.io/EpiSoon/dev/reference/plot_forecast_evaluation.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot a Forecast — plot_forecast_evaluation","text":"","code":"plot_forecast_evaluation(   forecasts = NULL,   observations = NULL,   horizon_to_plot = 1 )"},{"path":"epiforecasts.io/EpiSoon/dev/reference/plot_forecast_evaluation.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot a Forecast — plot_forecast_evaluation","text":"forecasts dataframe produced forecast_rt forecast_cases observations dataframe observations containing following variables: either rt cases date. horizon_to_plot Numeric vector, forecast horizon plot.","code":""},{"path":"epiforecasts.io/EpiSoon/dev/reference/plot_forecast_evaluation.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot a Forecast — plot_forecast_evaluation","text":"ggplot2 object","code":""},{"path":"epiforecasts.io/EpiSoon/dev/reference/plot_forecast_evaluation.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Plot a Forecast — plot_forecast_evaluation","text":"","code":"if (FALSE) { ## Evaluate a model forecast_eval <- evaluate_model(EpiSoon::example_obs_rts,   EpiSoon::example_obs_cases,   model = function(...) {     EpiSoon::bsts_model(       model =         function(ss, y) {           bsts::AddSemilocalLinearTrend(ss, y = y)         }, ...     )   },   serial_interval = EpiSoon::example_serial_interval,   horizon = 7, samples = 10 )  ## Plot Rt forecast plot_forecast_evaluation(forecast_eval$forecast_rts,   EpiSoon::example_obs_rts,   horizon_to_plot = 7 )   ## Plot case forecast plot_forecast_evaluation(forecast_eval$forecast_cases,   EpiSoon::example_obs_cases,   horizon_to_plot = 7 ) }"},{"path":"epiforecasts.io/EpiSoon/dev/reference/plot_scores.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot forecast scores — plot_scores","title":"Plot forecast scores — plot_scores","text":"Plot forecast scores","code":""},{"path":"epiforecasts.io/EpiSoon/dev/reference/plot_scores.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot forecast scores — plot_scores","text":"","code":"plot_scores()"},{"path":"epiforecasts.io/EpiSoon/dev/reference/plot_scores.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot forecast scores — plot_scores","text":"dataframe summarised scores tidy format.","code":""},{"path":"epiforecasts.io/EpiSoon/dev/reference/predict_cases.html","id":null,"dir":"Reference","previous_headings":"","what":"Predict cases for a single Rt sample forecasts — predict_cases","title":"Predict cases for a single Rt sample forecasts — predict_cases","text":"Predict cases single Rt sample forecasts","code":""},{"path":"epiforecasts.io/EpiSoon/dev/reference/predict_cases.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Predict cases for a single Rt sample forecasts — predict_cases","text":"","code":"predict_cases(   cases = NULL,   rts = NULL,   serial_interval = NULL,   forecast_date = NULL,   horizon = NULL,   rdist = NULL )"},{"path":"epiforecasts.io/EpiSoon/dev/reference/predict_cases.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Predict cases for a single Rt sample forecasts — predict_cases","text":"cases dataframe containing date cases variables rts dataframe containing two variables rt  date rt numeric date date. serial_interval numeric vector describing probability distribution serial interval. See EpiNow::covid_serial_interval example format. forecast_date character string date (format \"yyyy-mm-dd\") indicating forecast date. Defaults NULL case assumed forecast date last data present cases dataframe horizon Numeric, time horizon predict. rdist function used sample number cases. Must take two arguments first specfying number samples second mean. Defaults rpois supplied","code":""},{"path":"epiforecasts.io/EpiSoon/dev/reference/predict_cases.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Predict cases for a single Rt sample forecasts — predict_cases","text":"Forecast cases future forecast horizon","code":""},{"path":"epiforecasts.io/EpiSoon/dev/reference/predict_cases.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Predict cases for a single Rt sample forecasts — predict_cases","text":"","code":"forecast <- forecast_rt(EpiSoon::example_obs_rts[1:10, ],   model = function(...) {     EpiSoon::bsts_model(       model =         function(ss, y) {           bsts::AddSemilocalLinearTrend(ss, y = y)         }, ...     )   },   horizon = 7, samples = 1 )   purrr::map_dfr(1:100, ~ predict_cases(   cases = EpiSoon::example_obs_cases,   rts = forecast,   forecast_date = as.Date(\"2020-03-10\"),   serial_interval = example_serial_interval )) %>%   dplyr::group_by(date) %>%   dplyr::summarise(cases = mean(cases)) #> # A tibble: 7 × 2 #>   date       cases #>   <date>     <dbl> #> 1 2020-03-11  169. #> 2 2020-03-12  193. #> 3 2020-03-13  227. #> 4 2020-03-14  258. #> 5 2020-03-15  298. #> 6 2020-03-16  341. #> 7 2020-03-17  385."},{"path":"epiforecasts.io/EpiSoon/dev/reference/predict_current_cases.html","id":null,"dir":"Reference","previous_headings":"","what":"Predict cases for Rts based on observed data — predict_current_cases","title":"Predict cases for Rts based on observed data — predict_current_cases","text":"Predict cases Rts based observed data","code":""},{"path":"epiforecasts.io/EpiSoon/dev/reference/predict_current_cases.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Predict cases for Rts based on observed data — predict_current_cases","text":"","code":"predict_current_cases(   cases = NULL,   rts = NULL,   serial_interval = NULL,   rdist = NULL )"},{"path":"epiforecasts.io/EpiSoon/dev/reference/predict_current_cases.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Predict cases for Rts based on observed data — predict_current_cases","text":"cases dataframe containing date cases variables rts dataframe containing two variables rt  date rt numeric date date. serial_interval numeric vector describing probability distribution serial interval. See EpiNow::covid_serial_interval example format. rdist function used sample number cases. Must take two arguments first specfying number samples second mean. Defaults rpois supplied","code":""},{"path":"epiforecasts.io/EpiSoon/dev/reference/predict_current_cases.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Predict cases for Rts based on observed data — predict_current_cases","text":"Forecast cases current timestep","code":""},{"path":"epiforecasts.io/EpiSoon/dev/reference/predict_current_cases.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Predict cases for Rts based on observed data — predict_current_cases","text":"","code":"purrr::map_dfr(1:100, ~ predict_current_cases(   cases = EpiSoon::example_obs_cases,   rts = EpiSoon::example_obs_rts,   serial_interval = EpiSoon::example_serial_interval )) %>%   dplyr::group_by(date) %>%   dplyr::summarise(cases = mean(cases)) #> # A tibble: 22 × 2 #>    date       cases #>    <date>     <dbl> #>  1 2020-03-01  35.9 #>  2 2020-03-02  43.0 #>  3 2020-03-03  51.0 #>  4 2020-03-04  59.8 #>  5 2020-03-05  69.2 #>  6 2020-03-06  82.0 #>  7 2020-03-07  94.4 #>  8 2020-03-08 109.  #>  9 2020-03-09 129.  #> 10 2020-03-10 148   #> # … with 12 more rows"},{"path":"epiforecasts.io/EpiSoon/dev/reference/score_case_forecast.html","id":null,"dir":"Reference","previous_headings":"","what":"Score a case forecast — score_case_forecast","title":"Score a case forecast — score_case_forecast","text":"Score case forecast","code":""},{"path":"epiforecasts.io/EpiSoon/dev/reference/score_case_forecast.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Score a case forecast — score_case_forecast","text":"","code":"score_case_forecast(pred_cases, obs_cases, scores = \"all\")"},{"path":"epiforecasts.io/EpiSoon/dev/reference/score_case_forecast.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Score a case forecast — score_case_forecast","text":"pred_cases Dataframe predicted cases following variables: sample, date, cases forecast horizon. produced forecast_cases. obs_cases Dataframe observed cases following variables: date cases. scores Character vector defaulting \"\". Select scores return, default scores subset can returned.","code":""},{"path":"epiforecasts.io/EpiSoon/dev/reference/score_case_forecast.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Score a case forecast — score_case_forecast","text":"dataframe containing following scores per forecast timepoint: dss, crps, logs, bias, sharpness well forecast date time horizon.","code":""},{"path":"epiforecasts.io/EpiSoon/dev/reference/score_case_forecast.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Score a case forecast — score_case_forecast","text":"","code":"if (FALSE) { ## Fit a model (using a subset of observations) samples <- forecast_rt(EpiSoon::example_obs_rts[1:10, ],   model = function(...) {     EpiSoon::bsts_model(       model =         function(ss, y) {           bsts::AddSemilocalLinearTrend(ss, y = y)         }, ...     )   },   horizon = 7, samples = 10 )  pred_cases <- forecast_cases(   EpiSoon::example_obs_cases,   samples, EpiSoon::example_serial_interval )  ## Score the model fit (with observations during the time horizon of the forecast) score_case_forecast(pred_cases, EpiSoon::example_obs_cases)   ## Score the model fit (with observations during the time horizon of the forecast) score_case_forecast(pred_cases, EpiSoon::example_obs_cases, scores = c(\"crps\", \"sharpness\", \"bias\")) }"},{"path":"epiforecasts.io/EpiSoon/dev/reference/score_forecast.html","id":null,"dir":"Reference","previous_headings":"","what":"Score a Model Fit — score_forecast","title":"Score a Model Fit — score_forecast","text":"Score Model Fit","code":""},{"path":"epiforecasts.io/EpiSoon/dev/reference/score_forecast.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Score a Model Fit — score_forecast","text":"","code":"score_forecast(fit_samples, observations, scores = \"all\")"},{"path":"epiforecasts.io/EpiSoon/dev/reference/score_forecast.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Score a Model Fit — score_forecast","text":"fit_samples dataframe produced EpiSoon::forecast. observations dataframe observations score. contain date rt column. scores Character vector defaulting \"\". Select scores return, default scores subset can returned.","code":""},{"path":"epiforecasts.io/EpiSoon/dev/reference/score_forecast.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Score a Model Fit — score_forecast","text":"dataframe containing following scores per forecast timepoint: dss, crps, logs, bias, sharpness well forecast date time horizon.","code":""},{"path":"epiforecasts.io/EpiSoon/dev/reference/score_forecast.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Score a Model Fit — score_forecast","text":"","code":"if (FALSE) { ## Fit a model (using a subset of observations) samples <- forecast_rt(EpiSoon::example_obs_rts[1:10, ],   model = function(...) {     EpiSoon::bsts_model(       model =         function(ss, y) {           bsts::AddSemilocalLinearTrend(ss, y = y)         }, ...     )   },   horizon = 7, samples = 10 )  ## Score the model fit (with observations during the time horizon of the forecast) score_forecast(samples, EpiSoon::example_obs_rts)  ## Return just CRPS, bias and sharpness score_forecast(samples, EpiSoon::example_obs_rts, scores = c(\"crps\", \"sharpness\", \"bias\"))  ## Return just the CRPS score_forecast(samples, EpiSoon::example_obs_rts, scores = \"crps\") }"},{"path":"epiforecasts.io/EpiSoon/dev/reference/stackr_model.html","id":null,"dir":"Reference","previous_headings":"","what":"Stack Models According to CRPS — stackr_model","title":"Stack Models According to CRPS — stackr_model","text":"Provides wrapper different EpiSoon model wrappers generates mixture model models based (Continuous) Rank Probability Score list models supplied. models fit data period observations size weighting_period. Forecasts generated models time points weighting_period. Predictive samples generated individual models used create model weights ensemble based CRPS. models refitted entire timeseries predictions generated models. Draws individual model predictive samples used generate mixture model weights obtained previous step. weights computed using crps_weights package stackr minimise CRPS. function mixture_from_samples package used draw samples individual models form mixture models.","code":""},{"path":"epiforecasts.io/EpiSoon/dev/reference/stackr_model.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Stack Models According to CRPS — stackr_model","text":"","code":"stackr_model(   y = NULL,   models = NULL,   samples = NULL,   horizon = NULL,   weighting_period = 5,   verbose = TRUE )"},{"path":"epiforecasts.io/EpiSoon/dev/reference/stackr_model.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Stack Models According to CRPS — stackr_model","text":"y Numeric vector time points forecast models list models. Models must analogous form function(...){EpiSoon::fable_model(model = , ...)} function(...){EpiSoon::bsts_model(model = , ...)}. samples Numeric, number samples take. horizon Numeric, time horizon predict. weighting_period number recent timepoints hold generate weights mixture model verbose TRUE, gives message number observations small crps weighting","code":""},{"path":"epiforecasts.io/EpiSoon/dev/reference/stackr_model.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Stack Models According to CRPS — stackr_model","text":"dataframe predictions (columns representing time horizon rows representing samples).","code":""},{"path":"epiforecasts.io/EpiSoon/dev/reference/stackr_model.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Stack Models According to CRPS — stackr_model","text":"","code":"if (FALSE) {  # make list with models models <- list(   \"ARIMA\" = function(...) {     EpiSoon::fable_model(model = fable::ARIMA(y), ...)   },   \"ETS\" = function(...) {     EpiSoon::fable_model(model = fable::ETS(y), ...)   },   \"Drift\" = function(...) {     EpiSoon::fable_model(model = fable::RW(y ~ drift()), ...)   } )  # make forecast on its own forecast <- stackr_model(   y = EpiSoon::example_obs_rts[1:10, ]$rt,   models = models,   samples = 10,   horizon = 7,   weighting_period = 5 )   # together with forecast_rt fc_rt <- forecast_rt(EpiSoon::example_obs_rts[1:10, ],   model = function(...) {     stackr_model(       models = models,       weighting_period = 5,       ...     )   },   samples = 10,   horizon = 7 )  forecast_eval <- evaluate_model(EpiSoon::example_obs_rts,   EpiSoon::example_obs_cases,   model = function(...) {     stackr_model(       models = models,       weighting_period = 5,       ...     )   },   horizon = 7, samples = 10,   serial_interval = example_serial_interval,   min_points = 10 )  plot_forecast_evaluation(forecast_eval$forecast_rts,   EpiSoon::example_obs_rts,   horizon_to_plot = 7 ) }"},{"path":"epiforecasts.io/EpiSoon/dev/reference/summarise_case_forecast.html","id":null,"dir":"Reference","previous_headings":"","what":"Summarise Forecast Cases — summarise_case_forecast","title":"Summarise Forecast Cases — summarise_case_forecast","text":"Summarise Forecast Cases","code":""},{"path":"epiforecasts.io/EpiSoon/dev/reference/summarise_case_forecast.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Summarise Forecast Cases — summarise_case_forecast","text":"","code":"summarise_case_forecast(pred_cases)"},{"path":"epiforecasts.io/EpiSoon/dev/reference/summarise_case_forecast.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Summarise Forecast Cases — summarise_case_forecast","text":"pred_cases dataframe produced EpiSoon::forecast_cases.","code":""},{"path":"epiforecasts.io/EpiSoon/dev/reference/summarise_case_forecast.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Summarise Forecast Cases — summarise_case_forecast","text":"summarised dataframe.","code":""},{"path":"epiforecasts.io/EpiSoon/dev/reference/summarise_case_forecast.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Summarise Forecast Cases — summarise_case_forecast","text":"","code":"if (FALSE) { ## Example forecast forecast <- forecast_rt(EpiSoon::example_obs_rts,   model = function(...) {     EpiSoon::bsts_model(       model =         function(ss, y) {           bsts::AddSemilocalLinearTrend(ss, y = y)         }, ...     )   },   horizon = 7, samples = 10 )  ## Forecast cases case_forecast <- forecast_cases(   EpiSoon::example_obs_cases,   forecast,   EpiSoon::example_serial_interval ) ## Summarise case forecast summarise_case_forecast(case_forecast) }"},{"path":"epiforecasts.io/EpiSoon/dev/reference/summarise_forecast.html","id":null,"dir":"Reference","previous_headings":"","what":"Summarise Forecast Rts — summarise_forecast","title":"Summarise Forecast Rts — summarise_forecast","text":"Summarise Forecast Rts","code":""},{"path":"epiforecasts.io/EpiSoon/dev/reference/summarise_forecast.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Summarise Forecast Rts — summarise_forecast","text":"","code":"summarise_forecast(fit_samples)"},{"path":"epiforecasts.io/EpiSoon/dev/reference/summarise_forecast.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Summarise Forecast Rts — summarise_forecast","text":"fit_samples dataframe produced EpiSoon::forecast.","code":""},{"path":"epiforecasts.io/EpiSoon/dev/reference/summarise_forecast.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Summarise Forecast Rts — summarise_forecast","text":"summarised dataframe.","code":""},{"path":"epiforecasts.io/EpiSoon/dev/reference/summarise_forecast.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Summarise Forecast Rts — summarise_forecast","text":"","code":"if (FALSE) { samples <- forecast_rt(example_obs_rts,   model = function(...) {     EpiSoon::bsts_model(       model =         function(ss, y) {           bsts::AddSemilocalLinearTrend(ss, y = y)         }, ...     )   },   horizon = 7, samples = 10 )   summarise_forecast(samples) }"},{"path":"epiforecasts.io/EpiSoon/dev/reference/summarise_scores.html","id":null,"dir":"Reference","previous_headings":"","what":"Summarise model forecasting scores — summarise_scores","title":"Summarise model forecasting scores — summarise_scores","text":"Summarise model forecasting scores","code":""},{"path":"epiforecasts.io/EpiSoon/dev/reference/summarise_scores.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Summarise model forecasting scores — summarise_scores","text":"","code":"summarise_scores(scores, variables = NULL, sel_scores = NULL)"},{"path":"epiforecasts.io/EpiSoon/dev/reference/summarise_scores.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Summarise model forecasting scores — summarise_scores","text":"scores dataframe model scores produced score_model variables character vector variables names group . default score type model grouped present. sel_scores character vector indicating scores return information . Defaults scores","code":""},{"path":"epiforecasts.io/EpiSoon/dev/reference/summarise_scores.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Summarise model forecasting scores — summarise_scores","text":"dataframe summarised scores tidy format.","code":""},{"path":"epiforecasts.io/EpiSoon/dev/reference/summarise_scores.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Summarise model forecasting scores — summarise_scores","text":"","code":"if (FALSE) { ## Example cases cases <- EpiSoon::example_obs_cases %>%   dplyr::mutate(timeseries = \"Region 1\") %>%   dplyr::bind_rows(EpiSoon::example_obs_cases %>%     dplyr::mutate(timeseries = \"Region 2\"))   ## Example Rts rts <- EpiSoon::example_obs_rts %>%   dplyr::mutate(timeseries = \"Region 1\") %>%   dplyr::bind_rows(EpiSoon::example_obs_rts %>%     dplyr::mutate(timeseries = \"Region 2\"))  ## List of forecasting bsts models wrapped in functions. models <- list(   \"AR 3\" =     function(...) {       EpiSoon::bsts_model(         model =           function(ss, y) {             bsts::AddAr(ss, y = y, lags = 3)           }, ...       )     },   \"Semi-local linear trend\" =     function(...) {       EpiSoon::bsts_model(         model =           function(ss, y) {             bsts::AddSemilocalLinearTrend(ss, y = y)           }, ...       )     } )   ## Compare models evaluations <- compare_timeseries(rts, cases, models,   horizon = 7, samples = 10,   serial_interval = example_serial_interval )    ## Score across the default groups summarise_scores(evaluations$rt_scores)   ## Also summarise across time horizon summarise_scores(evaluations$rt_scores, \"horizon\", sel_scores = \"crps\")  ## Instead summarise across region and summarise case scores summarise_scores(evaluations$case_scores, \"timeseries\", sel_scores = \"logs\") }"},{"path":"epiforecasts.io/EpiSoon/dev/news/index.html","id":"episoon-031","dir":"Changelog","previous_headings":"","what":"EpiSoon 0.3.1","title":"EpiSoon 0.3.1","text":"Updated GitHub Actions Updated tidyverse code usage account depreciation. Updated pkgdown site use pkgdown 2.0.0. Updated uses size linewidth account depreciation ggplot2 line geoms.","code":""},{"path":"epiforecasts.io/EpiSoon/dev/news/index.html","id":"episoon-030","dir":"Changelog","previous_headings":"","what":"EpiSoon 0.3.0","title":"EpiSoon 0.3.0","text":"Reviewed updated tooling examples Added documentation Bugs squashed.","code":""},{"path":"epiforecasts.io/EpiSoon/dev/news/index.html","id":"episoon-020","dir":"Changelog","previous_headings":"","what":"EpiSoon 0.2.0","title":"EpiSoon 0.2.0","text":"Added NEWS.md file track changes package. Added dev support multiple samples evaluate_model higher order functions. Note user expected manage lower level functions. Renamed models reflect forecasting fitting. Updated docs reflect changes. Added case prediction scoring framework","code":""}]
