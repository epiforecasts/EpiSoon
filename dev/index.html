<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="To forecast the time-varying reproduction number and use this to forecast reported case counts. Includes
             tools to evaluate a range of models across samples and time series using proper scoring rules.">
<title>Forecast Cases Using Reproduction Numbers â€¢ EpiSoon</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Forecast Cases Using Reproduction Numbers">
<meta property="og:description" content="To forecast the time-varying reproduction number and use this to forecast reported case counts. Includes
             tools to evaluate a range of models across samples and time series using proper scoring rules.">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:creator" content="@seabbs">
<meta name="twitter:site" content="@epiforecasts">
<meta name="robots" content="noindex">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">EpiSoon</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">0.3.0.1000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="articles/introduction.html">Getting started</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="episoon">EpiSoon<a class="anchor" aria-label="anchor" href="#episoon"></a>
</h1></div>
<p><a href="https://github.com/epiforecasts/EpiSoon" class="external-link"><img src="https://github.com/epiforecasts/EpiSoon/workflows/R-CMD-check/badge.svg" alt="R build status"></a> <a href="https://hub.docker.com/repository/docker/seabbs/episoon" class="external-link"><img src="https://img.shields.io/docker/pulls/seabbs/episoon" alt="Docker Pulls"></a> <a href="https://zenodo.org/badge/latestdoi/248311916" class="external-link"><img src="https://zenodo.org/badge/248311916.svg" alt="DOI"></a></p>
<p>This package provides tooling to forecast the time-varying reproduction number and use this to forecast reported case counts via a branching process. It supports a range of time series modelling packages including <code>bsts</code>, <code>forecast</code>, and <code>fable</code>. It also supports ensembles via <code>stackr</code> and <code>forecastHyrbid</code>. Forecasts can be assessed by iteractively fitting and then using proper scoring rules (via <code>scoringutils</code> and <code>scoringRules</code>) to compare to both observed case counts and estimated reproduction numbers. Whilst <code>EpiSoon</code> is primarily developed to be used in tandem with <code>EpiNow</code> it can also be used as a standalone package.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>Install the stable version of the package using <a href="https://epiforecasts.io/drat/" class="external-link"><code>{drat}</code></a>:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"drat"</span><span class="op">)</span></span>
<span><span class="fu">drat</span><span class="fu">:::</span><span class="fu">add</span><span class="op">(</span><span class="st">"epiforecasts"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"EpiSoon"</span><span class="op">)</span></span></code></pre></div>
<p>Install the development version of the package with:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"epiforecasts/EpiSoon"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="quick-start">Quick start<a class="anchor" aria-label="anchor" href="#quick-start"></a>
</h2>
<ul>
<li>Load packages (<code>bsts</code> and <code>fable</code> for models, <code>ggplot2</code> for plotting, and <code>cowplot</code> for theming)</li>
</ul>
<!-- end list --><div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">EpiSoon</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">bsts</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://fable.tidyverts.org" class="external-link">fable</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning in system("timedatectl", intern = TRUE): running command 'timedatectl'</span></span>
<span><span class="co">#&gt; had status 1</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://future.futureverse.org" class="external-link">future</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://wilkelab.org/cowplot/" class="external-link">cowplot</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></code></pre></div>
<ul>
<li>Set up example data (using <code><a href="reference/example_obs_rts.html">EpiSoon::example_obs_rts</a></code> and <code><a href="reference/example_obs_cases.html">EpiSoon::example_obs_cases</a></code> as starting data sets). When generating timeseries with <code>EpiNow</code> use <code>get_timeseries</code> to extract the required data.</li>
</ul>
<!-- end list --><div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">obs_rts</span> <span class="op">&lt;-</span> <span class="fu">EpiSoon</span><span class="fu">::</span><span class="va"><a href="reference/example_obs_rts.html">example_obs_rts</a></span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>   <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>timeseries <span class="op">=</span> <span class="st">"Region 1"</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>   <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html" class="external-link">bind_rows</a></span><span class="op">(</span><span class="fu">EpiSoon</span><span class="fu">::</span><span class="va"><a href="reference/example_obs_rts.html">example_obs_rts</a></span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>timeseries <span class="op">=</span> <span class="st">"Region 2"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">obs_cases</span> <span class="op">&lt;-</span> <span class="fu">EpiSoon</span><span class="fu">::</span><span class="va"><a href="reference/example_obs_cases.html">example_obs_cases</a></span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>   <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>timeseries <span class="op">=</span> <span class="st">"Region 1"</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>   <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html" class="external-link">bind_rows</a></span><span class="op">(</span><span class="fu">EpiSoon</span><span class="fu">::</span><span class="va"><a href="reference/example_obs_cases.html">example_obs_cases</a></span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>   <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>timeseries <span class="op">=</span> <span class="st">"Region 2"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<ul>
<li>Define the list of models to be compared.</li>
</ul>
<!-- end list --><div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">models</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"AR 3"</span> <span class="op">=</span></span>
<span>                <span class="kw">function</span><span class="op">(</span><span class="va">...</span><span class="op">)</span> <span class="op">{</span><span class="fu">EpiSoon</span><span class="fu">::</span><span class="fu"><a href="reference/bsts_model.html">bsts_model</a></span><span class="op">(</span>model <span class="op">=</span></span>
<span>                     <span class="kw">function</span><span class="op">(</span><span class="va">ss</span>, <span class="va">y</span><span class="op">)</span><span class="op">{</span><span class="fu">bsts</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/bsts/man/add.ar.html" class="external-link">AddAr</a></span><span class="op">(</span><span class="va">ss</span>, y <span class="op">=</span> <span class="va">y</span>, lags <span class="op">=</span> <span class="fl">3</span><span class="op">)</span><span class="op">}</span>, <span class="va">...</span><span class="op">)</span><span class="op">}</span>,</span>
<span>               <span class="st">"Semi-local linear trend"</span> <span class="op">=</span></span>
<span>                <span class="kw">function</span><span class="op">(</span><span class="va">...</span><span class="op">)</span> <span class="op">{</span><span class="fu">EpiSoon</span><span class="fu">::</span><span class="fu"><a href="reference/bsts_model.html">bsts_model</a></span><span class="op">(</span>model <span class="op">=</span></span>
<span>                    <span class="kw">function</span><span class="op">(</span><span class="va">ss</span>, <span class="va">y</span><span class="op">)</span><span class="op">{</span><span class="fu">bsts</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/bsts/man/add.semilocal.linear.trend.html" class="external-link">AddSemilocalLinearTrend</a></span><span class="op">(</span><span class="va">ss</span>, y <span class="op">=</span> <span class="va">y</span><span class="op">)</span><span class="op">}</span>, <span class="va">...</span><span class="op">)</span><span class="op">}</span>,</span>
<span>               <span class="st">"ARIMA"</span> <span class="op">=</span> </span>
<span>                    <span class="kw">function</span><span class="op">(</span><span class="va">...</span><span class="op">)</span><span class="op">{</span><span class="fu">EpiSoon</span><span class="fu">::</span><span class="fu"><a href="reference/fable_model.html">fable_model</a></span><span class="op">(</span>model <span class="op">=</span> <span class="fu">fable</span><span class="fu">::</span><span class="fu"><a href="https://fable.tidyverts.org/reference/ARIMA.html" class="external-link">ARIMA</a></span><span class="op">(</span><span class="va">y</span> <span class="op">~</span> <span class="va">time</span><span class="op">)</span>, <span class="va">...</span><span class="op">)</span><span class="op">}</span><span class="op">)</span></span></code></pre></div>
<ul>
<li>Compare models across timeseries (change the <code><a href="https://future.futureverse.org/reference/plan.html" class="external-link">future::plan</a></code> to do this in parallel).</li>
</ul>
<!-- end list --><div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">future</span><span class="fu">::</span><span class="fu"><a href="https://future.futureverse.org/reference/plan.html" class="external-link">plan</a></span><span class="op">(</span><span class="st">"sequential"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## Compare models</span></span>
<span><span class="va">forecasts</span> <span class="op">&lt;-</span> <span class="fu">EpiSoon</span><span class="fu">::</span><span class="fu"><a href="reference/compare_timeseries.html">compare_timeseries</a></span><span class="op">(</span><span class="va">obs_rts</span>, <span class="va">obs_cases</span>, <span class="va">models</span>,</span>
<span>                                         horizon <span class="op">=</span> <span class="fl">7</span>, samples <span class="op">=</span> <span class="fl">10</span>,</span>
<span>                                         serial_interval <span class="op">=</span> <span class="fu">EpiSoon</span><span class="fu">::</span><span class="va"><a href="reference/example_serial_interval.html">example_serial_interval</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: Unknown or uninitialised column: `sample`.</span></span>
<span></span>
<span><span class="co">#&gt; Warning: Unknown or uninitialised column: `sample`.</span></span>
<span></span>
<span><span class="va">forecasts</span></span>
<span><span class="co">#&gt; $forecast_rts</span></span>
<span><span class="co">#&gt; # A tibble: 532 x 12</span></span>
<span><span class="co">#&gt;    timeseries model forecast_date date       horizon median   mean    sd bottom</span></span>
<span><span class="co">#&gt;    &lt;chr&gt;      &lt;chr&gt; &lt;chr&gt;         &lt;date&gt;       &lt;int&gt;  &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;</span></span>
<span><span class="co">#&gt;  1 Region 1   AR 3  2020-03-04    2020-03-05       1  1.24  2.35   3.49       0</span></span>
<span><span class="co">#&gt;  2 Region 1   AR 3  2020-03-04    2020-03-06       2  1.75  2.09   2.77       0</span></span>
<span><span class="co">#&gt;  3 Region 1   AR 3  2020-03-04    2020-03-07       3  0     1.96   4.07       0</span></span>
<span><span class="co">#&gt;  4 Region 1   AR 3  2020-03-04    2020-03-08       4  0     1.30   2.49       0</span></span>
<span><span class="co">#&gt;  5 Region 1   AR 3  2020-03-04    2020-03-09       5  0     0.564  1.07       0</span></span>
<span><span class="co">#&gt;  6 Region 1   AR 3  2020-03-04    2020-03-10       6  0.832 1.60   2.23       0</span></span>
<span><span class="co">#&gt;  7 Region 1   AR 3  2020-03-04    2020-03-11       7  1.45  1.49   1.45       0</span></span>
<span><span class="co">#&gt;  8 Region 1   AR 3  2020-03-05    2020-03-06       1  0     0.0907 0.287      0</span></span>
<span><span class="co">#&gt;  9 Region 1   AR 3  2020-03-05    2020-03-07       2  0     0.591  0.970      0</span></span>
<span><span class="co">#&gt; 10 Region 1   AR 3  2020-03-05    2020-03-08       3  0     0.710  1.66       0</span></span>
<span><span class="co">#&gt; # â€¦ with 522 more rows, and 3 more variables: lower &lt;dbl&gt;, upper &lt;dbl&gt;,</span></span>
<span><span class="co">#&gt; #   top &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $rt_scores</span></span>
<span><span class="co">#&gt; # A tibble: 420 x 14</span></span>
<span><span class="co">#&gt;    timeseries model forecast_date date       horizon    dss  crps   logs   bias</span></span>
<span><span class="co">#&gt;    &lt;chr&gt;      &lt;chr&gt; &lt;chr&gt;         &lt;date&gt;       &lt;int&gt;  &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;</span></span>
<span><span class="co">#&gt;  1 Region 1   AR 3  2020-03-04    2020-03-05       1  2.39  0.766   1.98 -0.200</span></span>
<span><span class="co">#&gt;  2 Region 1   AR 3  2020-03-04    2020-03-06       2  1.93  0.509   1.64 -0.200</span></span>
<span><span class="co">#&gt;  3 Region 1   AR 3  2020-03-04    2020-03-07       3  2.70  1.37    6.40 -0.6  </span></span>
<span><span class="co">#&gt;  4 Region 1   AR 3  2020-03-04    2020-03-08       4  1.83  1.26    4.87 -0.6  </span></span>
<span><span class="co">#&gt;  5 Region 1   AR 3  2020-03-04    2020-03-09       5  2.19  1.30    3.78 -0.8  </span></span>
<span><span class="co">#&gt;  6 Region 1   AR 3  2020-03-04    2020-03-10       6  1.54  0.719   1.93 -0.6  </span></span>
<span><span class="co">#&gt;  7 Region 1   AR 3  2020-03-04    2020-03-11       7  0.780 0.463   1.52 -0.400</span></span>
<span><span class="co">#&gt;  8 Region 1   AR 3  2020-03-05    2020-03-06       1 57.0   2.02  Inf    -1    </span></span>
<span><span class="co">#&gt;  9 Region 1   AR 3  2020-03-05    2020-03-07       2  2.69  1.20    1.74 -0.6  </span></span>
<span><span class="co">#&gt; 10 Region 1   AR 3  2020-03-05    2020-03-08       3  1.69  1.42   16.0  -0.8  </span></span>
<span><span class="co">#&gt; # â€¦ with 410 more rows, and 5 more variables: sharpness &lt;dbl&gt;,</span></span>
<span><span class="co">#&gt; #   calibration &lt;dbl&gt;, median &lt;dbl&gt;, iqr &lt;dbl&gt;, ci &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $forecast_cases</span></span>
<span><span class="co">#&gt; # A tibble: 420 x 12</span></span>
<span><span class="co">#&gt;    timeseries model forecast_date date       horizon median  mean    sd bottom</span></span>
<span><span class="co">#&gt;    &lt;chr&gt;      &lt;chr&gt; &lt;chr&gt;         &lt;date&gt;       &lt;int&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;</span></span>
<span><span class="co">#&gt;  1 Region 1   AR 3  2020-03-04    2020-03-05       1   37.5  70.3 104.       0</span></span>
<span><span class="co">#&gt;  2 Region 1   AR 3  2020-03-04    2020-03-06       2   61    77.7  98.1      0</span></span>
<span><span class="co">#&gt;  3 Region 1   AR 3  2020-03-04    2020-03-07       3    0   168.  421.       0</span></span>
<span><span class="co">#&gt;  4 Region 1   AR 3  2020-03-04    2020-03-08       4    0    89.4 228.       0</span></span>
<span><span class="co">#&gt;  5 Region 1   AR 3  2020-03-04    2020-03-09       5    0    17.9  35.7      0</span></span>
<span><span class="co">#&gt;  6 Region 1   AR 3  2020-03-04    2020-03-10       6   27   248   609.       0</span></span>
<span><span class="co">#&gt;  7 Region 1   AR 3  2020-03-04    2020-03-11       7   39   136.  177.       0</span></span>
<span><span class="co">#&gt;  8 Region 1   AR 3  2020-03-05    2020-03-06       1    0     4    12.6      0</span></span>
<span><span class="co">#&gt;  9 Region 1   AR 3  2020-03-05    2020-03-07       2    0    24.2  40.0      0</span></span>
<span><span class="co">#&gt; 10 Region 1   AR 3  2020-03-05    2020-03-08       3    0    26.7  69.1      0</span></span>
<span><span class="co">#&gt; # â€¦ with 410 more rows, and 3 more variables: lower &lt;dbl&gt;, upper &lt;dbl&gt;,</span></span>
<span><span class="co">#&gt; #   top &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $case_scores</span></span>
<span><span class="co">#&gt; # A tibble: 420 x 15</span></span>
<span><span class="co">#&gt;    timeseries model sample forecast_date date       horizon   dss  crps   logs</span></span>
<span><span class="co">#&gt;    &lt;chr&gt;      &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt;         &lt;date&gt;       &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;</span></span>
<span><span class="co">#&gt;  1 Region 1   AR 3  1      2020-03-04    2020-03-05       1  9.18  21.9   5.34</span></span>
<span><span class="co">#&gt;  2 Region 1   AR 3  1      2020-03-04    2020-03-06       2  9.07  19.5   5.32</span></span>
<span><span class="co">#&gt;  3 Region 1   AR 3  1      2020-03-04    2020-03-07       3 12.0   68.1  18.2 </span></span>
<span><span class="co">#&gt;  4 Region 1   AR 3  1      2020-03-04    2020-03-08       4 10.8   64.1   6.21</span></span>
<span><span class="co">#&gt;  5 Region 1   AR 3  1      2020-03-04    2020-03-09       5 15.4   83.8   5.81</span></span>
<span><span class="co">#&gt;  6 Region 1   AR 3  1      2020-03-04    2020-03-10       6 12.8   88.7   7.54</span></span>
<span><span class="co">#&gt;  7 Region 1   AR 3  1      2020-03-04    2020-03-11       7 10.3   79.0   6.58</span></span>
<span><span class="co">#&gt;  8 Region 1   AR 3  1      2020-03-05    2020-03-06       1 38.0   65.4 Inf   </span></span>
<span><span class="co">#&gt;  9 Region 1   AR 3  1      2020-03-05    2020-03-07       2 10.1   49.8   5.56</span></span>
<span><span class="co">#&gt; 10 Region 1   AR 3  1      2020-03-05    2020-03-08       3  9.69  76.0 284.  </span></span>
<span><span class="co">#&gt; # â€¦ with 410 more rows, and 6 more variables: bias &lt;dbl&gt;, sharpness &lt;dbl&gt;,</span></span>
<span><span class="co">#&gt; #   calibration &lt;dbl&gt;, median &lt;dbl&gt;, iqr &lt;dbl&gt;, ci &lt;dbl&gt;</span></span></code></pre></div>
<ul>
<li>Plot an evaluation of Rt forecasts using iterative fitting.</li>
</ul>
<!-- end list --><div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">EpiSoon</span><span class="fu">::</span><span class="fu"><a href="reference/plot_forecast_evaluation.html">plot_forecast_evaluation</a></span><span class="op">(</span><span class="va">forecasts</span><span class="op">$</span><span class="va">forecast_rts</span>, <span class="va">obs_rts</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">7</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>   <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_grid.html" class="external-link">facet_grid</a></span><span class="op">(</span><span class="va">model</span> <span class="op">~</span> <span class="va">timeseries</span><span class="op">)</span> <span class="op">+</span></span>
<span>   <span class="fu">cowplot</span><span class="fu">::</span><span class="fu"><a href="https://wilkelab.org/cowplot/reference/panel_border.html" class="external-link">panel_border</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/unnamed-chunk-6-1.png" width="60%"></p>
<ul>
<li>Plot an evaluation of case forecasts using iterative fitting</li>
</ul>
<!-- end list --><div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">EpiSoon</span><span class="fu">::</span><span class="fu"><a href="reference/plot_forecast_evaluation.html">plot_forecast_evaluation</a></span><span class="op">(</span><span class="va">forecasts</span><span class="op">$</span><span class="va">forecast_cases</span>, <span class="va">obs_cases</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">7</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>   <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_grid.html" class="external-link">facet_grid</a></span><span class="op">(</span><span class="va">model</span> <span class="op">~</span> <span class="va">timeseries</span>, scales <span class="op">=</span> <span class="st">"free"</span><span class="op">)</span> <span class="op">+</span></span>
<span>   <span class="fu">cowplot</span><span class="fu">::</span><span class="fu"><a href="https://wilkelab.org/cowplot/reference/panel_border.html" class="external-link">panel_border</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/unnamed-chunk-7-1.png" width="60%"></p>
<ul>
<li>Summarise the forecasts by model scored against observed cases</li>
</ul>
<!-- end list --><div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">EpiSoon</span><span class="fu">::</span><span class="fu"><a href="reference/summarise_scores.html">summarise_scores</a></span><span class="op">(</span><span class="va">forecasts</span><span class="op">$</span><span class="va">case_scores</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 18 x 9</span></span>
<span><span class="co">#&gt;    score  model   bottom    lower   median      mean    upper      top        sd</span></span>
<span><span class="co">#&gt;    &lt;chr&gt;  &lt;chr&gt;    &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;</span></span>
<span><span class="co">#&gt;  1 bias   AR 3  -1.00e+0 -8.00e-1 -8.00e-1   -0.69   -6.00e-1   -0.200    0.249 </span></span>
<span><span class="co">#&gt;  2 bias   Semiâ€¦ -1.00e+0  2.00e-1  6.00e-1    0.492   1.00e+0    1        0.554 </span></span>
<span><span class="co">#&gt;  3 calibâ€¦ AR 3   8.57e-5  8.57e-5  8.57e-5    0.0215  1.33e-3    0.181    0.0814</span></span>
<span><span class="co">#&gt;  4 calibâ€¦ Semiâ€¦  8.57e-5  8.57e-5  8.57e-5    0.0615  5.52e-4    0.834    0.164 </span></span>
<span><span class="co">#&gt;  5 ci     AR 3   1.34e+2  3.60e+2  6.31e+2 1421.      1.32e+3 7967.    2035.    </span></span>
<span><span class="co">#&gt;  6 ci     Semiâ€¦  2.61e+1  4.98e+1  1.09e+2  947.      1.41e+3 5420.    1592.    </span></span>
<span><span class="co">#&gt;  7 crps   AR 3   3.53e+1  8.94e+1  1.35e+2  152.      1.96e+2  362.      87.3   </span></span>
<span><span class="co">#&gt;  8 crps   Semiâ€¦  3.44e+0  6.66e+0  1.53e+1   40.8     7.01e+1  161.      48.8   </span></span>
<span><span class="co">#&gt;  9 dss    AR 3   9.13e+0  1.09e+1  1.19e+1   16.2     1.35e+1   53.9     20.1   </span></span>
<span><span class="co">#&gt; 10 dss    Semiâ€¦  4.72e+0  6.13e+0  7.80e+0   13.2     1.40e+1   50.3     16.5   </span></span>
<span><span class="co">#&gt; 11 iqr    AR 3   1.25e+2  3.57e+2  5.72e+2  677.      9.11e+2 1776.     440.    </span></span>
<span><span class="co">#&gt; 12 iqr    Semiâ€¦  1.36e+1  2.92e+1  6.80e+1  178.      3.09e+2  675.     208.    </span></span>
<span><span class="co">#&gt; 13 logs   AR 3   5.61e+0  6.64e+0  7.33e+0  Inf       1.17e+1  Inf      Inf     </span></span>
<span><span class="co">#&gt; 14 logs   Semiâ€¦  3.37e+0  4.09e+0  4.80e+0  Inf       7.29e+0   47.6    Inf     </span></span>
<span><span class="co">#&gt; 15 median AR 3   1.15e+2  2.66e+2  4.36e+2  472.      5.92e+2 1119.     262.    </span></span>
<span><span class="co">#&gt; 16 median Semiâ€¦  2.00e+0  1.60e+1  4.75e+1  100.      1.70e+2  340.     112.    </span></span>
<span><span class="co">#&gt; 17 sharpâ€¦ AR 3   0.       0.       1.11e+1   58.5     7.01e+1  386.      99.6   </span></span>
<span><span class="co">#&gt; 18 sharpâ€¦ Semiâ€¦  6.67e+0  1.35e+1  2.15e+1   26.7     3.41e+1   76.8     18.7</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="contributing">Contributing<a class="anchor" aria-label="anchor" href="#contributing"></a>
</h2>
<p>File an issue <a href="https://github.com/epiforecasts/EpiSoon/issues" class="external-link">here</a> if you have identified an issue with the package. Please note that due to operational constraints priority will be given to users informing government policy or offering methodological insights. We welcome all contributions, in particular those that improve the approach or the robustness of the code base.</p>
</div>
<div class="section level2">
<h2 id="docker">Docker<a class="anchor" aria-label="anchor" href="#docker"></a>
</h2>
<p>This package was developed in a docker container based on the <code>rocker/geospatial</code> docker image.</p>
<p>To build the docker image run (from the <code>EpiSoon</code> directory):</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> build . <span class="at">-t</span> episoon</span></code></pre></div>
<p>To run the docker image run:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> run <span class="at">-d</span> <span class="at">-p</span> 8787:8787 <span class="at">--name</span> episoon <span class="at">-e</span> USER=episoon <span class="at">-e</span> PASSWORD=episoon episoon</span></code></pre></div>
<p>The rstudio client can be found on port :8787 at your local machines ip. The default username:password is epinow:epinow, set the user with -e USER=username, and the password with - e PASSWORD=newpasswordhere. The default is to save the analysis files into the user directory.</p>
<p>To mount a folder (from your current working directory - here assumed to be <code>tmp</code>) in the docker container to your local system use the following in the above docker run command (as given mounts the whole <code>episoon</code> directory to <code>tmp</code>).</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="ex">--mount</span> type=bind,source=<span class="va">$(</span><span class="bu">pwd</span><span class="va">)</span>/tmp,target=/home/EpiSoon</span></code></pre></div>
<p>To access the command line run the following:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> exec <span class="at">-ti</span> episoon bash</span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing EpiSoon</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>
<a href="https://www.samabbott.co.uk/" class="external-link">Sam Abbott</a> <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0001-8057-8037" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Nikos Bosse <br><small class="roles"> Author </small>  </li>
<li>Joel Hellewell <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0003-2683-0849" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Katharine Sherratt <br><small class="roles"> Author </small>  </li>
<li>James Munday <br><small class="roles"> Author </small>  </li>
<li>Robin Thompson <br><small class="roles"> Author </small>  </li>
<li>Aurelien Chateigner <br><small class="roles"> Author </small>  </li>
<li>Sylvain Mareschal <br><small class="roles"> Author </small>  </li>
<li>Andrea Rau <br><small class="roles"> Author </small>  </li>
<li>Nathalie Vialaneix <br><small class="roles"> Author </small>  </li>
<li>Michael DeWitt <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0001-8940-1967" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>
<a href="https://www.lshtm.ac.uk/aboutus/people/funk.sebastian" class="external-link">Sebastian Funk</a> <br><small class="roles"> Author </small>  </li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by <a href="https://www.samabbott.co.uk/" class="external-link">Sam Abbott</a>, Nikos Bosse, Joel Hellewell, Katharine Sherratt, James Munday, Robin Thompson, Aurelien Chateigner, Sylvain Mareschal, Andrea Rau, Nathalie Vialaneix, Michael DeWitt, <a href="https://www.lshtm.ac.uk/aboutus/people/funk.sebastian" class="external-link">Sebastian Funk</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
