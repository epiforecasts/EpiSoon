<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Forecast Cases Using Reproduction Numbers • EpiSoon</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/lumen/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Forecast Cases Using Reproduction Numbers">
<meta property="og:description" content="To forecast the time-varying reproduction number and use this to forecast reported case counts. Includes
             tools to evaluate a range of models across samples and time series using proper scoring rules.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">EpiSoon</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.3.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="articles/introduction.html">Getting started</a>
</li>
<li>
  <a href="news/index.html">News</a>
</li>
<li>
  <a href="reference/index.html">
    <span class="fa fa-file-code-o"></span>
     
    Functions
  </a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/epiforecasts/EpiSoon">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="episoon" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#episoon" class="anchor"></a>EpiSoon</h1></div>

<p>This package provides tooling to forecast the time-varying reproduction number and use this to forecast reported case counts via a branching process. It supports a range of time series modelling packages including <code>bsts</code>, <code>forecast</code>, and <code>fable</code>. It also supports ensembles via <code>stackr</code> and <code>forecastHyrbid</code>. Forecasts can be assessed by iteractively fitting and then using proper scoring rules (via <code>scoringutils</code> and <code>scoringRules</code>) to compare to both observed case counts and estimated reproduction numbers. Whilst <code>EpiSoon</code> is primarily developed to be used in tandem with <code>EpiNow</code> it can also be used as a standalone package.</p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>Install the stable version of the package using <a href="https://epiforecasts.io/drat/"><code>{drat}</code></a>:</p>
<div class="sourceCode" id="cb1"><pre class="r"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span>(<span class="st">"drat"</span>)
<span class="kw pkg">drat</span><span class="kw ns">::</span><span class="fu">add</span>(<span class="st">"epiforecasts"</span>)
<span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span>(<span class="st">"EpiSoon"</span>)</pre></div>
<p>Install the development version of the package with:</p>
<div class="sourceCode" id="cb2"><pre class="r"><span class="kw pkg">remotes</span><span class="kw ns">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html">install_github</a></span>(<span class="st">"epiforecasts/EpiSoon"</span>)</pre></div>
</div>
<div id="quick-start" class="section level2">
<h2 class="hasAnchor">
<a href="#quick-start" class="anchor"></a>Quick start</h2>
<ul>
<li>Load packages (<code>bsts</code> and <code>fable</code> for models, <code>ggplot2</code> for plotting, and <code>cowplot</code> for theming)</li>
</ul>
<!-- end list --><div class="sourceCode" id="cb3"><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">EpiSoon</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">bsts</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">fable</span>)
<span class="co">#&gt; Warning in system("timedatectl", intern = TRUE): running command 'timedatectl'</span>
<span class="co">#&gt; had status 1</span>
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">future</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">cowplot</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">dplyr</span>)</pre></div>
<ul>
<li>Set up example data (using <code><a href="reference/example_obs_rts.html">EpiSoon::example_obs_rts</a></code> and <code><a href="reference/example_obs_cases.html">EpiSoon::example_obs_cases</a></code> as starting data sets). When generating timeseries with <code>EpiNow</code> use <code>get_timeseries</code> to extract the required data.</li>
</ul>
<!-- end list --><div class="sourceCode" id="cb4"><pre class="r"><span class="no">obs_rts</span> <span class="kw">&lt;-</span> <span class="kw pkg">EpiSoon</span><span class="kw ns">::</span><span class="no"><a href="reference/example_obs_rts.html">example_obs_rts</a></span> <span class="kw">%&gt;%</span>
   <span class="kw pkg">dplyr</span><span class="kw ns">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="kw">timeseries</span> <span class="kw">=</span> <span class="st">"Region 1"</span>) <span class="kw">%&gt;%</span>
   <span class="kw pkg">dplyr</span><span class="kw ns">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind.html">bind_rows</a></span>(<span class="kw pkg">EpiSoon</span><span class="kw ns">::</span><span class="no"><a href="reference/example_obs_rts.html">example_obs_rts</a></span> <span class="kw">%&gt;%</span>
  <span class="kw pkg">dplyr</span><span class="kw ns">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="kw">timeseries</span> <span class="kw">=</span> <span class="st">"Region 2"</span>))

<span class="no">obs_cases</span> <span class="kw">&lt;-</span> <span class="kw pkg">EpiSoon</span><span class="kw ns">::</span><span class="no"><a href="reference/example_obs_cases.html">example_obs_cases</a></span> <span class="kw">%&gt;%</span>
   <span class="kw pkg">dplyr</span><span class="kw ns">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="kw">timeseries</span> <span class="kw">=</span> <span class="st">"Region 1"</span>) <span class="kw">%&gt;%</span>
   <span class="kw pkg">dplyr</span><span class="kw ns">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind.html">bind_rows</a></span>(<span class="kw pkg">EpiSoon</span><span class="kw ns">::</span><span class="no"><a href="reference/example_obs_cases.html">example_obs_cases</a></span> <span class="kw">%&gt;%</span>
   <span class="kw pkg">dplyr</span><span class="kw ns">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="kw">timeseries</span> <span class="kw">=</span> <span class="st">"Region 2"</span>))</pre></div>
<ul>
<li>Define the list of models to be compared.</li>
</ul>
<!-- end list --><div class="sourceCode" id="cb5"><pre class="r"><span class="no">models</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="st">"AR 3"</span> <span class="kw">=</span>
                <span class="kw">function</span>(<span class="no">...</span>) {<span class="kw pkg">EpiSoon</span><span class="kw ns">::</span><span class="fu"><a href="reference/bsts_model.html">bsts_model</a></span>(<span class="kw">model</span> <span class="kw">=</span>
                     <span class="kw">function</span>(<span class="no">ss</span>, <span class="no">y</span>){<span class="kw pkg">bsts</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/bsts/man/add.ar.html">AddAr</a></span>(<span class="no">ss</span>, <span class="kw">y</span> <span class="kw">=</span> <span class="no">y</span>, <span class="kw">lags</span> <span class="kw">=</span> <span class="fl">3</span>)}, <span class="no">...</span>)},
               <span class="st">"Semi-local linear trend"</span> <span class="kw">=</span>
                <span class="kw">function</span>(<span class="no">...</span>) {<span class="kw pkg">EpiSoon</span><span class="kw ns">::</span><span class="fu"><a href="reference/bsts_model.html">bsts_model</a></span>(<span class="kw">model</span> <span class="kw">=</span>
                    <span class="kw">function</span>(<span class="no">ss</span>, <span class="no">y</span>){<span class="kw pkg">bsts</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/bsts/man/add.semilocal.linear.trend.html">AddSemilocalLinearTrend</a></span>(<span class="no">ss</span>, <span class="kw">y</span> <span class="kw">=</span> <span class="no">y</span>)}, <span class="no">...</span>)},
               <span class="st">"ARIMA"</span> <span class="kw">=</span>
                    <span class="kw">function</span>(<span class="no">...</span>){<span class="kw pkg">EpiSoon</span><span class="kw ns">::</span><span class="fu"><a href="reference/fable_model.html">fable_model</a></span>(<span class="kw">model</span> <span class="kw">=</span> <span class="kw pkg">fable</span><span class="kw ns">::</span><span class="fu"><a href="https://fable.tidyverts.org/reference/ARIMA.html">ARIMA</a></span>(<span class="no">y</span> ~ <span class="no">time</span>), <span class="no">...</span>)})</pre></div>
<ul>
<li>Compare models across timeseries (change the <code><a href="https://rdrr.io/pkg/future/man/plan.html">future::plan</a></code> to do this in parallel).</li>
</ul>
<!-- end list --><div class="sourceCode" id="cb6"><pre class="r"><span class="kw pkg">future</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/future/man/plan.html">plan</a></span>(<span class="st">"sequential"</span>)

<span class="co">## Compare models</span>
<span class="no">forecasts</span> <span class="kw">&lt;-</span> <span class="kw pkg">EpiSoon</span><span class="kw ns">::</span><span class="fu"><a href="reference/compare_timeseries.html">compare_timeseries</a></span>(<span class="no">obs_rts</span>, <span class="no">obs_cases</span>, <span class="no">models</span>,
                                         <span class="kw">horizon</span> <span class="kw">=</span> <span class="fl">7</span>, <span class="kw">samples</span> <span class="kw">=</span> <span class="fl">10</span>,
                                         <span class="kw">serial_interval</span> <span class="kw">=</span> <span class="kw pkg">EpiSoon</span><span class="kw ns">::</span><span class="no"><a href="reference/example_serial_interval.html">example_serial_interval</a></span>)
<span class="co">#&gt; Warning: Unknown or uninitialised column: `sample`.</span>

<span class="co">#&gt; Warning: Unknown or uninitialised column: `sample`.</span>

<span class="no">forecasts</span>
<span class="co">#&gt; $forecast_rts</span>
<span class="co">#&gt; # A tibble: 532 x 12</span>
<span class="co">#&gt;    timeseries model forecast_date date       horizon median  mean    sd bottom</span>
<span class="co">#&gt;    &lt;chr&gt;      &lt;chr&gt; &lt;chr&gt;         &lt;date&gt;       &lt;int&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;</span>
<span class="co">#&gt;  1 Region 1   AR 3  2020-03-04    2020-03-05       1 0      0.548 0.966      0</span>
<span class="co">#&gt;  2 Region 1   AR 3  2020-03-04    2020-03-06       2 0.0701 1.53  2.10       0</span>
<span class="co">#&gt;  3 Region 1   AR 3  2020-03-04    2020-03-07       3 0      0.830 1.54       0</span>
<span class="co">#&gt;  4 Region 1   AR 3  2020-03-04    2020-03-08       4 0.283  1.23  1.73       0</span>
<span class="co">#&gt;  5 Region 1   AR 3  2020-03-04    2020-03-09       5 0      0.874 1.58       0</span>
<span class="co">#&gt;  6 Region 1   AR 3  2020-03-04    2020-03-10       6 0      0.492 0.913      0</span>
<span class="co">#&gt;  7 Region 1   AR 3  2020-03-04    2020-03-11       7 0.822  2.39  3.51       0</span>
<span class="co">#&gt;  8 Region 1   AR 3  2020-03-05    2020-03-06       1 0.149  0.547 0.956      0</span>
<span class="co">#&gt;  9 Region 1   AR 3  2020-03-05    2020-03-07       2 0.835  2.22  3.45       0</span>
<span class="co">#&gt; 10 Region 1   AR 3  2020-03-05    2020-03-08       3 0      0.475 0.788      0</span>
<span class="co">#&gt; # … with 522 more rows, and 3 more variables: lower &lt;dbl&gt;, upper &lt;dbl&gt;,</span>
<span class="co">#&gt; #   top &lt;dbl&gt;</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $rt_scores</span>
<span class="co">#&gt; # A tibble: 420 x 14</span>
<span class="co">#&gt;    timeseries model forecast_date date       horizon   dss  crps  logs   bias</span>
<span class="co">#&gt;    &lt;chr&gt;      &lt;chr&gt; &lt;chr&gt;         &lt;date&gt;       &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;</span>
<span class="co">#&gt;  1 Region 1   AR 3  2020-03-04    2020-03-05       1  3.34 1.41   2.62 -0.8  </span>
<span class="co">#&gt;  2 Region 1   AR 3  2020-03-04    2020-03-06       2  1.49 0.943  2.20 -0.400</span>
<span class="co">#&gt;  3 Region 1   AR 3  2020-03-04    2020-03-07       3  1.57 1.17   2.23 -0.6  </span>
<span class="co">#&gt;  4 Region 1   AR 3  2020-03-04    2020-03-08       4  1.28 0.906  2.26 -0.6  </span>
<span class="co">#&gt;  5 Region 1   AR 3  2020-03-04    2020-03-09       5  1.43 1.17   3.92 -0.6  </span>
<span class="co">#&gt;  6 Region 1   AR 3  2020-03-04    2020-03-10       6  2.86 1.31   3.80 -0.8  </span>
<span class="co">#&gt;  7 Region 1   AR 3  2020-03-04    2020-03-11       7  2.42 0.779  1.97 -0.200</span>
<span class="co">#&gt;  8 Region 1   AR 3  2020-03-05    2020-03-06       1  3.10 1.43   6.29 -0.8  </span>
<span class="co">#&gt;  9 Region 1   AR 3  2020-03-05    2020-03-07       2  2.37 0.804  2.00 -0.200</span>
<span class="co">#&gt; 10 Region 1   AR 3  2020-03-05    2020-03-08       3  4.17 1.28   1.46 -1    </span>
<span class="co">#&gt; # … with 410 more rows, and 5 more variables: sharpness &lt;dbl&gt;,</span>
<span class="co">#&gt; #   calibration &lt;dbl&gt;, median &lt;dbl&gt;, iqr &lt;dbl&gt;, ci &lt;dbl&gt;</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $forecast_cases</span>
<span class="co">#&gt; # A tibble: 420 x 12</span>
<span class="co">#&gt;    timeseries model forecast_date date       horizon median  mean    sd bottom</span>
<span class="co">#&gt;    &lt;chr&gt;      &lt;chr&gt; &lt;chr&gt;         &lt;date&gt;       &lt;int&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;</span>
<span class="co">#&gt;  1 Region 1   AR 3  2020-03-04    2020-03-05       1    0    17.3  32.0      0</span>
<span class="co">#&gt;  2 Region 1   AR 3  2020-03-04    2020-03-06       2    1.5  55.6  77.4      0</span>
<span class="co">#&gt;  3 Region 1   AR 3  2020-03-04    2020-03-07       3    0    33.4  62.4      0</span>
<span class="co">#&gt;  4 Region 1   AR 3  2020-03-04    2020-03-08       4    7    61.6  93.4      0</span>
<span class="co">#&gt;  5 Region 1   AR 3  2020-03-04    2020-03-09       5    0    26.9  49.5      0</span>
<span class="co">#&gt;  6 Region 1   AR 3  2020-03-04    2020-03-10       6    0    25.4  48.6      0</span>
<span class="co">#&gt;  7 Region 1   AR 3  2020-03-04    2020-03-11       7   12.5  86.9 150.       0</span>
<span class="co">#&gt;  8 Region 1   AR 3  2020-03-05    2020-03-06       1    3.5  17.7  32.3      0</span>
<span class="co">#&gt;  9 Region 1   AR 3  2020-03-05    2020-03-07       2   43    93.7 142.       0</span>
<span class="co">#&gt; 10 Region 1   AR 3  2020-03-05    2020-03-08       3    0    16    27.1      0</span>
<span class="co">#&gt; # … with 410 more rows, and 3 more variables: lower &lt;dbl&gt;, upper &lt;dbl&gt;,</span>
<span class="co">#&gt; #   top &lt;dbl&gt;</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $case_scores</span>
<span class="co">#&gt; # A tibble: 420 x 15</span>
<span class="co">#&gt;    timeseries model sample forecast_date date       horizon   dss  crps  logs</span>
<span class="co">#&gt;    &lt;chr&gt;      &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt;         &lt;date&gt;       &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co">#&gt;  1 Region 1   AR 3  1      2020-03-04    2020-03-05       1  9.09  39.0  6.68</span>
<span class="co">#&gt;  2 Region 1   AR 3  1      2020-03-04    2020-03-06       2  8.65  32.3  5.74</span>
<span class="co">#&gt;  3 Region 1   AR 3  1      2020-03-04    2020-03-07       3  9.01  48.7  5.94</span>
<span class="co">#&gt;  4 Region 1   AR 3  1      2020-03-04    2020-03-08       4  9.18  48.8  6.29</span>
<span class="co">#&gt;  5 Region 1   AR 3  1      2020-03-04    2020-03-09       5 11.3   72.1  6.18</span>
<span class="co">#&gt;  6 Region 1   AR 3  1      2020-03-04    2020-03-10       6 14.0   98    6.13</span>
<span class="co">#&gt;  7 Region 1   AR 3  1      2020-03-04    2020-03-11       7 10.2   93.1  8.60</span>
<span class="co">#&gt;  8 Region 1   AR 3  1      2020-03-05    2020-03-06       1 10.1   48.4  9.74</span>
<span class="co">#&gt;  9 Region 1   AR 3  1      2020-03-05    2020-03-07       2  9.80  32.1  5.68</span>
<span class="co">#&gt; 10 Region 1   AR 3  1      2020-03-05    2020-03-08       3 17.7   74.1 11.6 </span>
<span class="co">#&gt; # … with 410 more rows, and 6 more variables: bias &lt;dbl&gt;, sharpness &lt;dbl&gt;,</span>
<span class="co">#&gt; #   calibration &lt;dbl&gt;, median &lt;dbl&gt;, iqr &lt;dbl&gt;, ci &lt;dbl&gt;</span></pre></div>
<ul>
<li>Plot an evaluation of Rt forecasts using iterative fitting.</li>
</ul>
<!-- end list --><div class="sourceCode" id="cb7"><pre class="r"><span class="kw pkg">EpiSoon</span><span class="kw ns">::</span><span class="fu"><a href="reference/plot_forecast_evaluation.html">plot_forecast_evaluation</a></span>(<span class="no">forecasts</span>$<span class="no">forecast_rts</span>, <span class="no">obs_rts</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">7</span>)) +
   <span class="kw pkg">ggplot2</span><span class="kw ns">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_grid.html">facet_grid</a></span>(<span class="no">model</span> ~ <span class="no">timeseries</span>) +
   <span class="kw pkg">cowplot</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/cowplot/man/panel_border.html">panel_border</a></span>()</pre></div>
<p><img src="reference/figures/unnamed-chunk-6-1.png" width="60%"></p>
<ul>
<li>Plot an evaluation of case forecasts using iterative fitting</li>
</ul>
<!-- end list --><div class="sourceCode" id="cb8"><pre class="r"><span class="kw pkg">EpiSoon</span><span class="kw ns">::</span><span class="fu"><a href="reference/plot_forecast_evaluation.html">plot_forecast_evaluation</a></span>(<span class="no">forecasts</span>$<span class="no">forecast_cases</span>, <span class="no">obs_cases</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">7</span>)) +
   <span class="kw pkg">ggplot2</span><span class="kw ns">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_grid.html">facet_grid</a></span>(<span class="no">model</span> ~ <span class="no">timeseries</span>, <span class="kw">scales</span> <span class="kw">=</span> <span class="st">"free"</span>) +
   <span class="kw pkg">cowplot</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/cowplot/man/panel_border.html">panel_border</a></span>()</pre></div>
<p><img src="reference/figures/unnamed-chunk-7-1.png" width="60%"></p>
<ul>
<li>Summarise the forecasts by model scored against observed cases</li>
</ul>
<!-- end list --><div class="sourceCode" id="cb9"><pre class="r"><span class="kw pkg">EpiSoon</span><span class="kw ns">::</span><span class="fu"><a href="reference/summarise_scores.html">summarise_scores</a></span>(<span class="no">forecasts</span>$<span class="no">case_scores</span>)
<span class="co">#&gt; # A tibble: 18 x 9</span>
<span class="co">#&gt;    score  model   bottom    lower   median      mean    upper      top        sd</span>
<span class="co">#&gt;    &lt;chr&gt;  &lt;chr&gt;    &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;</span>
<span class="co">#&gt;  1 bias   AR 3  -1.00e+0 -8.00e-1 -8.00e-1   -0.662  -6.00e-1    0        0.263 </span>
<span class="co">#&gt;  2 bias   Semi… -1.00e+0  3.00e-1  8.00e-1    0.561   1.00e+0    1        0.548 </span>
<span class="co">#&gt;  3 calib… AR 3   8.57e-5  8.57e-5  8.57e-5    0.0240  3.68e-3    0.222    0.0860</span>
<span class="co">#&gt;  4 calib… Semi…  8.57e-5  8.57e-5  8.57e-5    0.0202  2.00e-4    0.340    0.0639</span>
<span class="co">#&gt;  5 ci     AR 3   1.51e+2  3.35e+2  5.95e+2 1382.      1.12e+3 9342.    2232.    </span>
<span class="co">#&gt;  6 ci     Semi…  2.59e+1  5.15e+1  1.41e+2 1162.      2.07e+3 5469.    1795.    </span>
<span class="co">#&gt;  7 crps   AR 3   3.21e+1  8.91e+1  1.40e+2  152.      1.84e+2  416.      93.7   </span>
<span class="co">#&gt;  8 crps   Semi…  2.79e+0  6.46e+0  1.67e+1   44.7     7.90e+1  177.      54.3   </span>
<span class="co">#&gt;  9 dss    AR 3   9.01e+0  1.07e+1  1.18e+1   14.8     1.33e+1   53.4     11.2   </span>
<span class="co">#&gt; 10 dss    Semi…  4.66e+0  6.03e+0  7.88e+0   14.8     1.57e+1   54.6     18.8   </span>
<span class="co">#&gt; 11 iqr    AR 3   1.16e+2  3.54e+2  6.03e+2  681.      8.63e+2 1894.     467.    </span>
<span class="co">#&gt; 12 iqr    Semi…  1.19e+1  2.81e+1  7.75e+1  191.      3.38e+2  716.     228.    </span>
<span class="co">#&gt; 13 logs   AR 3   5.70e+0  6.60e+0  7.23e+0  Inf       9.86e+0  Inf      Inf     </span>
<span class="co">#&gt; 14 logs   Semi…  3.27e+0  4.07e+0  4.82e+0   12.2     8.38e+0   71.4     30.2   </span>
<span class="co">#&gt; 15 median AR 3   6.72e+1  2.60e+2  4.16e+2  463.      5.92e+2 1176.     272.    </span>
<span class="co">#&gt; 16 median Semi…  2.00e+0  1.70e+1  5.00e+1  108.      1.86e+2  386.     124.    </span>
<span class="co">#&gt; 17 sharp… AR 3   0.       0.       1.85e+1   64.6     8.52e+1  348.     108.    </span>
<span class="co">#&gt; 18 sharp… Semi…  5.36e+0  1.26e+1  1.85e+1   24.5     3.02e+1   76.4     18.4</span></pre></div>
</div>
<div id="contributing" class="section level2">
<h2 class="hasAnchor">
<a href="#contributing" class="anchor"></a>Contributing</h2>
<p>File an issue <a href="https://github.com/epiforecasts/EpiSoon/issues">here</a> if you have identified an issue with the package. Please note that due to operational constraints priority will be given to users informing government policy or offering methodological insights. We welcome all contributions, in particular those that improve the approach or the robustness of the code base.</p>
</div>
<div id="docker" class="section level2">
<h2 class="hasAnchor">
<a href="#docker" class="anchor"></a>Docker</h2>
<p>This package was developed in a docker container based on the <code>rocker/geospatial</code> docker image.</p>
<p>To build the docker image run (from the <code>EpiSoon</code> directory):</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1"></a><span class="ex">docker</span> build . -t episoon</span></code></pre></div>
<p>To run the docker image run:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1"></a><span class="ex">docker</span> run -d -p 8787:8787 --name episoon -e USER=episoon -e PASSWORD=episoon episoon</span></code></pre></div>
<p>The rstudio client can be found on port :8787 at your local machines ip. The default username:password is epinow:epinow, set the user with -e USER=username, and the password with - e PASSWORD=newpasswordhere. The default is to save the analysis files into the user directory.</p>
<p>To mount a folder (from your current working directory - here assumed to be <code>tmp</code>) in the docker container to your local system use the following in the above docker run command (as given mounts the whole <code>episoon</code> directory to <code>tmp</code>).</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1"></a><span class="ex">--mount</span> type=bind,source=<span class="va">$(</span><span class="bu">pwd</span><span class="va">)</span>/tmp,target=/home/EpiSoon</span></code></pre></div>
<p>To access the command line run the following:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1"></a><span class="ex">docker</span> exec -ti episoon bash</span></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Sam Abbott <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0001-8057-8037" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Nikos Bosse <br><small class="roles"> Author </small>  </li>
<li>Joel Hellewell <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0003-2683-0849" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Katharine Sherratt <br><small class="roles"> Author </small>  </li>
<li>James Munday <br><small class="roles"> Author </small>  </li>
<li>Robin Thompson <br><small class="roles"> Author </small>  </li>
<li>Aurelien Chateigner <br><small class="roles"> Author </small>  </li>
<li>Sylvain Mareschal <br><small class="roles"> Author </small>  </li>
<li>Andrea Rau <br><small class="roles"> Author </small>  </li>
<li>Nathalie Vialaneix <br><small class="roles"> Author </small>  </li>
<li>Michael DeWitt <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0001-8940-1967" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Sebastian Funk <br><small class="roles"> Author </small>  </li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/epiforecasts/EpiSoon"><img src="https://github.com/epiforecasts/EpiSoon/workflows/R-CMD-check/badge.svg" alt="R build status"></a></li>
<li><a href="https://hub.docker.com/repository/docker/seabbs/episoon"><img src="https://img.shields.io/docker/pulls/seabbs/episoon" alt="Docker Pulls"></a></li>
<li><a href="https://zenodo.org/badge/latestdoi/248311916"><img src="https://zenodo.org/badge/248311916.svg" alt="DOI"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by Sam Abbott, Nikos Bosse, Joel Hellewell, Katharine Sherratt, James Munday, Robin Thompson, Aurelien Chateigner, Sylvain Mareschal, Andrea Rau, Nathalie Vialaneix, Michael DeWitt, Sebastian Funk.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.9000.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
